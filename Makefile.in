prefix = @prefix@
datadir = @datadir@
lispdir = @lispdir@
srcdir = @srcdir@

@SET_MAKE@
EMACS = @EMACS@
XEMACS = xemacs
PACKAGEDIR =

all: lick info

all-ja: lick info info-ja

lick:
	cd lisp && $(MAKE) EMACS="$(EMACS)" lispdir="$(lispdir)" all

install:
	cd lisp && $(MAKE) EMACS="$(EMACS)" lispdir="$(lispdir)" install
	cd texi && $(MAKE) EMACS="$(EMACS)" install

# Rule for XEmacs package.
package: xlick add-info-suffix xinfo remove-info-suffix
	cd lisp && $(MAKE) EMACS="$(XEMACS)" package

install-package: add-info-suffix xinfo xinfo remove-info-suffix
	cd lisp && $(MAKE) EMACS="$(XEMACS)" PACKAGEDIR="$(PACKAGEDIR)" \
		install-package

package-ja: xlick add-info-suffix xinfo xinfo-ja remove-info-suffix
	cd lisp && $(MAKE) EMACS="$(XEMACS)" package

install-package-ja: add-info-suffix xinfo xinfo-ja remove-info-suffix
	cd lisp && $(MAKE) EMACS="$(XEMACS)" PACKAGEDIR="$(PACKAGEDIR)" \
		install-package

xlick:
	cd lisp && $(MAKE) EMACS="$(XEMACS)" lispdir="$(lispdir)" all

xinfo:
	cd texi && $(MAKE) EMACS="$(XEMACS)" all

xinfo-ja:
	cd texi && $(MAKE) EMACS="$(XEMACS)" MAKEINFO=no ja

add-info-suffix:
	cd texi && $(MAKE) EMACS="$(XEMACS)" add-info-suffix

remove-info-suffix:
	cd texi && $(MAKE) remove-info-suffix

# Rule for Lars and nobody else.
some:
	cd lisp && $(MAKE) EMACS="$(EMACS)" some
l:
	cd lisp && $(MAKE) EMACS="$(EMACS)" clever

info:
	cd texi && $(MAKE) EMACS="$(EMACS)" all

info-ja:
	cd texi && $(MAKE) EMACS=$(EMACS) MAKEINFO=no ja

clean:
	rm -f */*.orig */*.rej *.orig *.rej
	rm -f MANIFEST.*

xsome:
	cd lisp && $(MAKE) EMACS="$(XEMACS)" some

elclean:
	rm -f lisp/*.elc

x:
	$(MAKE) EMACS="$(XEMACS)"

distclean: clean
	rm -rf *~
	for i in lisp texi; do (cd $$i; make distclean); done
	rm -f config.log config.status config.cache Makefile

osome:
	$(MAKE) EMACS="$(XEMACS)" some

config.status: $(srcdir)/configure
	$(SHELL) ./config.status --recheck
$(srcdir)/configure: $(srcdir)/configure.in
	cd $(srcdir) && autoconf
Makefile: $(srcdir)/Makefile.in config.status
	CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status

# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT:
