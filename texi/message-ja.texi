\input texinfo                  @c -*-texinfo-*-

@setfilename message-ja
@settitle T-gnus 6.13 Message Manual
@synindex fn cp
@synindex vr cp
@synindex pg cp
@c @direntry
@c * Message: (message).   Mail and news composition mode that goes with Gnus.
@c @end direntry
@iftex
@finalout
@end iftex
@setchapternewpage odd

@ifinfo

This file documents Message, the Emacs message composition mode.  

このファイルは Emacs のメッセージ作成モードである Message に関する説明文
書です。

Copyright (C) 1996,97,98,99 Free Software Foundation, Inc.

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

著作権表示とこの許可文がすべての複製に存在する限り、この説明書のまったく
同一の複製を作り、配布することを許可する。

@ignore
Permission is granted to process this file through Tex and print the
results, provided the printed document carries copying permission
notice identical to this one except for the removal of this paragraph
(this paragraph not being relevant to the printed manual).

この段落が取り除かれているのを除き、これと同じ複製に関する許可文が表示さ
れている限り、このファイルを Tex にかけて、その結果を印刷することを許可
する (この段落は印刷されたマニュアルでは参照されません)。

@end ignore
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided also that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

同一複製の条件の下で、それによって得られた結果もこの許可文の表示と同一の
条件のもとで配布する限り、この説明書の修正版の複製をし、配布することを許
可する。

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions.

上記の修正版に関する条件の下で、この説明書の翻訳の複製を作り、配布するこ
とを許可する。

@end ifinfo

@tex

@titlepage
@title T-gnus 6.13 Message Manual

@author by Lars Magne Ingebrigtsen
@translated by members of Semi-gnus mailing-list
@page

@vskip 0pt plus 1filll
Copyright @copyright{} 1996,97,98,99 Free Software Foundation, Inc. 

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

著作権表示とこの許可文がすべての複製に存在する限り、この説明書のまったく
同一の複製を作り、配布することを許可する。

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

同一複製の条件の下で、それによって得られた結果をこの許可文の表示と同一の
条件のもとで配布する限り、この説明書の修正版の複製をし、配布することを許
可する。

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions.

上記の修正版に関する条件の下で、この説明書の翻訳の複製を作り、配布するこ
とを許可する。

@end titlepage
@page

@end tex

@node Top
@top Message

Gnus の全てのメッセージの作成 (メールとニュースの両方) はメッセージモー
ドバッファで行われます。

@menu
* Interface::         メッセージバッファを設定する。
* Commands::          メッセージモードバッファで実行できる命令。
* Variables::         メッセージバッファをカスタマイズする。
* Compatibility::     メッセージを下位互換にする。
* Appendices::        もっと技術的な事。
* Index::             変数、関数、概念の索引。
* Key Index::         メッセージモードキーの一覧。
@end menu

このマニュアルは T-gnus 6.13 Message に対応します。Message はこのマニュ
アルと同じ版番号の Gnus の配布と共に配布されます。


@node Interface
@chapter 界面

プログラム (もしくは人) がメッセージに反応したいとき -- 返答、フォローアッ
プ、転送、取り消し -- そのプログラム (もしくは人) はメッセージがあるバッ
ファにポイントを入れて必要な命令を呼び出すだけで良いべきです。そうすると 
@code{Message} は新しい @code{message} モードバッファを適切なヘッダーを
入れて作り出し、利用者はメッセージを送る前にそれを編集できます。

@menu
* New News Message::     全く新しいニュースメッセージを編集する。
* Reply::                メールで返答する。
* Wide Reply::           全ての人にメールで応答する。
* Followup::             ニュースでフォローアップする。
* Canceling News::       新しい記事を取り消す。
* Superseding::          メッセージの代替。
* Forwarding::           メッセージをニュースもしくはメールで転送する。
* Resending::            メールメッセージを再送する。
* Bouncing::             メールメッセージの失敗を再送する。
@end menu


@node New Mail Message
@section 新しいメールメッセージ

@findex message-mail
@code{message-mail} 命令は新しいバッファを作り表示します。

2つの選択自由な引数が受け付けられます: 最初のものは @code{To} ヘッダーと
して、2番目は @code{Subject} ヘッダーとして使われる。もしこれらが 
@code{nil} であるなら、それらの2つのヘッダーは空になります。


@node New News Message
@section 新しいニュースメッセージ

@findex message-news
命令 @code{message-news} は新しいメッセージバッファを作り、表示します。

この関数は2つの選択自由な引数を受け付けます。最初のものは 
@code{Newsgroups} ヘッダーとして、2つめのものは @code{Subject} ヘッダー
として使われます。もしこれらが @code{nil} であるなら、それらの2つのヘッ
ダーは空になります。


@node Reply
@section 返答

@findex message-reply
関数 @code{message-reply} は現在のバッファのメッセージへの返答のメッセー
ジバッファを作り、表示します。

@vindex message-reply-to-function
Message は何処に返答が行くかを普通の方法 (@pxref{Responses}) で決定しま
すが、変数 @code{message-reply-to-function} を弄ることであなたの要求に合
うようにその振る舞いを変える事ができます。

@code{From} の代わりに @code{Sender} に返答を送りたいのであれば、このよ
うな事ができます:

@lisp
(setq message-reply-to-function
      (lambda ()
       (cond ((equal (mail-fecth-field "from") "somebody")
               (mail-fetch-field "sender"))
             (t
              nil))))
@end lisp

この関数はそれが返答しようとする記事のヘッダー部分に限定された範囲で呼ば
れます。

ご覧の通り、この関数はそれが To ヘッダーがどのようであるべきかに間する主
張があれば、文字列を返すべきです。もしそうでなければ、それは @code{nil} 
を返すだけで、そうすれば To ヘッダーを決定する普通の方法が使われるでしょ
う。

この関数はリストを返す事もできます。そのような場合は、それぞれの要素は 
cons セルであるべきで、それの car はヘッダーの名前 (例 @code{Cc}) で、
cdr がヘッダーの値 (例 @samp{larsi@@ifi.uio.no}) であるべきです。全ての
これらのヘッダーは出て行くメールのヘッダーに挿入されます。


@node Wide Reply
@section 広く返答

@findex message-wide-reply
@code{message-wide-reply} は現在のバッファのメッセージへの広い返答のメッ
セージバッファを作って表示します。@dfn{広い返答} は @code{To}、
@code{From}、(もしくは @code{Reply-to}) と @code{Cc} ヘッダーに挙げられ
ている全ての人々に届く返答です。

@vindex message-wide-reply-to-function
Message は返答が何処に行くかを決定するために普通の方法を使いますが、
@code{message-wide-reply} を弄る事で、振る舞いをあなたの要求に合うように
変更する事ができます。それは @code{message-reply-to-function} と同じよう
に使われます (@pxref{Reply})。


@findex rmail-dont-reply-to-names
正規表現 @code{rmail-dont-reply-to-names} に合致するアドレスは @code{Cc} 
ヘッダーから取り除かれます。


@node Followup
@section フォローアップ

@findex message-followup
命令 @code{message-followup} は現在のバッファのメッセージへのフォローアッ
プであるメッセージバッファを作り表示します。

@vindex message-followup-to-function
Message はフォローアップがどこに行くかを普通の方法を使って決定しますが、
@code{message-followup-to-function} を弄る事で、あなたの要求に合うように
振る舞いを変更する事ができます。それは @code{message-reply-to-function} 
と同じように使われます (@pxref{Reply})。

@vindex message-use-followup-to
変数 @code{message-use-followup-to} は @code{Followup-To} ヘッダーに関し
てどうするかを指定します。それが @code{use} であれば、いつも値を使います。
もしそれが @code{ask} であれば (これが初期設定です)、値を使うかどうかを
尋ねます。もし @code{t} であると、それが @samp{投稿者} でない限り、値を
使います。@code{nil} であれば、値を使いません。


@node Canceling News
@section ニュースを取り消す

@findex message-cancel-news
命令 @code{message-cancel-news} は現在のバッファの記事を取り消します。


@node Superseding
@section 代替

@findex message-supersede
命令 @code{message-supersede} は現在のバッファのメッセージを代替するメッ
セージバッファを作り表示します。

@vindex message-ignored-supersede-headers
@code{message-ignored-supersedes-headers} に合致するヘッダーは新しいメッ
セージバッファを作り上げる前に取り除かれます。初期値は 
@*@samp{^Path:\\|^Date\\|^NNTP-Posting-Host:\\|^Xref:\\|^Lines:\\|@*
^Received:\\|^X-From-Line:\\|Return-Path:\\|^Supersedes:} です。


@node Forwarding
@section 転送

@findex message-forward
命令 @code{message-forward} は現在のバッファのメッセージを転送するための
メッセージバッファを作り表示します。もし接頭引数を与えられると、転送は
ニュースを使います。

@table @code
@item message-forward-state-separator
@vindex message-forward-start-separator
転送されるメッセージの前に挿入される区切りです。初期値は @*
@samp{------- Start of forwarded message -------\n} です。

@vindex message-forward-end-separator
@item message-forward-end-separator
転送されるメッセージの後に挿入される区切りです。初期値は @*
@samp{------- End of forwarded message -------\n} です。

@item message-signature-before-forwarded-message
@vindex message-signature-before-forwarded-message
もしこの変数が @code{t} であると、それが初期値ですが、あなたの個人的な署
名が転送されるメッセージの前に挿入されます。もしそうでなければ、転送され
るメッセージは新しいメールの最初に挿入されます。

@item message-included-forward-headers
@vindex message-included-forward-headers
これは正規表現で、それは転送されるメッセージに含まれるヘッダー行に合致す
るものです。

@end table


@node Resending
@section 再送

@findex message-resend
命令 @code{message-resend} は利用者にアドレスの入力を促進し、現在のバッ
ファのメッセージをそのアドレスに再送します。

@vindex message-ignored-resent-headers
正規表現 @code{message-ignored-resent-headers} に合致するヘッダーはメッ
セージを送る前に取り除かれます。初期値は @code{^Return-receipt} です。


@node Bouncing
@section 失敗

@findex message-bounce
命令 @code{message-bounce} は、もし現在のバッファが失敗したメールメッセー
ジであれば、失敗情報を取り除いたメッセージバッファを作り表示します。
@dfn{失敗メッセージ} は普通は @code{mailer-daemon} から配送不可として返
送されたメールです。

@vindex message-ignored-bounced-headers
正規表現 @code{message-ignored-bounced-headers} に合致するヘッダーはバッ
ファを作り上げる前に取り除かれます。初期値は 
@samp{^\\(Received\\|Return-Path\\):} です。


@node Commands
@chapter 命令

@menu
* Header Commands::     ヘッダーに移動するための命令。
* Movement::            メッセージバッファを動き回る。
* Insertion::           メッセージバッファに物事を挿入する。
@c * MIME::                @sc{mime} considerations.
* Various Commands::    いろいろな事。
* Sending::             実際にメッセージを送る。
* Mail Aliases::        どのようにしてメールの別名を使うか。
@end menu


@node Header Commands
@section ヘッダー命令

これらの全ての命令は当のヘッダーに移動します。もしそれが存在しないと、そ
れは挿入されます。

@table @kbd

@item C-c ?
@kindex C-c ?
@findex message-goto-to
メッセージモードの記述です。

@item C-c C-r C-t
@kindex C-c C-f C-t
@findex message-goto-to
@code{To} ヘッダーに行きます (@code{message-goto-to})。

@item C-c C-f C-b
@kindex C-c C-f C-b
@findex message-goto-bcc
@code{Bcc} ヘッダーに行きます (@code{message-goto-bcc})。

@item C-c C-f C-f
@kindex C-c C-f C-f
@findex message-goto-fcc
@code{Fcc} ヘッダーに行きます (@code{message-goto-fcc})。

@item C-c C-f C-c
@kindex C-c C-f C-c
@findex message-goto-cc
@code{Cc} ヘッダーに行きます (@code{message-goto-cc})。

@item C-c C-f C-s
@kindex C-c C-f C-s
@findex message-goto-subject
@code{Subject} ヘッダーに行きます (@code{message-goto-subject})。

@item C-c C-f C-r
@kindex C-c C-f C-r
@findex message-goto-reply-to
@code{Reply-To} ヘッダーに行きます (@code{message-goto-reply-to})。

@item C-c C-f C-n
@kindex C-c C-f C-n
@code{Neswsgroups} ヘッダーに行きます (@code{message-goto-newsgroups})。

@item C-c C-f C-d
@kindex C-c C-f C-d
@findex message-goto-distribution
@code{Distribution} ヘッダーに行きます 
(@code{message-goto-distribution})。

@item C-c C-f C-o
@kindex C-c C-f C-o
@findex message-goto-followup-to
@code{Followup-To} ヘッダーに行きます (@code{message-goto-followup-to})。

@item C-c C-f C-k
@kindex C-c C-f C-k
@findex message-goto-keywords
@code{Keywords} ヘッダーに行きます (@code{message-goto-keywords})。

@item C-c C-f C-u
@kindex C-c C-f C-u
@findex message-goto-summary
@code{Summary} ヘッダーに行きます (@code{message-goto-summary})。

@end table


@node Movement
@section 移動

@table @kbd
@item C-c C-b
@kindex C-c C-b
@findex message-goto-body
メッセージの本体の先頭に移動します (@code{message-goto-body})。

@item C-c C-i
@kindex C-c C-i
@findex message-goto-signature
メッセージの署名に移動します (@code{message-goto-signature})。

@end table


@node Insertion
@section 挿入

@table @kbd

@item C-c C-y
@kindex C-c C-y
@findex message-yank-original
バッファ @code{gnus-article-copy} にあるメッセージをメッセージバッファに
貼り付けます。普通は @code{gnus-article-copy} はあなたが返答しようとして
いるメッセージです (@code{messsage-yank-original})。

@item C-c C-q
@kindex C-c C-q
@findex message-fill-yanked-message
貼り付けられたメッセージを折り返します 
(@code{message-fill-yanked-message})。警告: もし、引用の習慣が変であるな
ら、貼り付けられた文章をひどくぐちゃぐちゃにしてしまうかもしれません。そ
れが安全であると知ると、すぐに人心地つくでしょうが。とにかく、@kbd{C-x
u} (@code{undo}) が使用可能で、大丈夫であると言う事を覚えておいて下さい。


@item C-c C-w
@kindex C-c C-w
@findex message-insert-signature
バッファの最後に署名を挿入します (@code{message-insert-signature})。

@item C-c M-h
@kindex C-c M-h
@findex message-insert-headers
メッセージのヘッダーを挿入します (@code{message-insert-headers})。

@end table

@table @code
@item message-ignored-cited-headers
この正規表現に合致する全てのヘッダーは貼り付けられたメッセージから取り除
かれます。初期値は @samp{.} で、これは全てのヘッダーが取り除かれると言う
事です。

@item message-citation-line-function
@vindex message-citation-line-function
引用行を挿入するために呼ばれる関数です。初期値は 
@code{message-insert-citation-line} で、これは引用行を次のようにします:

@example
Hallvard B Furuseth <h.b.furuseth@@usit.uio.no> writes:
@end example

この関数が呼ばれたとき、ポイントはメッセージの本体の先頭にあるでしょう。

@item message-yank-prefix
@vindex message-yank-prefix
@cindex yanking
@cindex quoting
あなたが記事に返答かフォローアップをしているときは、普通はあなたが応答し
ている人のものに引用符を付けたいでしょう。引用文の挿入は @dfn{貼り付け} 
によってなされ、それぞれの貼り付けられた引用行はその前に 
@code{message-yank-prefix} を付けられます。初期値は @samp{> } です。

@item message-indentation-spaces
@vindex message-indentation-spaces
貼り付けられたメッセージを字下げするための空白の数です。

@item message-cite-function
@vindex message-cite-function
@findex message-cite-original
@findex sc-cite-original
@findex message-cite-original-without-signature
@cindex Supercite
本記事を引用するための関数です。初期値は @code{message-cite-original} で、
これは単純にもとのメッセージを挿入し、それぞれの行の頭に @samp{> } をくっ
つけます。@code{message-cite-original-without-signature} は同様の事をし
ますが、署名は省きます。Supercite を使うために、それを 
@code{sc-cite-original} に設定する事もできます。

@item message-indent-citation-function
@vindex message-indent-citation-function
ちょうどメールバッファに挿入された引用文を修正するための関数です。これは
関数のリストである事もできます。それぞれの関数は @code{(point)} と 
@code{(mark t)} の間で引用を発見する事ができます。そして、それぞれの関数
は引用文が修正されると、その周りにポイントとマークを残さなければなりませ
ん。

@item message-signature
@vindex message-signature
メッセージバッファの最後に挿入される文字列です。もし @code{t} (これが初
期設定です) であれば、ファイル @code{message-signature-file} が代わりに
挿入されます。もし関数であれば、関数の結果が代わりに使われます。もし式で
あれば、式の結果が変わりに使われます。この変数が @code{nil} であれば、署
名は全く挿入されません。

@item messsage-signature-file
@vindex message-signature-file
バッファの最後に挿入される署名の入っているファイルです。初期値は 
@samp{~/.signature} です。

@end table

RFC1036bis は、署名はその前に @samp{-- } の3文字だけの行があるべきである
と言っている事に注意して下さい。これは受け手が自動的に署名を認識して、処
理をする事を簡単にするためです。ですから、あなたの美しいデザインをそれが、
あの、完全に破壊していると感じてもそれらの文字を取り除かないでください。

署名は4行より多くなるべきでは無いと言う事も注意して下さい。ASCII の絵を
入れる事は、皆にあなたが馬鹿で何も重要な事は言わないと言う事を信じさせる
ための効果的な方法です。

@c FIXTGNUS We should provide MIME manual.
@c @node MIME
@c @section MIME
@c @cindex MML
@c @cindex MIME
@c @cindex multipart
@c @cindex attachment

@c Message is a @sc{mime}-compliant posting agent.  The user generally
@c doesn't have to do anything to make the @sc{mime} happen---Message will
@c automatically add the @code{Content-Type} and
@c @code{Content-Transfer-Encoding} headers.

@c The most typical thing users want to use the multipart things in
@c @sc{mime} for is to add ``attachments'' to mail they send out.  This can
@c be done with the @code{C-c C-a} command, which will prompt for a file
@c name and a @sc{mime} type.

@c You can also create arbitrarily complex multiparts using the MML
@c language (@pxref{Composing, , Composing, emacs-mime, The Emacs MIME
@c Manual}).


@node Various Commands
@section いろいろな命令

@table @kbd

@item C-c C-r
@kindex C-c C-r
@findex message-caesar-buffer-body
現在のメッセージをシーザー変換 (別名 rot13) します 
(@code{message-caesar-buffer-body})。もし範囲限定が実行されていたら、バッ
ファの見える部分だけを変換します。数値接頭引数は文をどのくらい回転させる
かを指定します。初期値は 13 です。

@item C-c C-e
@kindex C-c C-e
@findex message-elide-region
ポイントとマークの間の文を省きます (@code{message-elide-region})。文章は
切られて (killed) 省略符号 (@samp{[...]} がその場所に挿入されます。

@item C-c C-z
@kindex C-c C-x
@findex message-kill-to-signature
署名までか、それが無ければ記事の最後までの全ての文を切ります 
(@code{message-kill-to-signature})。

@item C-c C-v
@kindex C-c C-v
@findex message-delete-not-region
メッセージの本体のリージョンの外の全ての文を消去します 
(@code{message-delete-not-region})。

@item M-RET
@kindex M-RET
@kindex message-newline-and-format
4つの新しい行を挿入し、もしポイントが引用文の間にあるならば、再整形しま
す。

これは例です:

@example
> これは何かの引用文です。 そして、ここにはもっと引用文があります。
@end example

もし、ポイントが @samp{そして} の前にあり、@kbd{M-RET} を押したなら、以
下のようなものを得ます:

@example
> これは何かの引用文です。

*

> そして、ここにはもっと引用文があります。
@end example

@samp{*} はポイントが置かれている場所です。

@item C-c C-t
@kindex C-c C-t
@findex message-insert-to
フォローアップしようとするメッセージの @code{Reply-To} もしくは 
@code{From} ヘッダーを含む @code{To} ヘッダーを挿入します 
(@code{message-insert-to})。

@item C-c C-n
@kindex C-c C-n
@findex message-insert-newsgroups
返答している記事の @code{Followup-To} もしくは、@code{Nesgroups} ヘッダー
を反映した @code{Newsgroups} ヘッダーを挿入します 
(@code{message-insert-newsgroups})。

@item C-c M-r
@kindex C-c M-r
@findex message-rename-buffer
バッファの名前を変更します (@code{message-rename-buffer})。接頭引数を与
えられれば、新しいバッファ名の入力を促進します。

@end table


@node Sending
@section 送信

@table @kbd
@item C-c C-c
@kindex C-c C-c
@findex message-send-and-exit
メッセージを送信し、現在のバッファを埋めます 
(@code{message-send-and-exit})。

@item C-c C-s
@kindex C-c C-s
@findex message-send
メッセージを送信します (@code{message-send})。

@item C-c C-d
@kindex C-c C-d
@findex message-dong-send
メッセージバッファを埋めて終了します (@code{message-dont-send})。

@item C-c C-k
@kindex C-c C-k
@findex message-kill-buffer
メッセージバッファを切って終了します (@code{message-kill-buffer})。

@end table



@node Mail Aliases
@section メール別名
@cindex mail aliases
@cindex aliases

@vindex message-mail-alias-type
変数 @code{message-mail-alias-type} はどのような型のメール別名 (mail
alias) 伸張を使うかを制御します。現在では、一つの様式だけが使用可能です---
Message はメール別名を扱うために @code{mailabbrev} を使います。もしこの
変数が @code{nil} であるなら、メール別名伸張は実行されません。

@code{Mailabbrev} は @file{/etc/mailrc} と @file{~/.mailrc} ファイルを解
析する事により動作します。ファイルは次のようになっています:

@example
alias lmi "Lars Magne Ingebrigtsen <larsi@@ifi.uio.no>"
alias ding "ding@@ifi.uio.no (ding mailing list)"
@end example

このような行をあなたの @file{~/.mailrc} ファイルに追加した後で、
@code{To} や @code{Cc} (等など) のヘッダーで @samp{lmi} と書いて、
@kbd{SPC} を押すだけで別名を伸張します。

メッセージを送るときには伸張は行われません---全ての伸張は明示的に行われ
なくてはなりません。



@node Variables
@chapter 変数

@menu
* Message Headers::             一般的なメッセージヘッダーのようなもの。
* Mail Headers::                メールヘッダーをカスタマイズする。
* Mail Variables::              他のメール変数。
* News Headers::                ニュースヘッダーをカスタマイズする。
* News Variables::              他のニュース変数。
* Various Message Variables::   他のメッセージ変数。
* Sending Variables::           送信するための変数。
* Message Buffers::             Message がそのバッファの名前を付ける方法。
* Message Actions::             終了するときに実行される動作。
@end menu


@node Message Headers
@section メッセージヘッダー

Message はメッセージ作成部分に関しては非常に積極的です。それは次のようで
なければなりません -- それはニュースとメールの複合代理です。複合メッセー
ジを送る事ができるように、また、それはメッセージのメールとニュースの複製
が十分に同じように見えるように、全てのヘッダーをそれ自身で作成します。

@table @code

@item message-generate-headers-first
@vindex message-generate-headers-first
@code{nil} でなければ、メッセージの作成を始める前に全てのヘッダーを作成
します。

@item message-from-style
@vindex message-from-style
@code{From} ヘッダーがどのように見えるかを指定します。4つの合法的値があ
ります:

@table @code
@item nil
アドレスだけです -- @samp{king@@grassland.com}.

@item parens
@samp{king@@granssland.com (Elvis Parsley)}.

@item angles
@samp{Elvis Parsley <king@@grassland.com>}.

@item default
それが引用符号を要求しなければ @code{angles} のように見え、もし引用符号
が要求される場合は @code{parens} のように見えます。@code{parens} が引用
符号を要求したとしても、とにかく @code{angles} を使います。

@end table

@item message-deletable-headers
@vindex message-deletable-headers
このリストにある、以前に Message により作成されたヘッダーは投稿する前に
削除されます。記事を投稿するとしましょう。それから、わんぱく坊主なあなた
はそれを何か他のグループに再び投稿する事に決定したので、
@code{*post-buf*} バッファに戻り、@code{Newsgroups} 行を編集し、再び送り
出したとします。初期設定では、この変数は前に作成された古い 
@code{Message-ID} が取り除かれ、新しいものが作成される事を確実にしていま
す。もしこれがなされないと、帝国全体はおそらく崩壊し、無政府主義が浸透し、
猫が2本の足で歩き始め、世界を支配するでしょう。聞くところに依れば。

@item message-default-headers
@vindex message-default-headers
この文字列は全てのメッセージバッファのヘッダーの最後に挿入されます。

@item message-subject-re-regexp
@vindex message-subject-re-regexp
メッセージへの応答は @samp{Re: } で始まります。これは英語の ``response'' 
の略では @emph{ありません} が、ラテン語で、``それに応答して'' (in
response to) と言う意味です。いくつかの無学の馬鹿はこの事実を得る事に失
敗し、彼らのソフトウェアを忌まわしい @samp{Aw: } (``antwort'') や 
@samp{Sv: } (``svar'') を代わりに使うように ``国際化'' しました。それは
意味が無く、邪悪です。しかし、これらの邪悪な道具を使った利用者を扱わなけ
ればならないかもしれませんので、そのような場合はこの変数をこれらの接頭語
に合うような正規表現に設定するでしょう。私自身は、そのような規格に従わな
いメールはただ捨て去っているだけです。

@end table


@node Mail Headers
@section メールヘッダー

@table @code
@item message-required-mail-headers
@vindex message-required-mail-headers
この変数の構文を知りたければ、@xref{News Headers} を参照して下さい。それ
の初期値は @code{(From Date Subject (optional . In-Reply-To) Message-ID
Lines (optional . X-Mailer))} です。

@item message-ignored-mail-headers
@vindex message-ignored-mail-headers
メールを出す前に取り除かれるヘッダーの正規表現です。初期値は 
@samp{^[GF]cc:\\|^Resent-Fcc:} です。

@item message-default-mail-headers
@vindex message-default-mail-headers
この文字列はメールとして初期化された全てのメッセージバッファのヘッダーの
最後の挿入されます。

@end table


@node Mail Variables
@section メール変数

@table @code
@item message-send-mail-function
@vindex message-send-mail-function
現在のバッファをメールとして送るために使われる関数です。初期値は 
@code{message-send-mail-with-sendmail} です。もし代わりに MH で送るのを
好むのであれば、この変数を @code{message-send-mail-with-mh} に設定して下
さい。

@item message-mh-deletable-headers
@vindex message-mh-deletable-headers
ほとんどの版の MH はこの変数のヘッダーを含むメッセージを食わされるのを嫌
います。この変数が @code{nil} でないなら (これが初期設定ですが)、これら
のヘッダーは MH を使ってメッセージを送っているときには取り除かれます。あ
なたの MH がこれらのヘッダーを扱えるのであれば、それを @code{nil} に設定
して下さい。

@end table


@node News Headers
@section ニュースヘッダー

@vindex message-required-news-headers
@code{message-required-news-headers} はヘッダーシンボルのリストです。こ
れらのヘッダーは自動的に作成されるか、もしくはそれが不可能であれば、入力
を促進します。以下のシンボルは合法的です:

@table @code

@item From
@cindex From
@findex user-full-name
@findex user-mail-address
この必要なヘッダーは関数 @code{message-make-from} 関数の結果により作られ、
それは変数 @code{message-from-style}, @code{user-full-name},
@code{user-mail-address} に依存します。

@item Subject
@cindex Subject
この必要なヘッダーは、まだ存在しない場合は入力を促進されます。

@item Newsgroups
@cindex Newsgroups
この必要なヘッダーはどのニュースグループに記事が投稿される事になるかを指
定します。もしまだ存在していないなら、入力を促進されます。

@item Organization
@cindex organization
この選択任意なヘッダーは変数 @code{message-user-organization} に依存して
作成されます。もしこの変数が @code{t} であれば、
@code{message-user-organization-file} が使われます。この変数は文字列であ
る事もでき (その場合はその文字列が使われます)、関数である事もできます 
(その関数は引数無しで呼ばれ、使われる文字列を返す必要があります)。

@item Lines
@cindex Lines
この選択任意なヘッダーは Message により計算されます。

@item Message-ID
@cindex Message-ID
@vindex mail-host-address
@findex system-name
@cindex Sun
この必要なヘッダーは Message により作成されます。日付、時間、利用者名、
システム名に基づいた他に無い ID が作成されます。Message は 
@code{mail-host-address} が定義されていれば、それを fully qualified
domain name (FQDN) (完全に条件を満たしたドメイン名) として使います。もし
そうでなければ、それは @code{system-name} を使い、それはいくつかのマシン 
-- 主に Sun では、FQDN を報告しません。

@item X-Newsreader
@cindex X-Nesreader
この選択自由なヘッダーはローカル変数 @code{message-newsreader} にしたがっ
て作られます。

@item X-Mailer
この選択自由なヘッダーは、既に @code{X-Nesreader} ヘッダーが存在している
場合以外は、ローカル変数 @code{message-mailer} にしたがって作られます。

@item In-Reply-To
この選択自由なヘッダーは返答している記事の @code{Date} と @code{From} ヘッ
ダーを使って作られます。

@item Expires
@cindex Expires
この非常に選択自由なヘッダーは変数 @code{message-expires} にしたがって挿
入されます。これは自分が何をしているかを知らない限り、使用は全く勧められ
ません。

@item Distribution
@cindex Distribution
この選択自由なヘッダーは変数 @code{message-distribution-function} にした
がって作られます。それは非推奨で、非常に誤解されたヘッダーです。

@item Path
@cindex path
この非常に選択自由なヘッダーはおそらく決して使われてはならないでしょう。
しかしいくつかの @emph{とても} 古いサーバーはこのヘッダーが存在する事を
要求します。@code{message-user-path} がこの @code{Path} ヘッダーがどのよ
うに見えるかをさらに制御します。もしそれが @code{nil} であれば、サーバー
名を leaf 節として使います。もしそれが文字列であれば、その文字列を使いま
す。もしそれが文字列でも @code{nil} でもなければ、利用者の名前だけを使い
ます。しかし、何らかの形でこの変数を弄らなければならない必要性は非常に少
ないでしょう。
@end table

@findex yow
@cindex Mime-Version
加えて、あなたは cons をリストに入れる事ができます。cons の car はシンボ
ルであるべきです。このシンボル名はヘッダー名で、cdr はこのヘッダーの値と
してそのまま入れられることになる文字列か、呼ばれる関数のどちらかである事
ができます。例えば、もし @code{Mime-Version: 1.0} を挿入したいなら、
@code{(Mime-Version . "1.0")} をリストに入れるべきでしょう。もしおもしろ
い引用を挿入したいなら、@code{(X-Yow . yow)} のようなものをリストに入れ
る事ができるでしょう。関数 @code{yow} はその後で引数無しで呼ばれます。

もしリストが cons の car が @code{optional} である cons を含んでいるなら、
この cons の cdr は @code{nil} でないときだけ挿入されます。

出て行くニュース記事をカスタマイズするための他の変数:

@table @code

@item message-syntax-checks
@vindex message-syntax-checks
@code{nil} でなければ、Message は投稿の前に、ヘッダーと他のものの合法性
を調べます。このリストに要素を付け加えたり取り除いたりする事で、調べる粒
の大きさを制御する事ができます。合法的な要素は:

@table @code
@item subject-cmsg
命令のための表題を調べます。
@item sender
@cindex Sender
@code{From} ヘッダーが変に見えれば、新しい @code{Sender} ヘッダーを挿入
します。
@item multiple-headers
複数の等価なヘッダーの存在を調べます。
@item sendsys
@cindex sendsys
版番号と sendsys 命令の存在を調べます。
@item message-id
@code{Message-ID} が大丈夫かどうか調べます。
@item from
@code{From} ヘッダーがよく見えるかどうかを調べます。
@item long-lines
あまりに長い行を調べます。
@item control-chars
非合法文字を調べます。
@item size
過剰な大きさを調べます。
@item new-text
メッセージに新しい文があるかどうかを調べます。
@item signature
署名の長さを調べます。
@item approved
@cindex approved
記事が @code{Approved} ヘッダーを持っているかどうかを調べます。それは司
会者だけが含むべき物です。
@item empty
記事が空かどうかを調べます。
@item invisible-text
バッファに不可視のテキストがあるかどうかを調べます。
@item empty-headers
ヘッダーのどれかが空であるかを調べます。
@item existing-newsgroups
@code{Newsgroups} と @code{Follouup-to} で書かれているニュースグループが
存在するかどうかを調べます。
@item valid-newsgroups
@code{Newsgroups} と @code{Followup-to} ヘッダーが構文的に正しいかを調べ
ます。
@item repeated-newsgroups
@code{Newsgroups} と @code{Followup-to} ヘッダーに繰り返されたグループ名
が無いかを調べます。
@item shorten-followup-to
投稿するグループの数を @code{Followup-to} ヘッダーを付け加える事で少なく
するかを調べます。
@end table

これら全ての状態は初期設定では調べられます。

@item message-ignored-news-headers
@vindex message-ignored-news-headers
投稿する前に取り除かれるヘッダーの正規表現です。初期値は @*
@samp{^NNTP-Posting-Host:\\|^Xref:\\|^[BGF]cc:\\|^Resent-Fcc:} です。

@item message-default-news-headers
@vindex message-default-news-headers
この文字列はニュースとして初期化されたすべてのメッセージバッファのヘッダー
の最後に挿入されます。

@end table


@node News Variables
@section 新しい変数

@table @code
@item message-send-news-function
@vindex message-send-news-function
現在のバッファをニュースとして送るために使われる関数です。初期値は 
@code{mesage-send-news} です。

@item message-post-method
@vindex message-post-method
準備されたニュースメッセージを投稿するのに使われる gnus の @dfn{選択方法}
(詳細は gnus マニュアルを見て下さい) です。

@end table


@node Various Message Variables
@section いろいろなメッセージ変数

@table @code
@item message-signature-separator
@vindex message-signature-separator
署名分離に合致する正規表現です。初期値は @samp{^-- *$} です。

@item mail-header-separator
@vindex mail-header-separator
ヘッダーを本体から分けるのに使われる文字列です。初期値は @samp{--text
follows this line--} です。

@item message-directory
@vindex message-directory
多くのメールのものから使われるディレクトリーです。初期値は 
@file{~/Mail/} です。

@item message-signature-setup-hook
@vindex message-signature-setup-hook
メッセージバッファを初期化するときに実行されるフックです。それはヘッダー
が挿入されているが、署名が挿入される前に実行されます。

@item message-setup-hook
@vindex message-setup-hook
メッセージバッファが初期化されたときの最後ですが、貼り付けられる文章が挿
入される前に実行されるフックです。

@item message-header-setup-hook
@vindex message-header-setup-hook
ヘッダーを初期化した後に、ヘッダーに範囲を限定して呼ばれるフックです。

例えば、gnus を実行していて、あなたが全てのニュース記事とメーリングリス
トに送る全てのメッセージに @samp{Mail-Copies-To} ヘッダーを挿入したいの
であれば、以下のような事ができます:

@lisp
(defun my-message-header-setup-hook ()
  (let ((group (or gnus-newsgroup-name "")))
    (when (or (message-fetch-field "newsgroups")
              (gnus-group-find-parameter group 'to-address)
              (gnus-group-find-parameter group 'to-list))
      (insert "Mail-Copies-To: never\n"))))

(add-hook 'message-header-setup-hook
          'my-message-header-setup-hook)
@end lisp

@item message-send-hook
@vindex message-send-hook
メッセージを送る前に実行されるフックです。

もし送る前に特定のヘッダーを加えたいのであれば、関数 
@code{message-add-header} をこのフックに使う事ができます。例えば:
@findex message-add-header

@lisp
(add-hook 'message-send-hook 'my-message-add-content)
(defun my-message-add-content ()
  (message-add-header
   "X-In-No-Sense: Nonsense"
   "X-Whatever: no"))
@end lisp

この関数は、ヘッダーが既に存在している場合はヘッダーを加えません。

@item message-send-mail-hook
@vindex message-send-mail-hook
メールメッセージを送る前に実行されるフックです。

@item message-send-news-hook
@vindex message-send-news-hook
ニュースメッセージを送る前に実行されるフックです。

@item message-sent-hook
@vindex message-sent-hook
メッセージを送る後に実行されるフックです。

@item message-mode-syntax-table
@vindex message-mode-syntax-table
メッセージモードバッファで使われる構文テーブルです。

@item message-send-method-alist
@vindex message-send-method-alist

出て行くメッセージを送るための方法の連想リストです。それぞれの要素は次の
式を持っています

@lisp
(TYPE PREDICATE FUNCTION)
@end lisp

@table @var
@item type
方法を指定するシンボルです。

@item predicate
メッセージは @var{type} のメッセージであるかどうかを決定するために引数無
しで呼ばれる関数です。

@item function
@var{predicate} が @code{nil} でない値を帰したときに呼ばれる関数です。
@var{function} は一つの引数 -- 接頭辞 と共に呼ばれます。
@end table

@lisp
((news message-news-p message-send-via-news)
 (mail message-mail-p message-send-via-mail))
@end lisp



@end table



@node Sending Variables
@section 送るための変数

@table @code

@item message-fcc-handler-function
@vindex message-fcc-handler-function
出ていく記事を保存するために呼ばれる関数です。この関数は記事を蓄積するた
めのファイル名と共に呼ばれます。初期設定の関数は @code{message-output} 
で、それは Unix mailbox 様式で保存します。

@item message-courtesy-message
@vindex messsage-courtesy-messsage
複合メッセージを送るときは、この文字列はメールで送られた複製の方の最初に
挿入されます。もしその文字列が書法仕様指定 @samp{%s} を含んでいれば、記
事が投稿されたニュースグループがそこに挿入されます。もしこの変数が 
@code{nil} であれば、そのような親切メッセージは加えられません。初期値は 
@samp{"The following message is a courtesy copy of an article\nthat has
been posted to %s as well.\n\n"} です。

@end table


@node Message Buffers
@section メッセージバッファ

Message はあなたがメッセージバッファを要求したときに、他に無い唯一のバッ
ファ名で新しいバッファをつくります。メッセージを送ったときに、バッファは
普通は削除されません。その名前は変更されて、特定の数の古いメッセージバッ
ファは生きたままになります。

@table @code
@item message-generate-new-buffers
@vindex message-generate-new-buffers
@code{nil} でなければ、新しいバッファを作成します。初期値は @code{t} で
す。もしこれが関数なら、その関数を3つの引数と共に呼びます: 型、送り先ア
ドレス、グループ名 です。 (これらのどれでも @code{nil} であるかもしれま
せん。) 関数は新しいバッファ名を返すべきです。

@item message-use-multi-frames
@vindex message-use-multi-frames
@code{nil} でなければ、新しいフレームを作成します。初期値は @code{nil} 
です。

@item message-delete-frame-on-exit
@vindex messgae-delete-frame-on-exit
変数 @code{message-delete-frame-on-exit} はメッセージを送信したときと、
バッファを切ったときにフレームを消去するかを決定します。@code{nil} であ
れば、(これが初期設定ですが) フレームを消去しません。@code{ask} であれば、
消去するかどうかを利用者に尋ねます。@code{t} であれば、常に消去します。

@item message-max-buffers
@vindex message-max-buffers
ｋの変数はどのくらい古いメッセージバッファを保っておくかを指定します。こ
れより多いメッセージバッファがあれば、一番古いバッファが削除されます。初
期値は10です。この変数が @code{nil} であると、古いメッセージバッファは削
除されません。

@item message-send-rename-function
@vindex message-send-rename-function
メッセージを送った後で、バッファの名前は、例えば、@samp{*reply to Lars*} 
から @samp{*sent reply to Lars*} に変更されます。もしこれを好まないなら、
この変数をあなたの好きな方法でバッファの名前を変更する関数に設定して下さ
い。そもそもバッファ名を変更する事を好まないのであれば、次のようにできま
す:

@lisp
(setq message-send-rename-function 'ignore)
@end lisp

@item message-kill-buffer-on-exit
@findex message-kill-buffer-on-exit
@code{nil} でなければ、終了時にすぐにバッファを削除します。

@end table


@node Message Actions
@section メッセージの動作

Message がニュース/メールリーダーから使われたとき、リーダーはメッセージ
が送られた後の何らかの仕事を実行したがる傾向があります。おそらく、前のウィ
ンドウ設定に戻るか、記事に返答されたと言う印を付けるなどをしたいのでしょ
う。

@vindex message-kill-actions
@vindex message-postpone-actions
@vindex message-exit-actions
@vindex message-send-actions
利用者はいろいろな方法でメッセージバッファから出るかもしれません。一番良
くあるのは @kbd{C-c C-c} で、それはメッセージを送って終了します。他の可
能性には @kbd{C-c C-s} があり、これはメッセージを送るだけであり、
@kbd{C-c C-d} はメッセージの編集を先に延ばしてメッセージバッファを埋め、
@kbd{C-c C-k} はメッセージバッファを削除します。これらの動作はそれぞれそ
れと関連付けられたリストを持っていて、それは実行される動作を含んでいます:
@code{message-send-actions}, @code{message-exit-actions},
@code{message-postpone-actions}, and @code{message-kill-actions} です。

Message はこれらのリストと作用する関数を提供しています:
@code{message-add-action} です。最初の引数は加えられる動作で、残りの引数
はどのリストにこの動作を加えるかです。これは gnus からの例です:

@lisp
  (message-add-action
   `(set-window-configuration ,(current-window-configuration))
   'exit 'postpone 'kill)
@end lisp

これは、メッセージバッファが削除、延期、狩猟されたときに gnus のウィン
ドウ設定を復活させます。

@dfn{動作} は次のどれかです: 普通の関数、もしくは @code{car} が関数で、
@code{cdr} が引数のリストであるリストか、@code{評価} される式です。


@node Compatibility
@chapter 互換性
@cindex compatibility

Message は事実上、それ自身の変数しか使いません---古い @code{mail-} の変
数は考慮されません。Message にこれらの変数を計算に入れさせたいのであれば、
以下のものをあなたの @code{.emacs} ファイルに入れる事ができます:

@lisp
(require 'messcompat)
@end lisp

これは多くの Message 変数を対応するメール変数から初期化します。


@node Appendices
@chapter 付記

@menu
* Responses:: 応答が何処に行くかを決定する標準の法則。
@end menu 

@node Responses
@section 応答

メッセージが何処に行くかを決定するために、初期設定では以下のアルゴリズム
が使われます。

@table @dfn
@item reply
@dfn{返答} (reply) はメッセージを送った人 @emph{だけ} にメールで応答した
いときのものです。受取人は一人しかいません。受取人が誰であるかを決定する
ために、以下のヘッダーが順番に考慮されます:

@table @code
@item Reply-To

@item From
@end table


@item wide reply
@dfn{広い返答} (wide reply) はあなたが応答しようとしているメッセージに書
かれていた @emph{全ての} 実体を含むメールによる応答です。以下のヘッダー
からの全てのメールボックスが連結されて、出ていく @code{To}/@code{Cc} ヘッ
ダーをつくります:

@table @code
@item From
(@code{Reply-To} が無い限り、これが使われ、それがある場合はそれが代わり
に使われます)。

@item Cc

@item To
@end table

@code{Mail-Copies-To} ヘッダーが存在していると、それもメールボックスのリ
ストに加えられるでしょう。このヘッダーが @samp{never} であれば、それは 
@code{From} (もしくは @code{Reply-To}) メールボックスが抑制されると言う
事です。


@item followup
@dfn{フォローアップ} (followup) はニュースによる応答です。以下のヘッダー 
(優先順位の高いものから挙げられています) が何処に応答が送られるかを決定
します:

@table @code

@item Followup-To

@item Newsgroups

@end table

もし @code{Mail-Copies-To} ヘッダーが存在すると、それが @samp{never} で
なければ、新しい @code{Cc} ヘッダーの基として使われ、ます。

@end table



@node Index
@chapter Index
@printindex cp

@node Key Index
@chapter Key Index
@printindex ky

@summarycontents
@contents
@bye

@c End:

