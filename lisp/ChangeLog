2004-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-resend-message-edit): Call mime-to-mml.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--num-file, nnmaildir--mkfile,
	nnmaildir--emlink-p, nnmaildir--eexist-p, nnmaildir--new-number):
	New macros and functions.
	* nnmaildir.el (nnmaildir--group-maxnum, nnmaildir--update-nov):
	Handle > NLINK_MAX messages.
	* nnmaildir.el (nnmaildir-request-set-mark): Use
	nnmaildir--emlink-p and nnmaildir--eexist-p.

2004-01-25  Alex Schroeder  <alex@gnu.org>

	* spam-stat.el (spam-stat-process-directory-age): New option.
	(spam-stat-process-directory): Use it.

2004-01-24  Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>  (tiny change)

	* spam-stat.el (spam-stat-reduce-size): Set spam-stat-dirty.
	(spam-stat-save): Accept prefix argument.

2004-01-23  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-set-mark): Handle the "too many
	links" error.

2004-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Advise byte-optimize-form-code-walker to optimize
	the rest of the and/or forms.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-tmp-grouplens): Define for the sake of backward
	compatibility with old .newsrc.eld files.

	* gnus-xmas.el (gnus-xmas-grouplens-menu-add): Remove.

	* gnus-sum.el (gnus-summary-line-format-alist): Remove grouplens.

	* gnus-start.el (gnus-1): do.

	* gnus-group.el (gnus-group-line-format-alist): do.

	* gnus.el: (gnus-use-grouplens, gnus-visual): do.

	* gnus-gl.el: Remove.

2004-01-23  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Now correctly handles a list of
	marks consisting of a single range {for example, (3 . 5)} rather
	than a list of a single range { ((3 . 5)) }.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-store-gnus-article-buffer): Use
	with-current-buffer.
	(spam-stat-store-current-buffer): Use insert-buffer-substring to
	avoid consing a string.

	* mm-util.el (mm-charset-synonym-alist): Add ks_c_5601-1987.
	Remove obsolete entries for big5 and gb2312.

2004-01-22  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Avoid splicing null INTO the
	uncompressed list.

2004-01-22  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-strip-xref): New function.
	(spam-stat-process-directory): Use it.

	* gnus-util.el (gnus-fetch-field): Don't bind case-fold-search
	here -- it's done in message-fetch-field.

2004-01-21  Kevin Greiner <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-queue-mail,
	gnus-agent-prompt-send-queue): New variables.
	(gnus-agent-send-mail): Use gnus-agent-queue-mail.
	* gnus-draft.el (gnus-group-send-queue): Pass the group name
	"nndraft:queue" along to gnus-draft-send.  Use
	gnus-agent-prompt-send-queue.
	(gnus-draft-send): Rebind gnus-agent-queue-mail to nil when group
	is "nndraft:queue".  Suggested by Gaute Strokkenes
	<gs234@srcf.ucam.org>

	* gnus-agent.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added
	(gnus-agent-cat-groups): Use eval-and-compile, not
	eval-when-compile, to define gnus-agent-set-cat-groups as the setf
	method of gnus-agent-cat-groups even when the buffer has been
	evaled.
	(gnus-agent-save-active,gnus-agent-save-active-1): Merged to
	delete gnus-agent-save-active-1.
	(gnus-agent-save-groups): Deleted. Identical to
	gnus-agent-save-active.
	(gnus-agent-write-active): No longer adjust agent's copy of active
	file as agent's adjustments are now stored in their own
	file. Removed optional parameter.
	(gnus-agent-possibly-alter-active): Ignore groups of unagentized
	servers.  Add use of min/max range limits from server's local
	file.
	(gnus-agent-save-alist): Removed unused optional argument.
	(gnus-agent-load-local,gnus-agent-read-and-cache-local),
	(gnus-agent-read-local,gnus-agent-save-local,gnus-agent-get-local),
	(gnus-agent-set-local): A per-server file that keeps min/max range
	limits for articles known to the agent.	 Provides a fast mechanism
	for altering many active ranges.
	(gnus-agent-expire-group,gnus-agent-expire): No longer save the
	active file (local makes it unnecessary).
	(gnus-agent-regenerate-group): Fixed XEmacs compatibility.

	* gnus-cus.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added

	* gnus-draft.el (gnus-draft-send): Bind gnus-agent-queue-mail to
	disable it when sending to "nndraft:queue".
	(gnus-group-send-queue): Add safety check to avoid sending queue
	when unplugged.

	* gnus-group.el (gnus-group-catchup): Use new
	gnus-sequence-of-unread-articles, not
	gnus-list-of-unread-articles, to avoid exhausting memory with huge
	numbers of articles.  Use gnus-range-map to avoid having to
	uncompress the unread list.
	(gnus-group-archive-directory,
	gnus-group-recent-archive-directory): Fixed invalid ange-ftp
	reference.

	* gnus-range.el (gnus-range-map): Iterate over list or sequence.
	(gnus-sorted-range-intersection): Intersection of two ranges
	without requiring that they first be uncompressed.

	* gnus-start.el (gnus-activate-group): Unless blocked by the
	caller, possibly expand the active range to include both cached
	and agentized articles.
	(gnus-convert-old-newsrc): Rewrote in anticipation of having
	multiple version-dependent converters.
	(gnus-groups-to-gnus-format): Replaced gnus-agent-save-groups with
	gnus-agent-save-active.
	(gnus-save-newsrc-file): Save dirty agent range limits.

	* gnus-sum.el (gnus-select-newgroup): Replaced inline code with
	gnus-agent-possibly-alter-active.
	(gnus-adjust-marked-articles): Faster handling of simple lists
	
2004-01-21  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-test-directory): New optional argument
	displays a list of files detected.  Suggested by Andrew Cohen
	<cohen@andy.bu.edu>.
	(spam-stat-buffer-words-with-scores): Don't narrow and change
	syntax table here.  Reported by Andrew Cohen <cohen@andy.bu.edu>.

2004-01-20  Teodor Zlatanov  <tzz@lifelogs.com>  

	* spam.el (gnus-summary-mode-map): make spam-generic-score the
	default scoring function
	(spam-generic-score): calls spam-spamassassin-score if
	spam-use-spamassassin or spam-use-spamassassin-headers is on;
	spam-bogofilter-score otherwise.

	From Hubert Chan <hubert@uhoreg.ca>:

	* spam.el (spam-use-spamassassin, spam-use-spamassassin-headers)
	(spam-install-hooks, spam-spamassassin, spam-spamassassin-path)
	(spam-spamassassin-arguments)
	(spam-spamassassin-spam-flag-header)
	(spam-spamassassin-positive-spam-flag-header)
	(spam-spamassassin-spam-status-header, spam-sa-learn-path)
	(spam-sa-learn-rebuild, spam-sa-learn-spam-switch)
	(spam-sa-learn-ham-switch, spam-sa-learn-unregister-switch)
	(spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-spamassassin-headers, spam-check-spamassassin)
	(spam-spamassassin-score)
	(spam-spamassassin-register-with-sa-learn)
	(spam-spamassassin-register-spam-routine)
	(spam-spamassassin-register-ham-routine)
	(spam-assassin-register-spam-routine)
	(spam-assassin-register-ham-routine): add SpamAssassin support
	(spam-bogofilter-score): fix to show article before scoring

	* gnus.el (spam-process, spam-autodetect-methods): add
	spamassassin and spamassassin-headers

	* gnus-registry.el (gnus-registry-split-fancy-with-parent):
	Suppress unnecessary messages.  From Nevin Kapur
	<nkapur@cs.caltech.edu>.

2004-01-20  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-to-hash-table): Use :size keyword in
	make-hash-table.

2004-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (base64-encode-string): Don't autoload it.

2004-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* run-at-time.el: Remove useless (require 'itimer),
	eval-and-compile and (featurep 'xemacs).

2004-01-16  Jesper Harder  <harder@ifa.au.dk>

	* gnus-msg.el (gnus-post-news): Use blank Newsgroups line if
	GROUP is a virtual group.

2004-01-16  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus.el: Autoload `message-y-or-n-p'.

2004-01-15  Jesper Harder  <harder@ifa.au.dk>

	* pgg-parse.el: Remove unnecessary (require 'custom).

	* pgg-def.el: do.

	* nnmail.el: do.

	* gnus-undo.el: do.

	* gnus-picon.el: do.

	* gnus-util.el: do.

2004-01-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-pick-line-number): Add autoload.

2004-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decoce.el (mm-multiple-handles): Recognize a string as a mime
	handle, as well as a list.

	* mm-view.el (mm-w3m-cid-retrieve-1): Call itself recursively.
	Suggested by ARISAWA Akihiro <ari@mbf.sphere.ne.jp>.
	(mm-w3m-cid-retrieve): Simplify.

2004-01-14  Kai Grossjohann  <kai@emptydomain.de>

	* message.el (message-kill-to-signature): Allow prefix arg to
	specify number of lines to keep before signature.  From Vasily
	Korytov.
	(message-kill-to-signature): Change docstring.

2004-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el: Always require sha1-el.
	(canlock-sha1): Bind sha1-maximum-internal-length to nil.

	* message.el: Autoload sha1 only when compiling.

	* lpath.el: Bind eudc-protocol for both Emacs and XEmacs; fbind
	eudc-expand-inline for XEmacs.

2004-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-canlock-generate): Require sha1-el.

2004-01-13  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-expand-name): Silence the byte compiler.

	* lpath.el: Add detect-coding-system.

	* dgnushack.el (dgnushack-compile): Remove obsolete check for
	cus-edit.

2004-01-13  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): Fix prototype.
	Invoke gnus-score-mode.  Reported by
	bojohan+news@dd.chalmers.se (Johan Bockg,Ae(Brd).

	* gnus-range.el (gnus-compress-sequence): Doc fix.  Suggested by
	Jim Blandy <jimb@redhat.com> (tiny change).

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-srvr.el (gnus-browse-foreign-server): Reduce consing.

2004-01-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-get-article-as-string): updated to use
	gnus-request-article-this-buffer, much simpler
	(spam-get-article-as-buffer): removed

2004-01-12  Kai Grossjohann  <kai.grossjohann@mci.com>

	* message.el (message-expand-name): Use EUDC if the user uses
	that.

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-parse-and-decode, rfc2047-decode): Use a
	character for the encoding to avoid consing a string.
	
	* rfc2047.el (rfc2047-decode-string): Don't cons a string
	unnecessarily.

	* mm-util.el (mm-replace-chars-in-string): Remove.

	* rfc2047.el (rfc2047-decode): Use mm-subst-char-in-string instead
	of mm-replace-chars-in-string.

2004-01-11  Jesper Harder  <harder@ifa.au.dk>

	* gnus.sum.el (gnus-remove-odd-characters): Don't cons two new
	strings.

	* mm-util.el (mm-subst-char-in-string): Support inplace.	

	* gnus-sum.el (gnus-summary-remove-list-identifiers): Don't cons
	a new string in every iteration.  Use shy groups.

2004-01-10  Jesper Harder  <harder@ifa.au.dk>

	* gnus-start.el (gnus-subscribe-newsgroup, gnus-start-draft-setup)
	(gnus-group-change-level, gnus-kill-newsgroup)
	(gnus-check-bogus-newsgroups, gnus-get-unread-articles-in-group)
	(gnus-get-unread-articles, gnus-make-articles-unread)
	(gnus-make-ascending-articles-unread): Use accessor
	macros (gnus-group-entry, gnus-group-unread, gnus-info-marks etc.)
	to get group information for improved readability.

	* gnus-srvr.el (gnus-browse-unsubscribe-group): do.

	* gnus-soup.el (gnus-soup-group-brew): do.

	* gnus-msg.el (gnus-put-message): do.

	* gnus-move.el (gnus-group-move-group-to-server): do.

	* gnus-kill.el (gnus-batch-score): do.

	* gnus-group.el (gnus-group-prepare-flat, gnus-group-delete-group)
	(gnus-group-update-group-line, gnus-group-insert-group-line-info)
	(gnus-group-update-group, gnus-group-read-group)
	(gnus-group-make-group, gnus-group-make-help-group)
	(gnus-group-make-archive-group, gnus-group-make-directory-group)
	(gnus-group-make-empty-virtual, gnus-group-sort-selected-flat)
	(gnus-group-sort-by-unread, gnus-group-catchup)
	(gnus-group-unsubscribe-group, gnus-group-kill-group)
	(gnus-group-yank-group, gnus-group-set-info)
	(gnus-group-list-groups): do.

	* gnus.el (gnus-generate-new-group-name): do.

	* gnus-delay.el (gnus-delay-send-queue): do.

	* nnvirtual.el (nnvirtual-catchup-group): do.

	* nnkiboze.el (nnkiboze-generate-group, nnkiboze-generate-group):
	do.

	* gnus-topic.el (gnus-topic-find-groups, gnus-topic-clean-alist)
	(gnus-group-prepare-topics, gnus-topic-check-topology): do.
	
	* gnus-sum.el (gnus-update-read-articles, gnus-select-newsgroup)
	(gnus-mark-xrefs-as-read, gnus-compute-read-articles)
	(gnus-summary-walk-group-buffer, gnus-summary-move-article)
	(gnus-group-make-articles-read): do.
	
2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Use gnus-with-article-buffer.
	
	* gnus-art.el (gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): Use gnus-with-article-headers.
	
	* gnus-art.el (gnus-mm-display-part, gnus-article-wash-status)
	(gnus-article-set-globals, gnus-request-article-this-buffer)
	(gnus-button-message-id, gnus-article-maybe-hide-headers)
	(gnus-mime-view-part-externally, gnus-mime-view-part-internally)
	(gnus-mime-display-alternative): Use with-current-buffer.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-generate-fake-headers): rewrite to be simpler,
	also under 80 char limit, and call gnus-error if needed
	(spam-fetch-article-header): finally fixed - it was a
	buffer-local variable (gnus-newsgroup-data)
	(spam-find-spam): use spam-generate-fake-headers, forget about
	spam-insert-fake-headers
	(spam-insert-fake-headers): removed

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* deuglify.el (gnus-article-outlook-unwrap-lines)
	(gnus-outlook-rearrange-article)
	(gnus-outlook-repair-attribution-outlook)
	(gnus-outlook-repair-attribution-block)
	(gnus-outlook-repair-attribution-other): Remove redundant
	save-excursion.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-fetch-field-from-fast)
	(spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast, spam-generate-fake-headers)
	(spam-fetch-article-header): new functions to deal with Gnus
	internals for fast retrieval of article header data
	(spam-initialize): put spam-find-spam in the gnus-summary-prepared-hook

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-md5): Remove.
	(pop3-apop): Replace pop3-md5 with md5.

	* mm-bodies.el: base64 is always built-in.

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Use
	with-current-buffer.

2004-01-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-insert-header): Remove excessive grouping in
	regexp.

	* gnus-sum.el (gnus-summary-read-document): Ditto.

	* gnus-uu.el (gnus-uu-part-number): Ditto.

	* html2text.el (html2text-remove-tags): Ditto.
	(html2text-format-tags): Ditto.
	(html2text-format-single-elements): Ditto.

	* mml.el (mml-parse-1): Ditto.

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-update-mark): Revert previous change.

	* gnus-group.el (gnus-group-mark-group): Fix for multibyte marks.

	* gnus-sum.el (gnus-summary-update-mark): Fix for multibyte marks.

	* gnus-util.el (gnus-replace-in-string): Remove Emacs 20 code.

2003-11-15  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-lookup-all-secret-keys)
	(pgg-gpg-lookup-key): Use regexp match instead of
	split-string (split-string is different between emacs 21.2 and
	21.4).  Reported by ultrasoul@ultrasoul.com (David D. Smith).

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-view-all-parts)
	(gnus-article-part-wrapper, gnus-article-view-part): Use
	with-current-buffer.

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-disable-spam-split-during-ham-respool)
	(spam-spamoracle-database, spam-cache-lookups)
	(spam-split-last-successful-check, spam-clear-cache, spam-xor)
	(spam-group-ham-mark-p, spam-group-spam-mark-p)
	(spam-group-ham-marks, spam-group-spam-marks)
	(spam-group-spam-contents-p, spam-group-ham-contents-p)
	(spam-list-of-processors, spam-list-of-statistical-checks): doc
	fix, also add spam-use-blackholes to the statistical checks
	(spam-fetch-field-fast): new interface to fetching fields, may
	become a macro
	(spam-fetch-field-from-fast, spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast): use spam-fetch-field-fast
	(spam-insert-fake-headers): fake an article when needed
	(spam-find-spam): fake article when possible
	(spam-check-blackholes, spam-check-BBDB, spam-from-listed-p)
	(spam-check-bogofilter-headers): use message-fetch-field instead
	of nnmail-fetch-field

2004-01-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-find-trace): Add `k' (kill-buffer).

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-split): do not require spam-use-CHECK to be
	enabled if that check is passed to spam-split explicitly; also
	fix so 'spam doesn't get converted to spam-split-group when
	spam-split-symbolic-return is t
	(spam-find-spam): find registrations of the article and use those
	instead of re-running spam-split to find the spam/ham
	classification of the article
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	use gnus-error instead of gnus-message
	(spam-log-registration-type): new function to determine the
	classification of a message based on registry entries; will
	return nil if both 'spam and 'ham are found
	(spam-check-BBDB): expand all the BBDB macros here so we can have
	a reasonably fast local cache without the loading errors
	(spam-cache-lookups): set to t by default
	(spam-find-spam): don't try to guess spam-cache-lookups
	(spam-enter-whitelist, spam-enter-blacklist): also clear the
	spam-caches entry
	(spam-filelist-build-cache, spam-filelist-check-cache): better
	caching of whitelist/blacklist entries
	(spam-check-whitelist, spam-check-blacklist): invoke
	spam-from-listed-p with a type, not a cache variable
	(spam-from-listed-p): wrap around spam-filelist-check-cache

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cite-prefix-regexp): Use with-syntax-table.

	* nnmail.el (nnmail-split-fancy): do.

	* mml.el (mml-parse): do.

	* gnus-score.el (gnus-enter-score-words-into-hashtb)
	(gnus-score-adaptive): do.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-treat-emphasize): Ignore Emacs version number.
	(gnus-mime-button-map): Don't set keymap parent.
	(gnus-button-ctan-directory-regexp): Use shy grouping.
	(gnus-prev-page-map): Don't set keymap parent.
	(gnus-prev-page-map): Remove duplicated one.
	(gnus-next-page-map): Don't set keymap parent.
	(gnus-mime-security-button-map): Ditto.

	* nnheader.el (nnheader-directory-files-is-safe): Ignore Emacs
	version number.

	* sha1-el.el (sha1-string-external): Use with-temp-buffer.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-sha1-function): Remove.
	(canlock-sha1-function-for-verify): Remove.
	(canlock-openssl-program): Remove.
	(canlock-openssl-args): Remove.
	(canlock-ignore-errors): Remove.
	(canlock-sha1-with-openssl): Remove.
	(canlock-sha1): Use sha1 instead of to call canlock-sha1-function.
	(canlock-verify): Don't use canlock-ignore-errors.

	* sha1-el.el (sha1-string-external): Make it can return a string
	in binary form.
	(sha1-region-external): Ditto.
	(sha1-string-internal): Ditto.
	(sha1-region-internal): Ditto.
	(sha1-region): Ditto.
	(sha1-string): Ditto.
	(sha1): Ditto.

2004-01-07  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam.el (spam-report-articles-gmane): New command.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el: Don't make unnecessary *Group* buffer when loading.

	* run-at-time.el (run-at-time-saved): Remove.
	(run-at-time): Doc fix.

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-limit-to-replied): New command.
	(gnus-summary-limit-map): Add it.
	(gnus-summary-make-menu-bar): do.

2004-01-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-cache-lookups, spam-caches, spam-clear-cache):
	first attempt at some caching support (done for BBDB only now)
	(spam-find-spam): set spam-cache-lookups if there are more than 2
	addresses to be checked
	(spam-clear-cache-BBDB): new function, to be invoked by
	bbdb-change-hook, and triggering spam-clear-cache of 'spam-use-BBDB
	(spam-check-BBDB): check and use the caches, if
	spam-cache-lookups is on
	remove superfluous (provide)

2004-01-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences): Changed default.

2004-01-07  Steve Youngs  <sryoungs@bigpond.net.au>

	* run-at-time.el (run-at-time-saved): Move to after the definition
	of `run-at-time'.

	* dgnushack.el: Autoload `font-lock-fontify-buffer' in XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't use
	mm-w3m-local-map-property.

	* mm-view.el (mm-w3m-mode-map): Remove.
	(mm-w3m-local-map-property): Remove.
	(mm-inline-text-html-render-with-w3m): Don't use
	mm-w3m-local-map-property.

2004-01-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* run-at-time.el: New file.

	* dgnushack.el (dgnushack-compile): Don't compile run-at-time
	under Emacs.

	* gnus.el ((fboundp 'gnus-set-text-properties)): Remove definition
	of gnus-set-text-properties.

	* gnus-uu.el (gnus-uu-save-article): Ditto.

	* gnus-salt.el (gnus-carpal-setup-buffer): Ditto.

	* gnus-cite.el (gnus-cite-parse): Ditto.

	* gnus-art.el (gnus-button-push): Use set-text-properties instead
	of gnus-.

	* gnus-xmas.el (run-at-time): Require run-at-time.

	* gnus.el: Changed calls to nnheader-run-at-time and
	password-run-at-time throughout to use run-at-time directly.

	* password.el: Removed definition of run-at-time.

	* nnheaderxm.el: Remove definition of run-at-time.

2004-01-05  Karl Pfl,Ad(Bsterer  <sigurd@12move.de>

	* mml.el (mml-minibuffer-read-disposition): Show attachment type
	in prompt (tiny change)

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* messagexmas.el (message-xmas-redefine): Alias
	`message-make-caesar-translation-table' to
	``message-xmas-make-caesar-translation-table' regardless of XEmacs
	version.

	* gnus-xmas.el (gnus-xmas-set-text-properties): Removed.
	(gnus-xmas-define): Don't alias `gnus-set-text-properties' to
	`gnus-xmas-set-text-properties'.
	(gnus-xmas-redefine): Don't alias `gnus-completing-read' to
	`gnus-xmas-completing-read'. 
	(gnus-xmas-completing-read): Removed.
	(gnus-xmas-open-network-stream): Removed.

	* gnus-ems.el (gnus-mode-line-modified): Don't conditionalise on
	XEmacs version.

	* dns.el (dns-make-network-process): Use `open-network-stream'
	instead of `gnus-xmas-open-network-stream'.

	* dgnushack.el: Remove some XEmacs 21.1 specific stuff.

	* .cvsignore: Add auto-autoloads.el, custom-load.el.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-display-alternative)
	(gnus-insert-mime-button, gnus-insert-mime-security-button)
	(gnus-insert-prev-page-button, gnus-insert-next-page-button):
	Don't use gnus-local-map-property.

	* gnus-util.el (gnus-local-map-property): Remove.

	* mm-view.el (mm-view-pkcs7-decrypt): Replace
	gnus-completing-read-maybe-default with completing-read.

	* gnus-util.el (gnus-completing-read): do.
	(gnus-completing-read-maybe-default): Remove.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* password.el: Only autoload `run-at-time' if not XEmacs.
	Only autoload the itimer functions if XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-xmas-define): Defun char-width for non-MULE
	XEmacsen.

	* dgnushack.el: Autoload executable-find for XEmacs.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-read-string): Remove.
	(gnus-summary-pipe-to-muttprint): Replace gnus-read-string with
	read-string.

2004-01-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* netrc.el: autoload password-read
	(netrc): new configuration group
	(netrc-encoding-method, netrc-openssl-path): configuration
	variables for encoding and decoding of files with symmetric
	ciphers
	(netrc-encode): assistant function to encode a file with
	netrc-encoding-method
	(netrc-parse): added interactive parameter, added optional
	decoding if netrc-encoding-method is non-nil but otherwise
	behavior is standard
	(netrc-encrypting-method, netrc-encrypt, netrc-parse):
	s/encode/encrypt/ everywhere

	* spam.el: remove executable-find autoload

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* gnus-registry.el: Remove Emacs 20 hash table compatibility code.

	* gnus-uu.el (gnus-uu-post-encoded): bury-buffer is always fbound.

2004-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences,
	article-treat-ansi-sequences): New variable and function.
	Suggested by Dan Jacobson <jidanni@jidanni.org>.

	* gnus-sum.el (gnus-summary-wash-map, gnus-summary-make-menu-bar):
	Use it.

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* mm-util.el (mm-quote-arg): Remove.

	* mm-decode.el (mm-mailcap-command): Replace mm-quote-arg with
	shell-quote-argument.

	* gnus-uu.el (gnus-uu-command): do.

	* gnus-sum.el (gnus-summary-insert-pseudos): do.

	* ietf-drums.el (ietf-drums-token-to-list): Replace mm-make-char
	with make-char.

	* mm-util.el (mm-make-char): Remove.

	* mml.el (mml-mode): Replace gnus-add-minor-mode with
	add-minor-mode.

	* gnus-undo.el (gnus-undo-mode): do.

	* gnus-topic.el (gnus-topic-mode): do.

	* gnus-sum.el (gnus-dead-summary-mode): do.

	* gnus-start.el (gnus-slave-mode): do.

	* gnus-salt.el (gnus-binary-mode, gnus-pick-mode): do.

	* gnus-ml.el (gnus-mailing-list-mode): do.

	* gnus-gl.el (gnus-grouplens-mode): do.

	* gnus-draft.el (gnus-draft-mode): do.

	* gnus-dired.el (gnus-dired-mode): do.

	* gnus-ems.el (gnus-add-minor-mode): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* spam-stat.el (with-syntax-table): Remove with-syntax-table
	definition.
	Remove Emacs 20 hash table compatibility code.

	* rfc2047.el (with-syntax-table): Remove with-syntax-table Emacs
	20 compatibility code.

	* spam.el (spam-point-at-eol): Replace with point-at-eol.

	* smime.el (smime-point-at-eol): Replace with point-at-eol.

	* rfc2047.el (rfc2047-point-at-bol, rfc2047-point-at-eol): Replace
	with point-at-{eol,bol}.

	* netrc.el (netrc-point-at-eol): Replace with point-at-eol.

	* imap.el (imap-point-at-eol): Replace with point-at-eol.

	* flow-fill.el (fill-flowed-point-at-bol,
	fill-flowed-point-at-eol): Replace with point-at-{eol,bol}.

	* gnus-util.el (gnus-point-at-bol, gnus-point-at-eol): Remove.
	Replace with point-at-{eol,bol} throughout all files.

2004-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* ntlm.el (ntlm-string-as-unibyte): New macro.
	(ntlm-build-auth-response): Use it.

	Remove Emacs 20 stuff:
	* dgnushack.el (dgnushack-compile): Don't modify max-specpdl-size.
	(butlast, mapc, remove): Remove the compiler macros.
	* gnus-msg.el (gnus-summary-news-other-window): Use remove instead
	of delq and copy-sequence.
	* gnus-art.el (popup-menu): Remove the compiler macro.
	* nnmail.el (nnmail-split-fancy): Don't support customizing with
	Emacs 20.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* ntlm.el: Fix namespace.  Change smb-passwd-hash into
	ntlm-smb-passwd-hash, smb-owf-encrypt into ntlm-smb-owf-encrypt,
	smb-passwd-hash into ntlm-smb-passwd-hash, smbdes-e-p16 into
	ntlm-smb-des-e-p16, smbdes-e-p24 into ntlm-smb-des-e-p24, smbhash
	into ntlm-smb-hash, smb-sp8 into ntlm-smb-sp8, smb-str-to-key into
	ntlm-smb-str-to-key, smb-dohash into ntlm-smb-dohash, smb-perm1
	into ntlm-smb-perm1, smb-perm2 into ntlm-smb-perm2, smb-perm3 into
	ntlm-smb-perm3, smb-perm4 into ntlm-smb-perm4, smb-perm5 into
	ntlm-smb-perm5, smb-perm6 into ntlm-smb-perm6, smb-sc into
	ntlm-smb-sc, smb-sbox into ntlm-smb-sbox, string-permute into
	ntlm-string-permute, string-lshift into ntlm-string-lshift,
	string-xor into ntlm-string-xor.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* ntlm.el: Don't include poem.

	* md4.el (print-int32, print-string-hexa): Remove.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* sasl-ntlm.el, ntlm.el, md4.el: New files.

	* hmac-md5.el (md5-binary): Fix byte compile warning.  (This
	probably breaks emacs with DL patch, but do we care? Is anyone
	still using the DL stuff?)

	* sieve-manage.el: Use the password package.
	(sieve-manage-read-passwd): Remove.
	(sieve-manage-interactive-login): Use password.  Re-add
	condition-case around loop.

	* pgg.el (pgg-passphrase-cache, pgg-run-at-time): Remove.
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache): Use
	the password package.

2003-02-19  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (sieve-sasl-auth): Quote optional initial SASL
	token.

2002-08-07  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (require): Use SASL, not RFC2104/MD5.
	(sieve-manage-authenticators):
	(sieve-manage-authenticator-alist): Add some SASL mechs.
	(sieve-sasl-auth): New function.
	(sieve-manage-cram-md5-auth):
	(sieve-manage-plain-auth): Rewrite using SASL library.
	(sieve-manage-digest-md5-p, sieve-manage-digest-md5-auth)
	(sieve-manage-scram-md5-p, sieve-manage-scram-md5-auth)
	(sieve-manage-ntlm-p, sieve-manage-ntlm-auth)
	(sieve-manage-login-p, sieve-manage-login-auth): Add wrappers.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* sasl.el, sasl-cram.el, sasl-digest.el, hmac-md5.el, hmac-def.el:
	New files.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-no-groups-message): Update.

	* gnus-sum.el (gnus-summary-insert-new-articles): Remove . 

2003-11-09  Simon Josefsson  <jas@extundo.com>

	* imap.el: Support for ID IMAP extension (RFC 2971).
	(imap-local-variables): Add imap-id.
	(imap-id): New variable.
	(imap-id): New function.
	(imap-parse-response): Parse untagged ID response.
	* nnimap.el (nnimap-id): New variable.
	(nnimap-open-connection): Use it.

2003-12-28  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): New.
	* gnus-group.el (gnus-group-score-map): Bind it to W e.

2004-01-04  Simon Josefsson  <jas@extundo.com>

	* password.el: Add.

2004-01-04  Mario Lang  <lang@zid.tugraz.at>

	* dns.el: Add support for AAAA records (see RFC 3596)

	* Fix typo PRT -> PTR

	* Parse MX, PTR and SOA replies (see RFC 1035)

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-logo-color-style): Changed colors to `no'.

	* Moved to Changelog.1.

    Copyright (C) 2000, 2001, 2002, 2004 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:
