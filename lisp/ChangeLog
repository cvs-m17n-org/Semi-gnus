2000-12-04 22:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-win.el (gnus-configure-frame): Save selected window.

2000-02-15  Andrew Innes  <andrewi@gnu.org>

	* nnmbox.el: Require gnus-range.
	(nnmbox-group-building-active-articles): New variable.
	(nnmbox-group-active-articles): New variable; this is a cache of
	all active articles by group and number.
	(nnmbox-in-header-p): New function.
	(nnmbox-find-article): New function.
	(nnmbox-record-active-article): New function.
	(nnmbox-record-deleted-article): New function.
	(nnmbox-is-article-active-p): New function.
	(nnmbox-retrieve-headers): Use nnmbox-find-article.
	(nnmbox-request-article): Ditto.  Also supply extra arg to
	nnmbox-article-group-number.
	(nnmbox-request-expire-articles): Ditto.
	(nnmbox-request-move-article): Ditto.
	(nnmbox-request-replace-article): Ditto.
	(nnmbox-request-rename-group): Rename group entry in active
	article cache.
	(nnmbox-delete-mail): Update active article cache, unless article
	is being replaced.
	(nnmbox-possibly-change-newsgroup): Call nnmbox-read-mbox, rather
	than partially duplicating it.
	(nnmbox-article-group-number): Add extra `this-line' arg, to
	handle articles belonging to multiple groups.
	(nnmbox-save-mail): Update active article cache.
	(nnmbox-read-mbox): Build active article cache when loading mbox.
	Also do some repair work, if we find articles that are missing the
	appropriate X-Gnus-Newsgroup lines in the header.  We can usually
	reconstruct these from Xref info.
	
2000-12-04 18:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mail-source.el (mail-source-report-new-mail): Use
	nnheader-run-at-time.

2000-02-15  Andrew Innes  <andrewi@gnu.org>

	* mail-source.el (mail-source-fetch-pop): Clear pop password when
	an error is thrown, and then rethrow the error.
	(mail-source-check-pop): Ditto.
	(mail-source-start-idle-timer): Prevent multiple pop checks
	running if the check takes a long time.
	
2000-12-04 14:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-msg-mail): COMPOSEFUNC should return t if
	succeed.

2000-12-04 13:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-win.el (gnus-configure-windows): Make sure
	nntp-server-buffer is live.
	(gnus-remove-some-windows): switch-to-buffer -> set-buffer.

2000-11-21  Stefan Monnier  <monnier@cs.yale.edu>

	* gnus-win.el (gnus-configure-windows): switch-to-buffer -> set-buffer.

2000-12-04  Andreas Jaeger  <aj@suse.de>

	* gnus-msg.el (gnus-summary-mail-forward): Fix typos in description.

2000-12-03 12:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-fix-micalg): Alg might be nil.

2000-12-01  Christopher Splinter <chris@splinter.inka.de>

	* gnus-sum.el (gnus-summary-limit-to-age): Fix typo.

2000-12-01  Simon Josefsson  <sj@extundo.com>

	* mml-smime.el (mml-smime-verify): Fix address parsing.

2000-12-01  Simon Josefsson  <sj@extundo.com>

	* mml-smime.el (mml-smime-verify): Don't modify MM buffer.  Handle
	more than one certificate inside PKCS#7 blob.  Better security
	information (clamed / actual sender, openssl output, certificates
	inside message).

	* smime.el (smime-verify-region): Output to /dev/null.
	(smime-buffer-as-string-region): Don't parse empty lines.

2000-11-30 23:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-security-button-line-format-alist): Add
	?d and ?D.
	(gnus-mime-security-show-details-inline): New variable.
	(gnus-mime-security-show-details): Use them.
	(gnus-insert-mime-security-button): Ditto.

	* mml2015.el (mml2015-gpg-verify): Set details when succeed.
	Suggest by Michael Duggan (md5i@cs.cmu.edu).
	(mml2015-gpg-clear-verify): Ditto.
	(mml2015-gpg-decrypt-1): Ditto.
	(mml2015-use): Prefer 'gpg.

2000-11-30 19:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-util.el (gnus-add-text-properties-when): New function.
	(gnus-remove-text-properties-when): Ditto.

	* gnus-cite.el (gnus-article-hide-citation): Use them.
	(gnus-article-toggle-cited-text): Use them.
	
	* gnus-art.el (gnus-signature-toggle): Use them.
	(gnus-article-show-hidden-text): Ditto.
	(gnus-article-hide-text): Ditto.

2000-11-30 14:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-util.el (mm-find-charset-region): Remove eight-bit-*.

2000-11-30  Simon Josefsson  <sj@extundo.com>

	* smime.el (smime-point-at-eol): New alias.
	(smime-buffer-as-string-region): Use it.

2000-11-29 21:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nndraft.el (nndraft-request-restore-buffer): Remove Date field.

2000-11-29 20:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el (nnfolder-request-expire-articles): expiry-target.
	
	* nnbabyl.el (nnbabyl-request-expire-articles): Ditto.
	
	* nnmbox.el (nnmbox-request-expire-articles): Ditto.

2000-11-22  Jan Nieuwenhuizen  <janneke@gnu.org>

	* nnmh.el (nnmh-request-expire-articles): Implemented
	expiry-target for nnmh backend.

2000-11-30  Simon Josefsson  <sj@extundo.com>

	* mm-decode.el (mm-security-from): New variable.
	(mm-possibly-verify-or-decrypt): Use it rather than `from'.

	* mml-smime.el (mml-smime-verify): Use `mm-security-from' rather
	than `from'.

2000-11-30  Simon Josefsson  <sj@extundo.com>

	* mml-smime.el (mml-smime-verify): Verify that certificate mail
	address match sender address.

	* mm-decode.el (mm-possibly-verify-or-decrypt): Bind sender address.

	* smime.el (smime-verify-region): Don't copy buffer.
	(smime-decrypt-buffer): Use expand-file-name on keyfile.
	(smime-pkcs7-region): New function.
	(smime-pkcs7-certificates-region): Ditto.
	(smime-pkcs7-email-region): Ditto.
	(smime-buffer-as-string-region): Ditto.

	* gnus-art.el (gnus-mime-security-show-details): Goto beginning of
	buffer.

2000-11-23  Jens Krinke <j.krinke@gmx.de>

	* smime.el (smime-decrypt-region): Fix keyfile argument.

2000-11-29 00:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnmail.el (nnmail-cache-accepted-message-ids): Add doc.

2000-11-28 17:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-shoot-gnksa-feet): New variable.
	(message-gnksa-enable-p): New function.
	(message-send): Use it.
	(message-check-news-body-syntax): Ditto.

2000-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-make-message-id): Remove the redundancy.

2000-11-22 17:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-setup): Discourage using mc-install-*-mode.

	* gnus-setup.el (gnus-use-mailcrypt): Don't hook mail-crypt.

2000-11-22 16:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-cite.el (gnus-cite-parse): Guess citation length.

2000-11-22 14:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-ml.el (gnus-mailing-list-insinuate): New function.

2000-11-22 13:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-ml.el (gnus-mailing-list-archive): Find the real url.

2000-11-22 11:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-xmas.el (gnus-xmas-article-display-xface): Use
	insert-buffer-substring.

	* message.el (message-send-mail): Use buffer-substring-no-properties.
	(message-send-news): Ditto.

2000-11-22  David Edmondson <dme@dme.org>

	* imap.el (imap-wait-for-tag): Message read info.

2000-11-21 20:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-encrypt): Ensure the part is encrypted.
	(mml2015-mailcrypt-encrypt): Use unibyte-buffer.
	(mml2015-gpg-encrypt): Ditto.

2000-11-21 09:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-verify-option): Default value.

	* mml-sec.el (mml-secure-part): Error message.

2000-11-20 18:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-ml.el (gnus-mailing-list-archive): Use browse-url.

2000-11-20 17:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-article-make-menu-bar): Use easy-menu-add.

2000-11-20 16:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-article-describe-key): Use prompt.
	(gnus-article-describe-key-briefly): Ditto.

2000-11-20 15:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-agent.el (gnus-agent-expire): Ignore corrupted history.

2000-11-20 10:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-article-describe-key): New function.
	(gnus-article-describe-key-briefly): New function.

2000-11-19 23:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-decrypt-option): Doc typo.

	* gnus-art.el (gnus-article-read-summary-keys): lookup-key may
	return a number.

2000-11-19 21:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-newline-and-reformat): Typo.

2000-11-19 12:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (article-verify-x-pgp-sig): Check whether
	original-article-buffer exists.

	* rfc2047.el (rfc2047-q-encoding-alist): Match Resent-.
	(rfc2047-header-encoding-alist): Addresses are different from text.
	(rfc2047-encode-message-header): Ditto.
	(rfc2047-dissect-region): Extra parameter.
	(rfc2047-encode-region): Ditto.
	(rfc2047-encode-string): Ditto.

2000-11-19 00:00:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-uu.el (mm-uu-pgp-encrypted-extract-1): New function.
	(mm-uu-pgp-encrypted-extract): Use it.
	(mm-uu-pgp-signed-extract-1): New function.
	(mm-uu-pgp-signed-extract): Use it.

	* gnus-art.el (gnus-mime-display-security): New function.
	(gnus-mime-display-part): Use it.
	(gnus-mime-security-verify-or-decrypt): New function.
	(gnus-mime-security-press-button): New function.
	(gnus-insert-mime-security-button): Use it.

	* mm-decode.el (mm-possibly-verify-or-decrypt): Use mm-h-m-c-p.
	(mm-find-raw-part-by-type): Ditto.
	(mm-verify-function-alist): Add x-gnus-pgp-signature handle.
	(mm-decrypt-function-alist): Add x-gnus-pgp-encrypted handle.
	(mm-destroy-parts): Kill nested multibyte buffer.

	* mml2015.el (mml2015-mailcrypt-verify): Use mm-h-m-c-p.
	(mml2015-gpg-verify): Ditto.

2000-11-18  Simon Josefsson  <sj@extundo.com>

	* mml2015.el (mml2015-mailcrypt-clear-verify): New function.
	(mml2015-function-alist): Use it.

	* mml-sec.el (mml-sign-alist): Update names.
	(mml-encrypt-alist): Ditto.
	(mml-secure-part-smime-sign): Moved to mml-smime.el
	as `mml-smime-sign-query'.
	(mml-secure-part-smime-encrypt-by-file): Moved to mml-smime.el as
	`mml-smime-get-file-cert'.
	(mml-secure-part-smime-encrypt-by-dns): Moved to mml-smime.el as
	`mml-smime-get-dns-cert'.
	(mml-secure-part-smime-encrypt): Moved to mml-smime.el as
	`mml-smime-encrypt-query'.
	(mml-smime-sign-buffer): Use mml-smime-sign.
	(mml-smime-encrypt-buffer): Use mml-smime-encrypt.

	* mml-smime.el (mml-smime-sign): New function.
	(mml-smime-encrypt): 
	(mml-smime-sign-query): 
	(mml-smime-get-file-cert): 
	(mml-smime-get-dns-cert): 
	(mml-smime-encrypt-query): Moved from mml-sec.el.

2000-11-16  Simon Josefsson  <sj@extundo.com>

	* mml2015.el (mml2015-gpg-clear-verify): New function.
	(mml2015-function-alist): Add it.

2000-11-17 14:21  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-setup-fill-variables): Use
	message-cite-prefix-regexp.
	(message-newline-and-reformat): Check the end of citation, leading
	WSP, break in the cite prefix.
	(message-fill-paragraph): New function.

2000-11-17 13:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* lpath.el: Shut up.

2000-11-17  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-msg.el (gnus-group-posting-charset-alist): No longer allow
	raw 8-bit in headers in dk.* newsgroups.

2000-11-17 08:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-newline-and-reformat): Match extra WSPs.

2000-11-16 23:31  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-generate-mime-1): Ignore ascii.

2000-11-16 Justin Sheehy <justin@iago.org>

	* gnus-sum.el (gnus-summary-make-menu-bar): Fix menu items.

2000-11-16 17:00  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-cite-prefix-regexp): Prefix should not end
	at space.

2000-11-15 18:09  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-mode-syntax-table): Add - as a word
	constituent as in articles.
	(message-setup-fill-variables): Add -_. as supercite-style prefix.
	* gnus-art.el (gnus-article-mode-syntax-table): Remove ?-.
	* gnus-cite.el (gnus-cite-parse): Match from the beginning of line.

2000-11-15 13:21  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-inews-do-gcc): Expire the article.

2000-11-12  David Edmondson  <dme@dme.org>

	* message.el (message-font-lock-keywords): use
	message-cite-prefix-regexp.

2000-11-15  Kai Gro,A_(Bjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* gnus-group.el (gnus-group-jump-to-group-prompt): New variable by
	Stein Arild Str,Ax(Bmme.
	(gnus-group-jump-to-group): Use it.

2000-11-14 10:32:42  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mailcap.el (mailcap-possible-viewers): Match the entire string.

2000-11-14 10:20:56  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-verify): replace-match is
	incompatible.
	(mml2015-mailcrypt-sign): Ditto.

2000-11-14 10:12:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-inews-do-gcc): Update summary data when the
	group is open.

2000-11-14 00:48:52  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-bcklg.el (gnus-backlog-enter-article): Don't enter
	nnvirtual articles.
	(gnus-backlog-request-article): Don't request nnvirtual articles.

2000-11-13 22:08:09  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-sign): Remove "-" escape.
	* mml.el (mml-generate-mime-1): Save cont. skip multipart attributes.

2000-11-13 20:43:37  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-get-part): Don't call mm-insert-part.
	* mml.el (mml-generate-mime-1): Use charset attribute.
	* mm-bodies.el (mm-encode-body): Add parameter charset.
	* mm-util.el (mm-mime-charset): Show error when find 8-bit characters.

2000-11-13 16:09:09  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-decrypt): Handle quit.
	(mml2015-mailcrypt-clear-decrypt): Ditto.
	(mml2015-mailcrypt-verify): Ditto.
	(mml2015-mailcrypt-clear-verify): Ditto.
	(mml2015-gpg-verify): Ditto.

2000-11-13 15:29:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* smime.el (smime-openssl-program): Test the existence of openssl.
	* mml-smime.el: Require mm-decode.
	(mml-smime-verify-test): New function.
	* mm-decode.el (mm-verify-function-alist): Use it.

2000-11-13 09:50:29  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-repair-multipart): Fix Mime-Version
	anyway.

2000-11-13  Simon Josefsson  <sj@extundo.com>

	* mm-uu.el (mm-uu-pgp-signed-extract): Explain why clear
	verification doesn't work.

2000-11-12 23:36:45  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-inews-mark-gcc-as-read): New variable.
	(gnus-inews-do-gcc): Use it.

2000-11-12 21:35:04  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-encode-string): Insert semi-colon and
	leading space.
	* mm-extern.el (mm-inline-external-body): Report error when no 
	access-type.

2000-11-12 19:48:30  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-select-newsgroup): Change the error message.

2000-11-12 11:53:18  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-button-menu): Use select-window.

2000-11-12 09:47:54  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-part): Display multipart/related
	as multipart/mixed.

2000-11-12  David Edmondson  <dme@dme.org>
	
	* message.el (message-cite-prefix-regexp): moved from gnus-cite.el
	and replace `.' with `\w' to allow for different syntax tables
	(from Vladimir Volovich).
	* message.el (message-newline-and-reformat): use
	`message-cite-prefix-regexp'.
	* gnus-cite.el (gnus-supercite-regexp): use
	`message-cite-prefix-regexp'.
	* gnus-cite.el (gnus-cite-parse): use
	`message-cite-prefix-regexp'.

2000-11-12 08:52:46  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-verify): Replace armors with
	PGP SIGNATURE.  Escape leading "-"'s.
	(mml2015-mailcrypt-sign): Replace armors with PGP MESSAGE.

2000-11-11 15:55:35  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-uu.el (mm-uu-type-alist): Stricter shar regexp.

2000-11-11  Simon Josefsson  <sj@extundo.com>

	* mml2015.el (mml2015-gpg-verify): Set "OK" security status.

	* smime.el (smime-details-buffer): New variable.
	(smime-sign-region): 
	(smime-encrypt-region): 
	(smime-verify-region): 
	(smime-decrypt-region): Copy OpenSSL output to the buffer.

	* mml-smime.el (mml-smime-verify): Support security info.

2000-11-10 17:11:22  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-verify-option): Set default to nil.
	(mm-decrypt-option): Ditto.
	* gnus-art.el (article-verify-x-pgp-sig): New function.

2000-11-10 09:01:25  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-alternative): Show button if no
	preferred part.

2000-11-07  Kai Gro,A_(Bjohann  <Kai.Grossjohann@CS.Uni-Dortmund.DE>

	* gnus-sum.el (gnus-move-split-methods): Say that
	`gnus-split-methods' uses file names, whereas this uses group
	names.  (Report from Nevin Kapur)

2000-11-10 01:23:20  ShengHuo ZHU  <zsh@cs.rochester.edu>
  
	* mm-partial.el (mm-inline-partial): Insert MIME-Version.

2000-11-09 17:02:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnheader.el (nnheader-directory-files-is-safe): New variable.
	(nnheader-directory-articles): Use it.
	(nnheader-article-to-file-alist): Ditto.

2000-11-09 16:20:37  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2047.el (rfc2047-pad-base64): New function.
	(rfc2047-decode): Use it.

2000-11-09 08:53:04  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-srvr.el (gnus-browse-foreign-server): Bind the original
	select method.

2000-11-08 19:58:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-gpg-decrypt-1): 
	(mml2015-gpg-verify): buffer-string has no argument in Emacs.

2000-11-08 16:37:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-cache.el (gnus-cache-generate-nov-databases): Reopen cache.

2000-11-08 08:38:30  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* pop3.el (pop3-munge-message-separator): A message may have an
	empty body.
  
2000-11-07 18:02:26  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-uu.el (mm-uu-type-alist): Don't test pgp stuff.
	(mm-uu-pgp-encrypted-extract): Clean mml2015 buffer.
	(mm-uu-pgp-signed-extract): Use coding-system.

2000-11-07 14:33:19  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-part): Show MIME security button.
	(gnus-insert-mime-security-button): New function.
	* mm-decode.el (mm-possibly-verify-or-decrypt): Add security info.
	* mml2015.el:  Add security info when verify or decrypt.
	* mm-uu.el (mm-uu-pgp-signed-extract): Use multipart.
	(mm-uu-pgp-encrypted-extract): Ditto.

2000-11-07 08:49:36  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-display-parts): New function.
	* gnus-art.el (gnus-mime-view-all-parts): Use it. Remove parts first.

2000-02-02 Alexandre Oliva <oliva@lsd.ic.unicamp.br>

	* gnus-mlspl.el: Documentation tweaks.
	
2000-11-06 22:06:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-possibly-verify-or-decrypt): Fix.  
	* gnus-art.el (gnus-article-encrypt-body): Rename and support prefix
	argument.

2000-11-06 19:10:14  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-encode-string): Use us-ascii if charset is nil.

2000-11-06 18:17:53  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-article-encrypt): New function.
	(gnus-article-encrypt-protocol-alist): New variable.
	(gnus-article-encrypt-protocol): New variable.
	* mml2015.el (mml2015-self-encrypt): New function.
	(mml2015-mailcrypt-encrypt): Set mc-pgp-always-sign.

2000-11-06 16:02:52  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-uu.el (mm-uu-gpg-key-skip-to-last): New function.
	(mm-uu-pgp-key-extract): Use application/pgp-keys, don't snarf,
	let mailcap do it.
	* mml2015.el: Remove snarf code.
	* mm-decode.el: Remove snarf code.

2000-11-06 14:03:10  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-insert-mml-markup): Ignore internal stuff.
	(mml-insert-mime): Understand gnus-decoded.
	(mime-to-mml): New parameter handles.
	* gnus-art.el (gnus-mime-save-part-and-strip): Use it.
	* gnus-sum.el (gnus-summary-edit-article): Add argument `3'.

2000-11-06 13:51:37  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mime-security): New group.
	(mm-verify-function-alist): Add test function.
	(mm-decrypt-function-alist): Ditto.
	(mm-snarf-option): Set default value as nil.
	(mm-find-part-by-type): Recursive parameter.
	(mm-possibly-verify-or-decrypt): Support draft-ietf-openpgp-multsig.
	* mml2015.el: Support draft-ietf-openpgp-multsig.

2000-11-06 13:01:27  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-view-part-as-charset): New function.
	(gnus-article-view-part-as-charset): New function.

2000-11-05 22:34:07  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-verify-option): Default value.
	(mm-possibly-verify-or-decrypt): Dealing with broken messages.

2000-11-05 15:06:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnvirtual.el (nnvirtual-request-expire-articles): Uncompress range.

2000-11-05  Simon Josefsson  <sj@extundo.com>

	* mml-smime.el (mml-smime-verify): Work in original multipart
	buffert.

	* mm-decode.el (mm-handle-multipart-original-buffer): New macro.
	(mm-handle-multipart-ctl-parameter): Ditto.
	(mm-alist-to-plist): New function.
	(mm-dissect-buffer): Store CTL parameters and copy original buffer
	for multiparts.
	(mm-destroy-parts): Destroy multipart buffert.
	(mm-remove-part): Ditto.

	* mml-smime.el (mml-smime-sign): Not used.
	(mml-smime-encrypt): Ditto.

	* mm-decode.el (mml-smime-verify): Autoload mml-smime.

	Verify S/MIME signature support.
	
	* mm-decode.el (mm-inline-media-tests): Add
	application/{x-,}pkcs7-signature.
	(mm-inlined-types): Ditto.
	(mm-automatic-display): Ditto.
	(mm-verify-function-alist): Ditto.  Add name of method.
	(mm-decrypt-function-alist): Add name of method.
	(mm-find-part-by-type): Add documentation.
	(mm-possibly-verify-or-decrypt): Use new format of
	mm-{verify,decrypt}-function-alist.  Use method names.

	* mml-smime.el (mml-smime-verify): New function.

2000-11-04 20:38:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-view.el (mm-inline-text): Move point to the end of inserted text.

2000-11-04 19:07:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-function-alist): Clear verify and decrypt.
	* mm-uu.el: Reorganized.  Add gnatsweb, pgp-signed, pgp-encrypted.
	* mm-decode.el (mm-snarf-option): New.

2000-11-04 13:08:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-util.el (mm-subst-char-in-string): New function.
	(mm-replace-chars-in-string): Use it.
	* message.el (message-replace-chars-in-string): Use it.
	* nnheader.el (nnheader-replace-chars-in-string): Use it.
	* gnus-mh.el (mh-lib-progs): Shut up.

2000-11-04  ShengHuo Zhu  <zsh@cs.rochester.edu>

	* base64.el, md5.el: Moved to contrib directory.

2000-11-04 11:13:56  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-search-article-forward): Don't move
	the last article when search.

2000-11-04 10:34:29  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnheader.el (nnheader-pathname-coding-system): Default iso-8859-1.
	* nnmail.el (nnmail-pathname-coding-system): Ditto.

2000-09-29  David Edmondson  <dme@thus.net>

	* message.el (message-newline-and-reformat): Typo.

2000-11-04 10:11:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-decode-encoded-string): Test mm-multibyte-p.

2000-11-04 09:53:42  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nntp.el (nntp-decode-text): Delete bogus status lines.

2000-11-03  Stefan Monnier  <monnier@cs.yale.edu>

	* message.el (message-font-lock-keywords): Match a final newline
	to help font-lock's multiline support.
	
2000-11-04 09:11:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnoo.el (nnoo-set): New function.

2000-11-04  ShengHuo Zhu  <zsh@cs.rochester.edu>

	* gpg.el, gpg-ring.el: Moved to contrib directory.

2000-11-04  Simon Josefsson  <sj@extundo.com>

	* nnimap.el (nnimap-split-inbox): Typo.

2000-11-03 10:46:44  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-msg.el (gnus-msg-mail): Move it backwards.

2000-11-03  Simon Josefsson  <sj@extundo.com>

	* rfc2231.el (rfc2231-parse-qp-string): New function.
	(require): rfc2047.

	* mail-parse.el (mail-header-parse-content-type):
	(mail-header-parse-content-disposition): Support invalid QP
	encoded strings, by using `rfc2231-parse-qp-string'.

2000-11-03 08:58:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2231.el (rfc2231-parse-string): Decode when there is no number.
	(rfc2231-decode-encoded-string): Typo "> X 1".
	(rfc2231-encode-string): Insert the name of charset.
	* mail-parse.el (mail-header-encode-parameter): Use RFC2231.

2000-11-02 23:35:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-save-part): Return the filename.
	* gnus-sum.el (gnus-summary-edit-article): Remove a hack.
	* gnus-art.el (gnus-mime-save-part-and-strip): New function.
	(gnus-mime-action-alist): Use it.
	(gnus-mime-button-commands): USe it.
	* mm-extern.el (mm-extern-local-file): Error when the file is gone.
	(mm-inline-external-body): unwind-protect.

2000-11-02 21:08:49  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-insert-mime-button): Show url.

2000-11-02 19:51:19  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-generate-mime-1): Support external url.
	* nnwarchive.el (nnwarchive-mail-archive-article): Use external url.

2000-11-02 16:53:32  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-partial.el (mm-inline-partial): Buffer name with a leading space.
	* mm-decode.el (mm-display-external): Ditto.
	* mm-extern.el: New file.
	* mm-decode.el (mm-inline-media-tests): Hook it up.
	(mm-inlined-types): Inline message/external-body.

2000-11-02  Simon Josefsson  <sj@extundo.com>

	* gnus-art.el (gnus-visible-headers): Add Mail-Followup-To.

	* message.el (message-get-reply-headers): Better handling when
	Mail-Followup-To is very large.
	
2000-11-02 13:27:56  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-uu.el (gnus-uu-post-news): Comment out the redundancy.  
	* gnus-art.el (gnus-article-edit-done): 
	* gnus-sum.el (gnus-summary-edit-article-done): Move line 
	counting code here.
	* gnus-msg.el (gnus-setup-message): Remove a hack.

2000-11-02 09:33:01  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-newsgroup-variables): New variable.
	(gnus-summary-mode): Make them local variables. 
	(gnus-set-global-variables): Globalize them.
	(gnus-summary-exit): Kill them.

2000-11-02  Hrvoje Niksic  <hniksic@arsdigita.com>

	* rfc2047.el (rfc2047-encoded-word-regexp): Allow empty encoded
	word.

2000-11-01 10:07:13  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-part): Add to signed or encrypted.
	gnus-article-wash-types.
	* gnus-art.el (gnus-article-wash-status): Use them.

2000-11-01 08:54:11  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-read-tag): Remove spaces and LF.

2000-11-01 08:01:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-encrypt): Use from and sign parameters.
	* mml.el (mml-generate-mime-1): Add sender and recipients attributes.

2000-11-01 07:39:24  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-force-verify-and-decrypt): New function.

2000-10-31 22:06:13  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-article-charset): New variable.
	(gnus-summary-display-article): Set it.
	* gnus-msg.el (gnus-copy-article-buffer): Use it.
	* gnus-art.el (gnus-article-mode): Make it local variable.

2000-11-01 01:12:29  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnultimate.el (nnultimate-create-mapping): Use nreverse. 

2000-10-31 23:45:31  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnwfm.el: New file.

	* nnweb.el (nnweb-replace-in-string): New function.

2000-10-31 17:32:02  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Wrap gpg.el.
	* gpg.el (gpg-verify): The last argument of apply is a list.
	(gpg-encrypt): Add passphrase as a parameter.

2000-10-31 17:28:45  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gpg.el: New file.
	* gpg-ring.el: New file.

2000-10-31 11:44:29  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-sum.el (gnus-summary-show-article): Fix the summary line.

2000-10-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-insert-line): Work with quoted
	double-quote characters.
	(gnus-summary-prepare-threads): Ditto.

2000-10-31 08:36:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-art.el (gnus-mime-display-single): Forward line -1.
	* mml.el (mml-read-tag): Don't skip the leading space.
	* lpath.el (font-lock-set-defaults): Shut up.

2000-10-31 00:04:35  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Fix doc. Remove bogus mml2015-setup.

2000-10-30 23:37:07  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* qp.el (quoted-printable-encode-region): Replace leading - when
	ultra safe.
	* mml.el (mml-generate-mime-postprocess-function): Removed.
	(mml-postprocess-alist): Removed.
	(mml-generate-mime-1): Use ultra-safe when sign.
	* mml2015.el (mml2015-fix-micalg): Uppercase.
	(mml2015-verify): Insert LF.
	(mml2015-mailcrypt-sign): Downcase; search backward.

2000-10-16 11:36:52  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnultimate.el (nnultimate-forum-table-p): Be a bit more
	restrictive. 
	(nnultimate-table-regexp): New variable.
	(nnultimate-forum-table-p): Use it.

2000-10-30  Ed L Cashin <ecashin@coe.uga.edu>

	* gnus-sum.el (gnus-summary-expire-articles): Save point.

2000-10-30 08:52:50  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml-sec.el (mml-pgpmime-sign-buffer): Use mml2015-sign.
	(mml-pgpmime-encrypt-buffer): Use mml2015-encrypt.

2000-10-30 08:38:12  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: Shut up.

2000-10-30 08:17:46  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus.el (gnus-server-browse-hashtb): Removed.
	* gnus-group.el (gnus-group-prepare-flat-list-dead): Use gnus-active.
	(gnus-group-insert-group-line-info): Use simplified method.
	* gnus-srvr.el (gnus-browse-foreign-server): Use gnus-set-active.

2000-10-30 01:52:40  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-util.el (gnus-union): Renamed from gnus-agent-union, and
	moved here.
	* gnus-agent.el (gnus-agent-fetch-headers): Use it.
	* gnus-group.el (gnus-group-prepare-flat): Use it.
	* gnus-topic.el (gnus-group-prepare-topics): Use it.

2000-10-30 01:23:49  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-mode): Show menu in XEmacs.

2000-10-30 00:49:33  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-srvr.el (gnus-server-browse-in-group-buffer): New variable.
	(gnus-server-read-server-in-server-buffer): New function.
	(gnus-browse-foreign-server): Browse in group buffer.
	* gnus-group.el (gnus-group-prepare-flat): List group not in list.
	(gnus-group-prepare-flat-list-dead): Use gnus-group-insert-group-line.
	* gnus-topic.el (gnus-group-prepare-topics): Ditto.
	* gnus.el (gnus-server-browse-hashtb): New variable.

2000-10-29 22:31:40  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el (nnfolder-open-nov): Use group.

2000-10-29 17:23:15  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el: Add NOV. Set version to 2.0.
	(nnfolder-nov-is-evil): If non-nil, nnfolder acts like 1.0.

2000-10-29 10:35:08  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el (mml2015-mailcrypt-sign): Use mc-sign-generic.

2000-10-29 09:42:05  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-srvr.el (gnus-browse-foreign-server): Show level mark.
	(gnus-browse-unsubscribe-group): Unsubscribed is not killed.

2000-10-29 08:28:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* nnfolder.el (nnfolder-read-folder): Don't goto point-min.

2000-10-28 19:11:01  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-verify-function-alist): New variable.
	(mm-verify-option): New variable.
	(mm-decrypt-function-alist): Ditto.
	(mm-decrypt-option): Ditto.
	(mm-find-raw-part-by-type): New function.
	(mm-possibly-verify-or-decrypt): New function.
	(mm-dissect-multipart): Use it.
	* mml2015.el (mml2015-fix-micalg): New function.
	(mml2015-decrypt): Use new interface.
	(mml2015-verify):  Use new interface.
	(mml2015-setup): Make it bogus.

2000-10-28 16:54:45  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml.el (mml-generate-mime-postprocess-function): Set to
	mml-postprocess.
	(autoload): Autoload mml2015 and mml-smime.
	(mml-postprocess-alist): Use mml2015-sign and mml2015-encrypt.
	* mml2015.el (mml2015-encrypt): New function.
	(mml2015-sign): New function.
	(mml2015-encrypt-function): New variable.
	(mml2015-sign-function): New variable.
	(mml2015-mailcrypt-encrypt): Use message-recipients.
	(mml2015-setup): Don't set mml-generate-mime-postprocess-function.
	* mml-smime.el (mml-smime-setup): Ditto.

2000-10-28  Simon Josefsson  <sj@extundo.com>

	* imap.el (imap-parse-resp-text-code): Workaround bug in Stalker
	Communigate Pro 3.3.1 server.

	* mml-sec.el (mml-smime-encrypt-buffer): Support certfiles stored
	in buffers.
	(mml-secure-dns-server): Removed.
	(mml-secure-part-smime-encrypt-by-dns): Use DIG interface.  Don't
	write certificates to files.

	* smime.el (smime-dns-server): New variable.
	(smime-mail-to-domain):
	(smime-cert-by-dns): New functions.

	* dig.el: New file.

2000-10-28 10:09:41  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* message.el (message-options): New variable.
	(message-options-set-recipient): New function.
	(message-send): Use them.
	* gnus-int.el (gnus-request-replace-article): Use them.
	(gnus-request-accept-article): Ditto.
	* mml.el (mml-preview): Use them.
	* gnus-sum.el (gnus-summary-edit-article): Use them.
	
	* message.el (message-options-get): New function.
	(message-options-get): New function.
	* rfc2047.el (rfc2047-encode-message-header): Use them.
	* mm-bodies.el (mm-encode-body): Use them.

2000-10-28  Simon Josefsson  <sj@extundo.com>

	* nnimap.el (nnimap-retrieve-which-headers): 
	(nnimap-request-article-part): Quote message-id.

	* smime.el (smime-CA-directory): Rename from `smime-CAs'.
	(smime-CA-file): New variable.
	(smime-call-openssl-region): Don't error.
	(smime-sign-region): Return result value.
	(smime-encrypt-region): Ditto.
	(smime-verify-region): New function.
	(smime-decrypt-region): Ditto.
	(smime-verify-buffer): Ditto.
	(smime-decrypt-buffer): Ditto.

	* mml.el: Require mml-sec.
	(mml-generate-mime-1): Support "sign" and "encrypt" MML tags.
	(mml-mode-map): Add "sign" and "encrypt" maps.
	(mml-menu): Add security menu.
	(mml-preview): Use generate-new-buffer.

	* mml-sec.el: New file.

2000-10-28 03:43:03  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mm-decode.el (mm-find-part-by-type): Move it here.
	* mml.el (mml-postprocess): Move it here.
	(mml-postprocess-alist): Move it here. Merge them.

2000-10-28 03:38:39  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* rfc2047.el (rfc2047-encode-message-header): Make sure no
	unencoded stuff in the header.

2000-10-28 02:40:46  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* gnus-group.el (gnus-group-listed-groups): New variable.
	(gnus-group-list-option): New variable.
	(gnus-group-list-limit-map): New keymap.
	(gnus-group-list-flush-map): New keymap.
	(gnus-group-list-plus-map): New keymap.
	(gnus-group-prepare-logic): New function.
	(gnus-group-prepare-flat): Merge with
	gnus-group-prepare-flat-predicate. Use gnus-group-listed-groups.
	(gnus-group-prepare-flat-list-dead): Ditto.
	(gnus-group-list-matching): Use gnus-group-prepare-function.
	(gnus-group-list-dormant): Ditto.
	(gnus-group-list-cached): Ditto.
	(gnus-group-listed-groups): New function.
	(gnus-group-list-limit): New function.
	(gnus-group-list-flush): New function.
	(gnus-group-list-plus): New function.
	* gnus-topic.el (gnus-group-prepare-topics): Accept predicate.
	(gnus-topic-prepare-topic): Ditto.

2000-10-27  Paul Jarc <prj@po.cwru.edu>

	* message.el (message-insert-to, message-get-reply-headers):
	(message-reply, message-followup): Mail-{Followup,Reply}-To.

2000-10-27 19:45:58  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* mml2015.el: New file.
	* smime.el: New file.
	* mml-smime.el: New file.

2000-10-27 19:42:12  ShengHuo ZHU  <zsh@cs.rochester.edu>

	* ChangeLog: Moved to ChangeLog.1.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:
