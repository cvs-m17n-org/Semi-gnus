2006-04-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el: No Gnus v0.4 is released.

2006-04-11  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnslashdot.el (nnslashdot-retrieve-headers-1): Fix up to new
	layout.

	* rfc2047.el (rfc2047-decode-encoded-words): Don't message about
	unknown charset.

	* message.el (message-header-synonyms): Add Original-To to the
	default.

	* gnus-sum.el (gnus-get-newsgroup-headers-xover): group is an
	optional parameter.

2006-04-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-fun.el (gnus): Require it for gnus-directory.

2006-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-fun.el (gnus-face-properties-alist): Add :version.

2006-04-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-filter): Fix.

2006-04-05  Simon Josefsson  <jas@extundo.com>

	* password.el (password-reset): New function.

2006-04-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region, pgg-gpg-sign-region): Wait
	for BEGIN_SIGNING too, new in GnuPG 1.4.3.

2006-04-04  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-create-mapping): Update regexp.  Some
	whitespace was matched into the url, which broke browsing hits
	> 100 when mm-url-use-external was nil.

2006-04-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Check
	gnus-extra-headers for 'Newsgroups.

	* message.el (message-tool-bar-gnome): Check if `flyspell-mode' is
	bound.

2006-04-04  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Clean up process buffers every time gpg processes
	complete.

2006-04-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-fun.el (gnus-convert-image-to-face-command): Fix typo in
	doc string.

2006-04-03  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-filter)
	(pgg-gpg-wait-for-completion): Check if buffer is alive.

	* pgg-gpg.el (pgg-gpg-process-sentinel): Don't remove GNUPG:
	lines, temporary fix.

2006-03-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-update-tool-bar): Add :initialize and
	:set.

2006-03-29  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-start-process): Don't bind
	default-enable-multibyte-characters.  This reverts the change from
	revision 6.17 which is no longer necessary because the passphrase
	is sent separately now.  GnuPG messages are unreadable under
	multibyte locales with default-enable-multibyte-characters set to
	nil.

2006-03-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-gnome): Move "spell".

2006-03-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Don't use
	XEmacs-only `replace-in-string'.  Use `gnus-group-real-name'
	instead.

2006-03-27  Karl Kleinpaste  <karl@charcoal.com>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Improve
	newsgroups handling for NNTP overviews which don't include
	Newsgroups.

2006-03-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* message.el (message-resend): Bind message-generate-hashcash to
	to nil.

2006-03-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* hashcash.el (hashcash-already-paid-p): Bind case-fold-search
	when searching for already-paid recipients.

2006-03-27  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Invoke gpg asynchronous, to avoid querying for
	passphrases when it is not needed.
	(pgg-gpg-use-agent): Add, to hard code that pgg shouldn't wait for
	passphrase stuff from gpg, should only be necessary when you use
	gpg with a smartcard.

2006-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-insert-mime): Ignore cached contents of
	message/external-body part.

	* mm-decode.el (mm-get-part): Add optional 'no-cache' argument.
	(mm-insert-part): Ditto.

2006-03-23  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-update-agent): Add again, with fixes from
	Reiner.
	(pgg-gpg-use-agent-p): Use it again.

2006-03-23  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-update-agent): Remove, doesn't work with
	older emacsen.
	(pgg-gpg-use-agent-p): Don't use it.

2006-03-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* pgg-gpg.el (pgg-gpg-update-agent): Only use make-network-process
	if we can.

2006-03-22  Sascha Wilde  <wilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-use-agent): Disable by default.
	(pgg-gpg-update-agent): New function.
	(pgg-gpg-use-agent-p): New function.
	(pgg-gpg-process-region, pgg-gpg-encrypt-region)
	(pgg-gpg-encrypt-symmetric-region, pgg-gpg-decrypt-region)
	(pgg-gpg-sign-region): Use it.

2006-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-map-articles): Don't funcall symbol macro.
	Reported by Ralf Wachinger <rwachinger@gmx.de>.

2006-03-21  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el: Ideas below based on patch from Sascha Wilde
	<wilde@sha-bang.de>.
	(pgg-gpg-use-agent): New variable.
	(pgg-gpg-process-region): Use it.
	(pgg-gpg-encrypt-region): Likewise.
	(pgg-gpg-encrypt-symmetric-region): Likewise.
	(pgg-gpg-decrypt-region): Likewise.
	(pgg-gpg-sign-region): Likewise.
	(pgg-gpg-possibly-cache-passphrase): Don't cache a nil password.

2006-03-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-queue-mail): Fix custom tag for `t'.

	* spam.el (spam-mark-new-messages-in-spam-group-as-spam): Add
	comment on version.

2006-03-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* smiley.el: Add missing test smiley.

2006-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-with-part): New macro.
	(mm-get-part): Use it; work with message/external-body as well.
	(mm-save-part): Treat name and filename equally.

	* mm-extern.el (mm-extern-cache-contents): New function.
	(mm-inline-external-body): Use it; force the part to be displayed;
	move undisplayer added to the cached handle to the parent.

	* gnus-art.el (gnus-mime-save-part-and-strip): Add name parameter.
	(gnus-mime-view-part-as-type): Work with message/external-body.

	* gnus-util.el (gnus-tool-bar-update): Bind tool-bar-mode.

2006-03-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Prefer user's
	images in image-load-path.  [Sync with image.el, revision 1.60, in
	Emacs.]

2006-03-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Pass value of
	path rather than symbol.  Always return list of directories.
	Guarantee that image directory comes first.  [Sync with image.el,
	revision 1.59, in Emacs.]

	* message.el (message-make-tool-bar): Adjust to new API of
	`gmm-image-load-path-for-library'.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* gnus-group.el (gnus-group-make-tool-bar): Ditto.

2006-03-15  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-art.el (gnus-article-only-boring-p): Bind
	inhibit-point-motion-hooks to avoid infinite loop when entering
	intangible text.  Reported by Ralf Wachinger
	<rwnewsmampfer@geekmail.de>.

2006-03-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Fix typo.  Use
	`defun' instead of `gmm-defun-compat'.

2006-03-14  Simon Josefsson  <jas@extundo.com>

	* message.el (message-unique-id): Don't use message-number-base36
	if (user-uid) is a float.  Reported by Bjorn Solberg
	<bjorn_ding1@hekneby.org>.

2006-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect): Dissect all parts correctly.

	* gnus-art.el (gnus-mime-display-single): Make sure there is an
	empty line between a part and a message part.

2006-03-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* smiley.el: Add more test smileys.
	(smiley-data-directory, smiley-regexp-alist)
	(gnus-smiley-file-types): Fix doc strings.
	(smiley-update-cache): Clear smiley-cached-regexp-alist before
	adding new elements.
	(smiley-mouse-map): Unused code.  Make it a comment.

2006-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-nocem.el (gnus-nocem-scan-groups): Add autoload cookie;
	scan latest NoCeM messages instead of old ones.
	(gnus-nocem-check-article): Fix regexps so as to match to PGP
	delimiters that are recently used.
	(gnus-nocem-load-cache): Add autoload cookie.

	* gnus.el (gnus-use-nocem): Enable it to be set to also a number.

	* gnus-start.el (gnus-setup-news): Scan NoCeM messages if a group
	level which is larger than gnus-use-nocem is specified.

	* gnus-group.el (gnus-group-get-new-news): Ditto.

2006-03-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-tool-bar-update): New function.

	* gnus-group.el (gnus-group-update-tool-bar): New variable.
	(gnus-group-insert-group-line): Add gnus-tool-bar-update.

	* gnus-topic.el (gnus-topic-prepare-topic): Add gnus-tool-bar-update.

	* gnus-group.el (gnus-group-redraw-when-idle)
	(gnus-group-redraw-check): Remove.
	(gnus-group-make-tool-bar): Remove gnus-group-redraw-check.

2006-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-split-it): Invert match-partial-words behavior
	if optional last element is specified in splits (FIELD VALUE...).

2006-03-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-make-tool-bar): Rename gmm-image-load-path
	to gmm-image-load-path-for-library.  Call with no-error argument.
	(message-tool-bar-gnome): Rename "mail/attach" to "attach".

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* gnus-group.el (gnus-group-make-tool-bar): Ditto.

	* gmm-utils.el (gmm-image-load-path): Remove alias.

2006-03-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path): Add alias.

	* nnml.el (nnml-generate-nov-databases-directory): Rename from
	nnml-generate-nov-databases-1.
	(nnml-generate-nov-databases): Use it.
	(nnml-generate-nov-databases-directory): Document no-active
	argument.

	* gmm-utils.el (gmm-image-load-path-for-library): Return single
	directory if path is t.  Add no-error.

	* gnus-group.el (gnus-group-make-tool-bar): Use add-hook.
	Suggested by Stefan Monnier <monnier@iro.umontreal.ca>.

	* gnus-art.el (gnus-article-browse-delete-temp-files): Simplify
	resetting gnus-article-browse-html-temp-list.

	* gmm-utils.el (gmm-image-load-path-for-library): Sync with
	mh-compat.el revision 1.9 in Emacs.  Rename `gmm-image-load-path'.
	Add example to docstring.  Rename local variables.  Move error
	checks to default case in cond and simplify.

2006-03-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-w3m-cid-retrieve-1): Check carefully whether
	handle is multipart when calling it recursively.
	(mm-w3m-cid-retrieve): Display warning if retrieving fails.

2006-03-03  Daniel Pittman <daniel@rimspace.net>

	* nnimap.el (nnimap-request-update-info-internal): Optimize.
	Don't `gnus-uncompress-range' to avoid excessive memory usage.

2006-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-tool-bar-gnome): Check if gnus-topic.el
	is loaded.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Check if spam.el is
	loaded.

2006-03-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-with-unibyte-current-buffer): Change "Emacs 23"
	to "Emacs 23 (unicode)" in doc string.

	* gnus-sum.el (gnus-summary-set-display-table): Change "Emacs 23" to
	"Emacs 23 (unicode)" in comment.

2006-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-get-part): Don't use
	mm-with-unibyte-current-buffer.

	* gnus-sum.el (gnus-summary-set-display-table): Don't nix out
	characters 160 through 255 in Emacs 23.

2006-03-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-browse-html-temp-list): Rename from
	gnus-article-browse-html-temp.
	(gnus-article-browse-delete-temp): Make it customizable.  Add
	`file'.  Adjust doc string.
	(gnus-article-browse-delete-temp-files): Add argument.  Allow
	query for each file.  Adjust doc string.
	(gnus-article-browse-html-parts): Add
	`gnus-article-browse-delete-temp-files' to
	`gnus-summary-prepare-exit-hook' and `gnus-exit-gnus-hook'.

2006-03-02  Hynek Schlawack  <hynek@ularx.de>

	* gnus-art.el (gnus-article-browse-html-temp)
	(gnus-article-browse-delete-temp): New variables.
	(gnus-article-browse-delete-temp-files): New function.
	(gnus-article-browse-html-parts): Use it.

2006-03-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-redraw-check): Remove redundant tests.

	* gmm-utils.el (gmm-image-load-path): Mention ../etc search in doc
	string.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Don't use
	gnus-summary-insert-new-articles when unplugged.  Remove
	gnus-summary-search-article-forward.

	* gmm-utils.el (gmm-tool-bar-style): Test tool-bar-mode and
	display-visual-class instead of display-color-cells.

2006-03-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload customize-group for XEmacs.

	* mml.el (mml-generate-mime-1): Encode parts other than text/* or
	message/* containing non-ASCII text properly.

2006-03-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Require gmm-utils, remove autoloads.
	(message-tool-bar): Set default based on
	gmm-tool-bar-style.
	(message-tool-bar-gnome): Add gmm-customize-mode.

	* gnus-sum.el (gnus-summary-tool-bar): Set default based on
	gmm-tool-bar-style.
	(gnus-summary-tool-bar-gnome): Add gmm-customize-mode.

	* gnus-group.el (gnus-group-tool-bar): Set default based on
	gmm-tool-bar-style.
	(gnus-group-tool-bar-gnome): Add gmm-customize-mode.

	* gmm-utils.el (gmm-image-directory): Rename variable from
	gmm-image-load-path.
	(gmm-image-load-path): Use gmm-image-directory.
	(gmm-customize-mode): New function.
	(gmm-tool-bar-style): New variable.

	* gnus-group.el (gnus-group-redraw-when-idle): Rename from
	gnus-group-redraw-line-number.
	(gnus-group-redraw-check): Simplify.
	(gnus-group-tool-bar-update): Remove redraw check.
	(gnus-group-make-tool-bar): Add redraw check.

2006-03-01  Michael Piotrowski  <mxp@dynalabs.de>  (tiny change)

	* gnus-art.el (gnus-button): Add missing parentheses.

2006-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind line-number-at-pos.

2006-02-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-with-unibyte-current-buffer): Add note.

2006-02-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button): New face.
	(gnus-article-button-face): Use it.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Add
	gnus-summary-next-page.  Re-order.

	* gnus-group.el (gnus-group-tool-bar-gnome): prev-node and
	next-node are now included.
	(gnus-group-redraw-line-number): New internal variable.
	(gnus-group-redraw-check): Helper function for updating the tool
	bar.
	(gnus-group-tool-bar-update): Add gnus-group-redraw-check.

	* gmm-utils.el (gmm-tool-bar-item): Add TODO about modifiers.

	* spam.el (spam-spamassassin-score-regexp): New internal variable.
	(spam-extra-header-to-number, spam-check-spamassassin-headers):
	Use it to match format of Spamassassin 3.0 and later.  Reported by
	IRIE Tetsuya <irie@t.email.ne.jp>.
	(spam-check-bogofilter)
	(spam-bogofilter-register-with-bogofilter): Fix args of
	`gnus-error' calls.

2006-02-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-draft.el (gnus-draft-send): Bind message-signature to avoid
	unnecessary interaction when sending queued mails.  Reported by
	TAKAHASHI Yoshio <tkh@jp.fujitsu.com>.

2006-02-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-sequence-of-unread-articles): Return nil if
	first or last are nil.

2006-02-24  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-gmane-create-mapping): Don't choke on ^M.

2006-02-24  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-int.el (gnus-open-server): Respect gnus-batch-mode.

2006-02-24  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Protect more against buggy tcp output.

2006-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnweb.el (nnweb-type-definition, nnweb-gmane-search): Use new
	nov.php.

2006-02-24  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-type-definition, nnweb-gmane-create-mapping)
	(nnweb-gmane-wash-article, nnweb-gmane-search): Fix Gmane web
	groups.  Kudos to Olly Betts <olly@survex.com> for providing NOV
	output on the server side.
	(nnweb-google-create-mapping): Update regexps and add some
	progress indication.

2006-02-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-tool-bar-gnome): Fix
	gnus-agent-toggle-plugged.  Re-order icons.
	(gnus-group-tool-bar-gnome): Add
	gnus-group-{prev,next}-unread-group.
	(gnus-group-tool-bar-gnome): Re-order icons.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Move
	gnus-summary-insert-new-articles.

	* message.el (message-tool-bar-gnome, message-tool-bar-retro): Fix
	comments.

	* utf7.el (utf7-utf-16-coding-system): Fix comment.  utf-16-be is
	also available in Emacs 21.3.

	* message.el (message-fix-before-sending): Change "Emacs 22" to
	"Emacs 23 (unicode)" in comment.

	* qp.el (quoted-printable-encode-region): Change "Emacs 22" to
	"Emacs 23 (unicode)" in comment.

	* mm-util.el: Change "Emacs 22" to "Emacs 23 (unicode)" in
	comment.
	(mm-coding-system-p): Add comment about no-MULE XEmacs.

	* mm-view.el (mm-fill-flowed): Add :version.

2006-02-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-image-load-path): Don't modify image-load-path
	and load-path.

2006-02-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Autoload gmm-image-load-path.
	(message-tool-bar-retro): Prepend "gnus/" subdirectory to some
	icon file names.  Use old Emacs 21 "mail_send.xpm" icon for
	consitency.

	* gmm-utils.el (gmm-image-load-path): Also search in
	"../etc/images".  Don't set gmm-image-load-path if we don't find
	the image.

2006-02-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-image-load-path): Don't make
	`gmm-image-load-path' include subdirectories which the second arg
	`image' might specify.

	* gnus-group.el (gnus-group-tool-bar-retro): Prepend the "gnus/"
	subdirectory to icon file names.

	* gnus-sum.el (gnus-summary-tool-bar-retro): Ditto.

2006-02-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-tool-bar): Add IMAGE argument to
	gmm-image-load-path calls.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* message.el (message-make-tool-bar): Ditto.

	* mml.el (mml-preview): Added comment concerning tool bar icons.

	* gnus-group.el (gnus-group-tool-bar-gnome): Use new icon names.
	(gnus-group-make-tool-bar): Use `gmm-image-load-path'.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Use new icon names.
	(gnus-summary-make-tool-bar): Use `gmm-image-load-path'.

	* message.el (message-tool-bar-gnome): Use new icon names.
	(message-make-tool-bar): Use `gmm-image-load-path'.

	* gmm-utils.el (gmm-defun-compat, gmm-image-search-load-path): New
	functions from MH-E.
	(gmm-image-load-path): New variable from MH-E.
	(gmm-image-load-path): New function from MH-E.  Added arguments
	LIBRARY, IMAGE and PATH.  Don't modify paths.  Don't use
	*-image-load-path-called-flag.

2006-02-21  Milan Zamazal <pdm@brailcom.org>

	* mm-view.el (mm-view-pkcs7-verify): Implement using smime.el.

2006-02-21  Wolfram Fenske  <wolfram.fenske@student.uni-magdeburg.de>
	(tiny change)

	* nnimap.el (nnimap-request-move-article): Change folder back to
	source group before deleting.

2006-02-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-override-alist): Fix type in doc string.

	* gnus-art.el (mm-url-insert-file-contents-external): Autoload
	mm-url.

	* mm-uu.el (mm-uu-type-alist): Improve `LaTeX'.

2006-02-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-charset-to-coding-system): Don't check the
	coding system which mm-charset-to-coding-system returns for a
	given charset is valid.

2006-02-16  Juanma Barranquero  <lekktu@gmail.com>

	* html2text.el (html2text-remove-tag-list):
	* spam-stat.el (spam-stat-buffer-words): Fix typo in docstring.

2006-02-14  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-cus.el: Revert 2005-10-17 change.

2006-02-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-strip-banner): Call
	article-really-strip-banner only when the regexp match is made.

2006-02-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-strip-banner): Use
	gnus-extract-address-components instead of
	mail-header-parse-addresses to make it work with non-ASCII text;
	remove mail-encode-encoded-word-string.

	* rfc2231.el (rfc2231-parse-string): Attempt to parse parameter
	values which are surrounded with \"...\"; make it never cause a
	Lisp error; give up parsing of parameters if it failed in
	extracting type.

2006-02-14  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* smime.el (smime-cert-by-ldap-1): Fix bug where
	`smime-ldap-search' returns results without userCertificates.

2006-02-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-make-temp-file): Don't catch file-error in Emacs.

2006-02-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-check-spamassassin-headers): Adapt format for
	Spamassassin 3.0 or later.  Reported by ARISAWA Akihiro
	<ari@mbf.ocn.ne.jp>.
	(spam-list-of-processors): Add spam-use-gmane.

2006-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-make-temp-file): Import the Emacs 22 version of
	make-temp-file; make it work with XEmacs as well.

	* gnus-art.el (gnus-article-browse-html-parts): Use the 3rd arg of
	mm-make-temp-file.

	* mm-decode.el (mm-display-external): Use the 3rd arg of
	mm-make-temp-file.
	(mm-create-image-xemacs): Ditto.

2006-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-draft.el (gnus-draft-send): Replace message-narrow-to-head
	with message-narrow-to-headers.
	(gnus-draft-setup): Narrow to header to run message-fetch-field.
	(gnus-draft-check-draft-articles): New function.
	(gnus-draft-edit-message, gnus-draft-send-message): Use it.

2006-02-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-browse-html-parts):
	`hs-show-html-list' should read `gnus-article-browse-html-parts'.
	Don't use suffix argument for mm-make-temp-file for Emacs 21
	compatibility.  Remove useless `format'.

2006-02-13  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-wash-article): Update regexps.
	(nnweb-group-alist): Use defvoo instead of defvar.

2006-02-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnoo.el (nnoo-declare): Don't generate duplicate entries when
	re-loading nn* modules.

2006-02-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-tool-bar): Remove duplicate check
	for `tool-bar-mode' and don't check it's default-value.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* message.el (message-make-tool-bar): Ditto.

	* gnus-art.el (gnus-article-browse-html-parts): Remove useless
	`substring'.  Shorten tmp-file name.

	* gnus.el: Remove bogus comment.

2006-02-10  Hynek Schlawack  <hynek@ularx.de>

	* gnus-art.el (gnus-article-browse-html-parts): New function.
	(gnus-article-browse-html-article): New function for viewing html
	articles with a browser.

2006-02-09  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region): Don't convert line-endings
	in elisp.
	(pgg-gpg-encrypt-symmetric-region): Ditto.
	(pgg-gpg-sign-region): Ditto.

	* pgg-def.el (pgg-text-mode): New variable.

	* mml2015.el (mml2015-pgg-sign): Enable pgg-text-mode.
	(mml2015-pgg-encrypt): Ditto.

	* mml1991.el (mml1991-pgg-sign): Enable pgg-text-mode.
	(mml1991-pgg-encrypt): Ditto.

2006-02-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnfolder.el (nnfolder-insert-newsgroup-line): Use
	message-make-date instead of current-time-string.

	* mm-view.el (mm-inline-message): Don't set gnus-newsgroup-charset
	to gnus-decoded which mm-uu might set.

2006-02-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Sort segmented parameters;
	don't decode quoted parameters; remove misimported Emacs code.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-decode-encoded-string): Don't use split-string which
	behaves differently according to Emacs version; use
	mm-decode-coding-region to convert charset to coding-system.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Remove misimported Emacs code.

2006-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-decode-charset): Don't use ignore-errors
	when calling mail-header-parse-content-type.
	(article-de-quoted-unreadable): Ditto.
	(article-de-base64-unreadable): Ditto.
	(article-wash-html): Ditto.

	* mm-decode.el (mm-dissect-buffer): Don't use ignore-errors when
	calling mail-header-parse-content-type and
	mail-header-parse-content-disposition.
	(mm-find-raw-part-by-type): Don't use ignore-errors when calling
	mail-header-parse-content-type.

	* mml.el (mml-insert-mime-headers): Use mml-insert-parameter to
	insert charset and format parameters; encode description after
	inserting it to buffer.
	(mml-insert-parameter): Fold lines properly even if a parameter is
	segmented into two or more lines; change the max column to 76.

	* rfc1843.el (rfc1843-decode-article-body): Don't use
	ignore-errors when calling mail-header-parse-content-type.

	* rfc2231.el (rfc2231-parse-string): Return at least type if
	possible; don't cause an error even if it fails in parsing of
	parameters.  Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Don't break lines at the beginning, leave
	it to mml-insert-parameter.

	* webmail.el (webmail-yahoo-article): Don't use ignore-errors when
	calling mail-header-parse-content-type.

2006-02-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane-use-article-number): Improve
	doc string.
	(spam-report-gmane-internal): Check if a suitable header was found
	in the article.

2006-02-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Revert 2006-02-03 change.
	(rfc2231-encode-string): Make param*=value always begin with LWSP.

2006-02-05  Romain Francoise  <romain@orebokech.com>

	Update copyright notices of all files in the gnus directory.

2006-02-03  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-request-group): Avoid growing overview files.

2006-02-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Add missing semicolons to
	segmented lines of parameter value to cope with Thunderbird 1.5
	bug (cf. https://bugzilla.mozilla.org/show_bug.cgi?id=323318).
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Don't make lines exceeding 76 column.

2006-02-01  Max Froumentin  <max@lapin-bleu.net>  (tiny change)

	* mml.el (mml-generate-mime-1): Correct the order of inline signed
	parts.

2006-01-31  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-group-alist): Use defvar instead of defvoo,
	there's only one active file for all servers.
	(nnweb-request-scan): Make sure nnweb-articles is initialized on
	solid groups.  Gnus might have used a FAST request to select the
	group.
	(nnweb-request-group, nnweb-google-parse-1): Don't keep nnweb-type
	and nnweb-search redundantly in the active file.
	(nnweb-request-list): Don't list bogus groups.  There can only be
	one.
	(nnweb-request-create-group): Don't use ARGS.
	(nnweb-possibly-change-server, nnweb-request-group): Remove some
	initialisations.  Let nnoo do the work.

2006-01-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-emacs-sources-extract): Say the part has been
	decoded.
	(mm-uu-diff-extract): Ditto.

	* mm-view.el (mm-display-inline-fontify): Get decoded part rightly.

2006-01-31  Kevin Ryde  <user42@zip.com.au>

	* mailcap.el (mailcap-viewer-passes-test): Don't put "(nil t)" into
	mailcap-viewer-test-cache when there's no 'test clause, since that
	will invert the meaning of a "nil" test previously determined by
	mailcap-mailcap-entry-passes-test.

2006-01-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el: Bind tool-bar-mode instead of tool-bar-map when
	compiling.

	* gnus-sum.el: Ditto.

	* message.el: Don't bind tool-bar-map when compiling.

2006-01-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnweb.el (nnweb-google-parse-1): Clarify some comments.

2006-01-30  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-type-definition, nnweb-google-parse-1)
	(nnweb-google-create-mapping, nnweb-google-search): Adapt to
	current Google Groups.

2006-01-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-make-tool-bar): Add checks for XEmacs
	and tool-bar-mode.

	* gnus-group.el (gnus-group-make-tool-bar): Add checks for XEmacs
	and tool-bar-mode.

	* message.el (message-tool-bar-update): Simplify.
	(message-make-tool-bar): Add checks for XEmacs and tool-bar-mode.

	* gnus-sum.el (gnus-summary-tool-bar-update): Check for
	gnus-summary-buffer.
	(gnus-summary-tool-bar-gnome): Use "reply-author" icon for
	gnus-summary-reply.

	* gmm-utils.el (gmm): Add :version.

2006-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (clean): New rule.
	(distclean): Use it.

2006-01-26  Steve Youngs  <steve@sxemacs.org>

	* gmm-utils.el (gmm-tool-bar-item, gmm-tool-bar-zap-list): Don't
	autoload.

2006-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-verbose): Add :group.

2006-01-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Change some comments WRT tool-bars.

	* gnus-sum.el (gnus-summary-tool-bar)
	(gnus-summary-tool-bar-gnome, gnus-summary-tool-bar-retro)
	(gnus-summary-tool-bar-zap-list): New variables.
	(gnus-summary-make-tool-bar): Complete rewrite using
	`gmm-tool-bar-from-list'.

	* gnus-group.el (gnus-group-tool-bar, gnus-group-tool-bar-gnome)
	(gnus-group-tool-bar-retro, gnus-group-tool-bar-zap-list): New
	variables.
	(gnus-group-make-tool-bar): Complete rewrite using
	`gmm-tool-bar-from-list'.
	(gnus-group-tool-bar-update): New function.

	* message.el (message-mode-field-menu): Add "Show hidden Headers".

2006-01-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Ignore it if a given part
	is dissected into a single part of which the type is the same as
	the given one; decode charset.

2006-01-21  Kevin Ryde  <user42@zip.com.au>

	* mailcap.el (mailcap-parse-mailcap-extras): "test" key must go
	into alists as symbol not string, since that's what
	mailcap-viewer-passes-test and mailcap-mailcap-entry-passes-test
	look for.

2006-01-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-tool-bar-item): Add "Separator".
	(gmm-tool-bar-from-list): Suppress tooltip for `gmm-ignore'.

	* message.el (message-tool-bar-gnome): Use gmm-ignore.

2006-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-mime-security-button-menu): New alias.
	(gnus-xmas-mime-security-button-menu): New function.

	* gnus-art.el (gnus-mime-security-button-commands): New variable.
	(gnus-mime-security-button-menu): New definition.
	(gnus-mime-security-button-map): Use them.
	(gnus-mime-security-button-menu): New function.
	(gnus-insert-mime-security-button): Addition to help echo.
	(gnus-mime-security-run-function, gnus-mime-security-save-part)
	(gnus-mime-security-pipe-part): New functions.

	* mm-uu.el (mm-uu-buttonize-original-text-parts): Remove.
	(mm-uu-dissect-text-parts): Revert a part of 2006-01-23 change.

	* mm-decode.el (mm-handle-set-disposition): Remove.
	(mm-handle-set-description): Remove.

2006-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-w3m-standalone-supports-m17n-p): New variable.
	(mm-w3m-standalone-supports-m17n-p): New function.
	(mm-inline-text-html-render-with-w3m-standalone): Use it to alter
	w3m usage.

	* gnus-art.el (gnus-article-wash-html-with-w3m-standalone): Use
	mm-w3m-standalone-supports-m17n-p to alter w3m usage.

2006-01-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-zap-list): Use
	gmm-tool-bar-zap-list as custom type.
	(message-tool-bar-update): New function.
	(message-tool-bar, message-tool-bar-gnome)
	(message-tool-bar-retro): Add message-tool-bar-update.
	(message-tool-bar-gnome): Add flyspell-buffer.

	* gnus-util.el (gnus-error): Describe `args'.

	* gmm-utils.el (gmm-error): Describe `args'.
	(gmm-tool-bar-zap-list): New widget.
	(gmm-tool-bar-from-list): Improve description of `zap-list'.

2006-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-buttonize-original-text-parts): New variable.
	(mm-uu-dissect-text-parts): Buttonize original text parts; reduce
	the number of recursive calls.

	* mm-decode.el (mm-handle-set-disposition): New macro.
	(mm-handle-set-description): New macro.

2006-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Decode content transfer
	encoding.

2006-01-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-zap-list, message-tool-bar)
	(message-tool-bar-gnome, message-tool-bar-retro): New variables.
	(message-tool-bar-local-item-from-menu): Remove.
	(message-tool-bar-map): Replace by `message-make-tool-bar'.
	(message-make-tool-bar): New function.
	(message-mode): Use `message-make-tool-bar'.

	* gmm-utils.el: New file.
	(gmm-verbose, gmm-message, gmm-error): From gnus-utils.el.
	(gmm-lazy): New widget copied from `nnmail.el'.
	(gmm-tool-bar-from-list): New function for creating customizable
	tool bars.
	(gmm-tool-bar-from-list): Fix typos in doc string.  Remove debug
	output.
	(gmm): Add :prefix to defgroup.

2006-01-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gmm-utils.el (gmm-widget-p): New function.

2006-01-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-attach-file): Describe `description' in doc string.
	(mml-menu): Add Emacs MIME manual and PGG manual.

2006-01-20  Richard M. Stallman  <rms@gnu.org>

	* mm-url.el (mm-url-load-url): Require url-parse and url-vars.

2006-01-20  Kevin Greiner  <kevin.greiner@compsol.cc>

	* nntp.el (nntp-end-of-line): Doc fix.

2006-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* imap.el (imap-open): Handle case where buffer is a buffer
	object.

2005-01-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-delay.el (gnus-delay): Don't autoload.
	It's useless and could trigger a bug in cus-dep.el causing ldefs-boot
	to be re-loaded when customizing the `gnus-delay' group.

2005-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* message.el (message-insert-citation-line): Use newlines.

2006-01-19  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-pgp.el (pgg-pgp-encrypt-region, pgg-pgp-decrypt-region)
	(pgg-pgp-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.
	(pgg-pgp-decrypt-region, pgg-pgp-sign-region): Use new name for
	pgg-add-passphrase-to-cache function.

	* pgg-pgp5.el (pgg-pgp5-encrypt-region, pgg-pgp5-decrypt-region)
	(pgg-pgp5-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.
	(pgg-pgp5-sign-region): Use new name of
	pgg-add-passphrase-to-cache function.

2006-01-19  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-gpg.el (pgg-gpg-select-matching-key): Fix: look at the right
	part of the decoded armor to find the key-identifier.
	(pgg-gpg-lookup-key-owner): New function to return the
	human-readable identifier of a key owner.
	(pgg-gpg-key-id-from-key-owner): Make it easy to identify the key
	itself.
	(pgg-gpg-decrypt-region): Prompt with the key owner (rather than
	the key value) if we have a key and can match it against a secret
	key.  Also, added a note pointing out fact that the prompt only
	indicates the first matching key.

	* pgg.el (pgg-decrypt): Passing along 'passphrase' in call to
	pgg-decrypt-region.
	(pgg-add-passphrase-to-cache): Rename from
	`pgg-add-passphrase-cache' to reduce confusion (all callers
	changed).
	(pgg-remove-passphrase-from-cache): Rename from
	`pgg-remove-passphrase-cache' to reduce confusion (all callers
	changed).
	(pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add informative docstrings.
	(pgg-decrypt): Convey provided passphrase in subordinate call to
	pgg-decrypt-region.

2006-01-19  Ken Manheimer  <ken.manheimer+emacs@gmail.com>

	* pgg.el (pgg-encrypt-region, pgg-encrypt-symmetric-region)
	(pgg-encrypt-symmetric, pgg-encrypt, pgg-decrypt-region)
	(pgg-decrypt, pgg-sign-region, pgg-sign): Add optional
	'passphrase' argument, so the passphrase can be managed externally
	and then passed in to the system.

	* pgg.el (pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add optional 'notruncate' argument,
	so the passphrase cache can be used reliably with identifiers
	besides a pgp packet's key id.

	* pgg-gpg.el (pgg-gpg-encrypt-region)
	(pgg-gpg-encrypt-symmetric-region, pgg-gpg-decrypt-region)
	(pgg-gpg-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Add optional
	'notruncate' argument, so the passphrase cache can be used
	reliably with identifiers besides a pgp packet's key id.

2006-01-19  Sascha Wilde  <swilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-encrypt-symmetric-region): New function for
	symmetric encryption.
	(pgg-gpg-symmetric-key-p): New function to check for an symmetric
	encrypted session key.
	(pgg-gpg-decrypt-region): When decrypting a symmetric encrypted
	message ask for the passphrase in a proper way.

	* pgg.el (pgg-encrypt-symmetric, pgg-encrypt-symmetric-region):
	New user commands for symmetric encryption.

2006-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-bodies.el (mm-decode-body): Don't decode decoded body.

	* mm-uu.el (mm-uu-dissect-text-parts): Dissect dissected parts.

2006-01-19  Mark D. Baushke  <mdb@gnu.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region): Add --textmode to gpg args.

2006-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-inlined-types): Add application/pgp.
	(mm-automatic-display): Ditto.

	* mm-uu.el (mm-uu-dissect-text-parts): Recognize application/pgp
	part as text.

2006-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el: Update copyright.
	(nnrss-opml-import): Query whether to subscribe to each entry.

	* gnus-art.el:
	* gnus-sum.el:
	* gnus-xmas.el:
	* messagexmas.el:
	* mm-uu.el:
	* mm-view.el: Update copyright.

2006-01-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-info): New function.
	(message-mode-menu): Add it.
	Update copyright.

	* ChangeLog: Fix and update copyright.

2006-01-13  Romain Francoise  <romain@orebokech.com>

	* message.el (message-forward-subject-name-subject): Prefer the
	address to 'nowhere' if the sender has no name.
	Fix typo.  Update copyright year.

2006-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-wash-html): Use
	gnus-summary-show-article-charset-alist if a numeric arg is given.
	(gnus-article-wash-html-with-w3m-standalone): New function.

	* mm-view.el (mm-text-html-renderer-alist): Map w3m-standalone to
	mm-inline-text-html-render-with-w3m-standalone.
	(mm-text-html-washer-alist): Map w3m-standalone to
	gnus-article-wash-html-with-w3m-standalone.
	(mm-inline-text-html-render-with-w3m-standalone): New function.

2006-01-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Fix previous message-marks commit.
	Improve LaTeX.

2006-01-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-wash-html-in-text-plain-parts): New variable.
	(nnrss-request-article): Render text/plain parts as HTML.

	* gnus-art.el (gnus-article-wash-html-with-w3m): No need to narrow
	the buffer.

2006-01-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-cus.el (gnus-group-parameters): Sync posting-style with
	custom definition of `gnus-posting-styles'.

	* gnus-start.el (gnus-gnus-to-quick-newsrc-format): Bind
	print-circle.  Suggested by Kalle Olavi Niemitalo <kon@iki.fi>.

2006-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-useful-groups): Use Gmane for ding.
	Use nntp for bug archive.

2006-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Fix the way to fill text/plain
	parts.
	(nnrss-normalize-date): New function converts ISO 8601 date into
	RFC822 style.  Suggested by Mark Plaksin <happy@mcplaksin.org>.
	(nnrss-check-group): Use it.

2006-01-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-work-articles): Remove useless `min'.

	* nnrss.el (nnrss-fetch): Make it fail gracefully when it can't
	fetch a feed.  Suggested by Mark Plaksin <happy@mcplaksin.org>.
	(nnrss-insert-w3): Ditto.

2005-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Reverse the order of
	the articles to be forwarded including the case where neither a
	number of articles nor a region is specified.

2005-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Fix last change; fill
	text/plain parts.

2005-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Replace <br />s with newlines
	in text/plain part.
	(nnrss-check-group): Don't add excessive newline to dc:subject.

2005-12-19  Mark Plaksin  <happy@mcplaksin.org>  (tiny change)

	* nnrss.el (nnrss-check-group): Put the RSS dc:subject in the
	article.

2005-12-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnml.el: Don't require gnus-bcklg.  Autoload it.
	(nnml-use-compressed-files, nnml-save-mail): Support other
	comression programs such as bzip2.

2005-12-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Make sure we check the buffer size before
	removing tcp headers.

2005-12-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-delete-text-of-type): Enable it to
	remove MIME buttons associated with multipart/alternative parts.
	(gnus-mime-display-alternative): Tag buttons using `article-type'
	text property.

	* gnus-msg.el (gnus-copy-article-buffer): Remove MIME buttons
	associated with multipart/alternative parts.

	* gnus-art.el (gnus-signature-separator): Fix custom type.

	* mm-decode.el (mm-inlined-types): Fix custom type.
	(mm-keep-viewer-alive-types): Ditto.
	(mm-automatic-display): Ditto.
	(mm-attachment-override-types): Ditto.
	(mm-inline-override-types): Ditto.
	(mm-automatic-external-display): Ditto.

2005-12-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-user-mail-address)
	(spam-report-user-agent): New variables.
	(spam-report-url-ping-plain): Use spam-report-user-agent.

2005-12-14  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* gnus-art.el (gnus-button-handle-custom): Do not just use
	`customize-apropos' for any "M-x customize-*" button but the
	function called for.  Accept both the function name and its
	argument in order to achieve this.
	(gnus-button-alist): Remove support for "custom:" URL's.  Pass
	function name to `gnus-button-handle-custom' in case of "M-x
	customize-*" buttons.

2005-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-buttonized-mime-types): Mention addition of
	multipart/alternative and add xref to mm-discouraged-alternatives
	in doc string.

	* mm-decode.el (mm-discouraged-alternatives): Add xref to
	gnus-buttonized-mime-types in doc string.

2005-12-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-decode.el (mm-discouraged-alternatives): Fix custom type.
	Suggest image/.* in the doc string.

2005-12-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Don't depend on message.el for
	message-marks (Debian bug #342521).

2005-12-12  Simon Josefsson  <jas@extundo.com>

	* password.el (password-read-from-cache): Add.
	(password-read): Use it.

2005-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-charset-to-coding-system): Recognize
	us-ascii as a MIME charset.

	* mm-bodies.el (mm-decode-content-transfer-encoding): Protect
	against the case where the 2nd arg TYPE is nil.

2005-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-stream-type): Fix custom version.

	* mm-uu.el (mm-uu-type-alist): Simplify uu regexp.

2005-12-09  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* mm-decode.el (mm-display-external): Add missing cdr.

2005-12-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-display-external): Use nametemplate (defined in
	RFC1524) if it is in mailcap or add a suffix according to
	mailcap-mime-extensions when generating a temp filename; postpone
	deleting a temp file for 2 seconds for some wrappers, shell
	scripts, and so on, which might exit right after having started a
	viewer command as a background job.

2005-12-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp-marks-directory): Fix custom group.

	* gnus-fun.el (gnus-face-from-file): Decrease quant in smaller
	steps when < 10.

	* gnus-start.el (gnus-no-server-1): Mention
	`gnus-level-default-subscribed' in doc string.

2005-12-02  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* mm-view.el (mm-inline-text-html-render-with-w3m): Fix misplaced
	parens.

2005-12-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-use-toolbar): Revert.
	(gnus-xmas-setup-toolbar): Use global default-toolbar if
	gnus-use-toolbar is default.

	* messagexmas.el (message-use-toolbar): Revert.
	(message-setup-toolbar): Use global default-toolbar if
	message-use-toolbar is default.

2005-11-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-use-toolbar): Determine the default value
	according to default-toolbar-visible-p.

	* messagexmas.el (message-use-toolbar): Ditto.

2005-11-26  Dave Love  <fx@gnu.org>

	* tls.el (open-tls-stream): Rename arg SERVICE to PORT.
	(tls-program, tls-success): Provide openssl alternative.

	* starttls.el: Doc fixes.
	(starttls-open-stream-gnutls, starttls-open-stream): Rename arg
	SERVICE to PORT.

	* pop3.el (pop3-open-server) <ssl>:  Clarify a loop.  Deal with
	port null or service name.
	(starttls-negotiate): Autoload.

2005-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-kill-to-signature): Fix interactive spec.

2005-11-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* pop3.el (pop3-open-server): Recognize a string as a service name.

2005-11-24  Pascal Rigaux  <pixel@mandriva.com>  (tiny change)

	* rfc2231.el (rfc2231-parse-string): Support non-ascii chars.

2005-11-23  Dave Love  <fx@gnu.org>

	Add pop3s, pop3/starttls.

	* pop3.el (pop3-authentication-scheme): Clarify doc.
	(open-tls-stream, starttls-open-stream): Autoload.
	(pop3-stream-type): New.
	(pop3-open-server): Use it.

	* mail-source.el (mail-sources): Fix some :types.  Add stream type
	for POP.
	(mail-source-keyword-map): Add :stream for POP.
	(mail-source-fetch-pop): Use pop3-stream-type.

2005-11-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-fancy-expiry-target): Use current-time instead
	of current-time-string.

2005-11-20  Stefan Schimanski  <schimmi@debian.org>  (tiny change)

	* nnmail.el (nnmail-fancy-expiry-target): Protect against invalid
	date header.

2005-11-19  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-sum.el (gnus-fetch-old-headers): Updated docs to warn that
	it can seriously impact performance as it bypasses the agent's
	local caches.

2005-11-19  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-possibly-synchronize-flags): A server
	must be explicitly online rather than "not explicitly offline" for
	its flags to be synchronized.

	* gnus-sum.el (gnus-summary-remove-process-mark): Always return t so
	that gnus-uu-unmark-thread will function correctly.

	* gnus-group.el (gnus-total-fetched-for): Reduced cutoff so that
	1024K is instead displayed as 1M.

2005-11-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* flow-fill.el (fill-flowed): Bind adaptive-fill-mode to nil.

2005-11-16  Boris Samorodov  <bsam@ipt.ru>  (tiny patch)

	* imap.el (imap-kerberos4-open): Ignore SSL stuff.

2005-11-13  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-read-local): Trivial fix to format of
	error message to display actual error condition.
	(gnus-agent-save-local): Avoid saving symbols that are bound to
	nil as they simply result in a warning message in
	gnus-agent-read-local.

2005-11-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-dribble-read-file): Use make-local-variable
	rather than make-variable-buffer-local for file-precious-flag.

2005-11-12  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-braid-nov): Now tests new nov entries
	for duplicates which are removed.  The invalid sort check then
	triggers a rescan after the sort as sorting may have moved
	duplicate entries such that they can be cheaply detected.

2005-11-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-dribble-read-file): Quote file-precious-flag.

2005-11-12  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-article-alist-save-format): Changed
	internal variable to a custom variable.  Changed default value
	from compressed(2) to uncompressed(1).
	(gnus-agent-read-agentview): Reversed revision 7.8 to restore
	support for uncompressed agentview files.  Taken together, reading
	the agentview file should now be 6-7 times faster.

2005-11-11  Jan Nieuwenhuizen  <janneke@gnu.org>

	* gnus-start.el (gnus-dribble-read-file): Set file-precious-flag,
	as a buffer-local variable.  This avoids creating truncated
	dribble files as a result of a hang up, eg.

2006-01-03  Rodrigo Ventura  <yoda@isr.ist.utl.pt>  (tiny change)

	* gnus-xmas.el (gnus-xmas-group-startup-message): Typo
	gnus-splash-face -> gnus-splash.  Fixes starting from a TTY in
	XEmacs.

2005-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-start-draft-setup): Enforce
	`gnus-draft-mode' for nndraft:drafts at startup.

	* gnus.el (gnus-splash): Change custom group.
	(gnus-group-get-parameter, gnus-group-parameter-value): Describe
	allow-list argument.

	* gnus-agent.el (gnus-agent-article-alist-save-format): Format doc
	string.

2005-12-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-default-article-saver): Add user-defined
	`function' to custom type.

2005-10-30  Chong Yidong  <cyd@stupidchicken.com>

	* imap.el (imap-open): Handle case where buffer is a buffer
	object.

2005-11-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-cache.el (gnus-cache-rename-group): Wrap doc strings and
	long lines.
	(gnus-cache-delete-group): Wrap doc strings.

	* gnus-agent.el (gnus-agent-rename-group)
	(gnus-agent-delete-group): Wrap doc strings.


2005-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* messagexmas.el (message-use-toolbar): Change the valid values
	into default, top, bottom, left, and right.
	(message-toolbar-thickness): New variable.
	(message-xmas-setup-toolbar): Locate gnus-xmas-glyph-directory as
	well.
	(message-setup-toolbar): Make it work.

	* gnus-xmas.el (gnus-xmas-update-toolbars): New function.
	(gnus-use-toolbar): Change the valid values into default, top,
	bottom, left, and right.
	(gnus-toolbar-thickness): New variable.
	(gnus-xmas-setup-toolbar): New function.
	(gnus-xmas-setup-group-toolbar): Use it.
	(gnus-xmas-setup-summary-toolbar): Use it.

2005-11-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-start.el (gnus-1): Add "native" to
	gnus-predefined-server-alist.

	* gnus.el (gnus-method-to-server): Don't add "native" to the
	lists here, because that leads to problems when
	gnus-select-method is bound.

2005-11-09  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-article-sort-by-date-reverse): Remove,
	use (not sort-by-date) instead.

2005-11-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-delay.el (gnus-delay-group): Don't autoload.
	It's useless and could trigger a bug in cus-dep.el causing ldefs-boot
	to be re-loaded when customizing the `gnus-delay' group.

2005-11-19  Chong Yidong  <cyd@stupidchicken.com>

	* message.el: Revert last changes.
	(message-insert-citation-line): Use newlines.

2005-11-17  Chong Yidong  <cyd@stupidchicken.com>

	* message.el (message-courtesy-message)
	(message-mark-insert-begin, message-mark-insert-end)
	(message-elide-ellipsis, message-cancel-message)
	(message-add-header, message-change-subject)
	(message-cross-post-followup-to-header)
	(message-cross-post-insert-note, message-reduce-to-to-cc)
	(message-widen-reply, message-delete-not-region)
	(message-kill-to-signature, message-insert-signature)
	(message-insert-importance-high, message-insert-importance-low)
	(message-insert-or-toggle-importance)
	(message-insert-disposition-notification-to)
	(message-indent-citation, message-yank-original)
	(message-cite-original-without-signature, message-cite-original)
	(message-insert-citation-line, message-position-on-field)
	(message-fix-before-sending, message-send-mail-partially)
	(message-send-mail, message-send-mail-with-sendmail)
	(message-send-mail-with-qmail, message-send-news)
	(message-check-news-header-syntax, message-generate-headers)
	(message-insert-courtesy-copy, message-fill-address)
	(message-fill-header, message-shorten-references)
	(message-setup-1, message-cancel-news)
	(message-forward-make-body-plain, message-forward-make-body-mime)
	(message-forward-make-body-mml, message-encode-message-body)
	(message-forward-make-body-digest-plain)
	(message-forward-make-body-digest-mime)
	(message-use-alternative-email-as-from): Insert `hard-newline'
	instead of ordinary newlines.

2005-11-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-generate-headers): Downcase the argument
	given to message-check-element.

2005-11-08  Kevin Greiner  <kevin.greiner@compsol.cc>

	* nntp.el (nntp-authinfo-rejected): New error condition.
	(nntp-wait-for): Use new error condition to signal authentication
	error.
	(nntp-retrieve-data): Rethrow new error condition to break out of
	recursive call to nntp-send-authinfo.

2005-11-08  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-catchup-and-goto-prev-group): New function.
	(gnus-summary-exit-map): Bind to `Z p'.
	(gnus-summary-make-menu-bar): Add menu item.

2005-11-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-treat-custom): Add `first'.
	(gnus-treat-*): Add `first' in all doc strings.

	* gnus-group.el (gnus-group-compact-group): Fix typo.

2005-11-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-parameters-case-fold-search): New variable.
	(gnus-parameters-get-parameter): Use it.

	* gnus-score.el (gnus-home-score-file): Doc fix.

2005-11-01  Xavier Maillard  <zedek@gnu-rox.org>  (tiny change)

	* gnus-score.el (gnus-update-score-entry-dates): Doc fix.

2005-10-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-special-display-p): New function.

	* mml.el (mml-preview): Use it; doc fix.

2005-10-29  Romain Francoise  <romain@orebokech.com>

	* message.el (message-fix-before-sending): Fix comment.

2005-10-29  Jari Aalto  <jari.aalto@cante.net>

	* gnus-sum.el (gnus-article-sort-by-date-reverse): New function.

2005-10-29  Jari Aalto  <jari.aalto@cante.net>

	* score-mode.el (gnus-score-edit-done-hook): Introduce variable.
	Used in gnus-score.el.

2005-10-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-codepage-setup): Remove bogus alias test.

2005-10-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* flow-fill.el (fill-flowed-encode-tests): Restore trailing
	whitespace removed in revision 7.8.  Use concatenated string to
	protect trailing whitespace.

2005-10-27  Jouni K Seppanen  <jks@iki.fi>  (tiny change)

	* nnimap.el (nnimap-search-uids-not-since-is-evil): Add variable.
	(nnimap-request-expire-articles): Use it to avoid sending 'UID
	SEARCH UID ... NOT SINCE' queries, for inefficient servers like
	Courier IMAP ("some version from 2004").  Mostly based on similar
	code in the same function.

2005-10-26  Didier Verna  <didier@xemacs.org>

	* gnus-group.el (gnus-group-compact-group): invalidate original
	article buffer.
	* gnus-srvr.el (gnus-server-compact-server): ditto.
	* nnml.el (nnml-request-compact-group): handle self Xref: field in
	NOV database and in article itself.
	Invalidate article backlog.

2005-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-hide-markers): Fix XEmacs case.

2005-10-26  Simon Josefsson  <jas@extundo.com>

	* flow-fill.el (fill-flowed): Flow-fill unquoted lines too, revert
	part of 2004-07-25 change.

2005-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-display-completion-list): New function.
	(message-expand-group): Use it; make sure the Completions buffer
	is modifiable.

2005-10-23  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-sum.el (gnus-ignored-from-addresses): Handle case where
	user-mail-name is an empty string.

2005-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-default-adaptive-score-alist): Set defaults
	depending on gnus-score-decay-constant.

	* encrypt.el (encrypt-insert-file-contents)
	(encrypt-write-file-contents): Don't use `gnus-message'.

	* mm-uu.el (mm-uu-verbatim-marks-extract): Add four start and end
	arguments.
	(mm-uu-type-alist): Add message-marks and insert-marks.  Pass
	arguments to mm-uu-verbatim-marks-extract.
	(mm-uu-hide-markers): New variable.
	(mm-uu-extract): Use face similar to `gnus-cite-3'.

	* gnus-fun.el (gnus-convert-image-to-x-face-command)
	(gnus-convert-image-to-face-command): Use "convert" by default to
	allow other input image formats.
	(gnus-x-face-from-file, gnus-face-from-file): Adjust doc strings
	accordingly.

2005-10-23  Simon Josefsson  <jas@extundo.com>

	* imap.el (imap-gssapi-program): Align command line parameters
	with latest GNU SASL.
	(imap-gssapi-open): Ignore 'Trying ...' messages from GNU SASL.

2005-10-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnslashdot.el (nnslashdot-retrieve-headers-1): Update to new
	HTML.
	(nnslashdot-request-article): Ditto.

	* lpath.el (featurep): Add nobreak-char-display.

2005-10-20  Hiroshi Fujishima  <hiroshi.fujishima@gmail.com>  (tiny change)

	* mail-source.el (mail-source-fetch-pop): Require pop3.
	(mail-source-check-pop): Ditto.

2005-10-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-decode-encoded-words): Fix the handling of
	errors.

2005-10-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-strip-trailing-blank-lines)
	(gnus-treat-strip-leading-blank-lines): Improve doc string.

	* message.el (message-tool-bar-local-item-from-menu): Fix comment.

	* mm-bodies.el (mm-decode-string): Call
	`mm-charset-to-coding-system' with allow-override argument.

2005-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-allow-incomplete-encoded-text): New variable.
	(rfc2047-charset-to-coding-system): New function.
	(rfc2047-decode-encoded-words): New function.
	(rfc2047-decode-region): Use them.
	(rfc2047-decode-cte): Remove.
	(rfc2047-parse-and-decode): Remove.
	(rfc2047-decode): Remove.

2005-10-15  Kenichi Handa  <handa@m17n.org>

	* rfc2047.el (rfc2047-decode-cte): New function.
	(rfc2047-decode-region): Change the way to decode successive
	encoded-words: decode B- or Q-encoding in each encoded-word,
	concatenate them, and decode it as charset.

2005-10-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind codepage-setup for XEmacs.

2005-10-17  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-cus.el (gnus-custom-map): New variable.  Bind mouse-1 to
	widget-move-and-invoke.
	(gnus-custom-mode): Use gnus-custom-map.

2005-10-15  Bill Wohler  <wohler@newt.com>

	* message.el (message-tool-bar-map): Renamed image file from
	mail_send to mail/send.

2005-10-16  Masatake YAMATO  <jet@gyve.org>

	* message.el (message-expand-group): Pass the common
	prefix substring of completion to `display-completion-list'.

2005-10-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml-sec.el (mml-secure-method): New internal variable.
	(mml-secure-sign, mml-secure-encrypt, mml-secure-message-sign)
	(mml-secure-message-sign-encrypt, mml-secure-message-encrypt): New
	functions using mml-secure-method.

	* mml.el (mml-mode-map): Add key bindings for those functions.
	(mml-menu): Simplify security menu entries.  Suggested by Jesper
	Harder <harder@myrealbox.com>.
	(mml-attach-file, mml-attach-buffer, mml-attach-external): Goto
	end of message if point is the headers of the message.

	* message.el (message-in-body-p): New function.

	* assistant.el: Autoload gnus-util and netrc.

	* mm-util.el (mm-charset-to-coding-system): Add allow-override.
	Use `mm-charset-override-alist' only when decoding.

	* mm-bodies.el (mm-decode-body): Call
	`mm-charset-to-coding-system' with allow-override argument.

	* gnus-art.el (gnus-mime-view-part-as-type-internal): Try to fetch
	`filename' from Content-Disposition if Content-Type doesn't
	provide `name'.
	(gnus-mime-view-part-as-type): Set default instead of
	initial-input.

2005-10-09  Daniel Brockman  <daniel@brockman.se>

	* format-spec.el (format-spec): Propagate text properties of % spec.

2005-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-predicate): Add `first'.

2005-10-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-synonym-alist): Improve doc string.
	(mm-charset-override-alist): New variable.
	(mm-charset-to-coding-system): Use it.
	(mm-codepage-setup): New helper function.
	(mm-charset-eval-alist): New variable.
	(mm-charset-to-coding-system): Use mm-charset-eval-alist.  Warn
	about unknown charsets.

	* dgnushack.el (with-syntax-table): Add some URLs WRT the XEmacs bug.

2005-10-04  David Hansen  <david.hansen@gmx.net>

	* nnrss.el (nnrss-request-article): Add support for the comments tag.
	(nnrss-check-group): Ditto.

2005-10-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-verbatim-marks-extract, mm-uu-latex-extract):
	Rename x-gnus-verbatim to x-verbatim.
	(mm-uu-type-alist): Fix regexp for verbatim-marks.

	* mm-decode.el (mm-automatic-display): Rename x-gnus-verbatim to
	x-verbatim.

	* mm-url.el (mm-url-predefined-programs): Add switches for curl.

	* gnus-util.el (gnus-remove-duplicates): Remove.

	* nnmail.el (nnmail-article-group): Use mm-delete-duplicates
	instead of gnus-remove-duplicates.

	* message.el (message-remove-duplicates): Remove.
	(message-idna-to-ascii-rhs-1): Use mm-delete-duplicates instead of
	message-remove-duplicates.

	* mm-util.el (mm-delete-duplicates): Use `delete-dups' if
	available, else use implementation from `delete-dups'.

	* message.el (message-insert-expires): New function.
	(message-mode-map): Add key binding.
	(message-mode-field-menu): Add menu entry.
	(message-mode): Document it.
	(message-make-expires-date): Use `message-make-date'.

2005-10-04  Josh Huber  <huber@alum.wpi.edu>

	* message.el (message-make-expires-date): New function.

2005-10-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (list-installed-shadows): New entry.
	(install): Use it.
	(remove-installed-shadows): New entry.

	* dgnushack.el (dgnushack-default-load-path): New variable.
	(dgnushack-find-lisp-shadows): New function.
	(dgnushack-remove-lisp-shadows): New function.

2005-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install-el-elc): New entry.
	(install): Use it so that .el files are necessarily installed.

2005-09-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* time-date.el: Autoload parse-time-string, XEmacs needs it.

2005-09-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-inline-media-tests): Check presence of the diff-mode
	function rather than the diff-mode.el package.
	(mm-display-external): Use with-current-buffer.
	(mm-viewer-completion-map, mm-viewer-completion-map):
	Move initialization inside declaration.

2005-09-29  Simon Josefsson  <jas@extundo.com>

	* spam.el: Load hashcash when compiling, to avoid warnings.  Don't
	autoload mail-check-payment.
	(spam-check-hashcash): Define unconditionally, since hashcash.el
	is part of Gnus now.  Ignore errors from payment checking.

2005-09-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-bold-region, message-unbold-region): Rename
	from `bold-region' and `unbold-region'.

	* message.el: Remove useless autoloads.

2005-09-28  Simon Josefsson  <jas@extundo.com>

	* message.el (message-use-idna): Default to t.
	(message-use-idna): Test whether encoding works too.  Doc fix.

2005-09-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-warn-about-losing-connection): Remove.

2005-09-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-emacs-sources-regexp): Make variable
	customizable.  Change default value.
	(mm-uu-diff-groups-regexp): Change default value.
	(mm-uu-type-alist): Add doc string.
	(mm-uu-configure): Add doc string.  Make it interactive.
	(mm-uu-tex-groups-regexp): New variable.
	(mm-uu-latex-extract, mm-uu-latex-test): New functions.
	(mm-uu-type-alist): Add LaTeX documents.
	(mm-uu-verbatim-marks-extract): Use "text/x-gnus-verbatim" instead
	of "text/verbatim".
	(mm-uu-diff-groups-regexp): Fix missing quotes from previous commit.

	* mm-decode.el (mm-automatic-display): Use "text/x-gnus-verbatim"
	instead of "text/verbatim".

	* message.el (message-mark-inserted-region)
	(message-mark-insert-file): Use slrn style marks when called with
	prefix argument.

2005-09-27  Simon Josefsson  <jas@extundo.com>

	* message.el (message-idna-to-ascii-rhs-1): Reformat.

2005-09-27  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* message.el (message-remove-duplicates): New function.
	Implementation borrowed from `gnus-remove-duplicates'.
	(message-idna-to-ascii-rhs): Also encode idna addresses in
	Reply-To:, Mail-Reply-To: and Mail-Followup-To:.
	(message-idna-to-ascii-rhs-1): When `message-use-idna' is 'ask
	only ask about the same idna domain once per header and also tell
	in what header to replace the idna domain.

	* gnus-art.el (article-decode-idna-rhs): Also decode idna
	addresses in Reply-To:, Mail-Reply-To: and Mail-Followup-To:.
	(article-decode-idna-rhs): Fix regexp so that all idna-address in
	a header is decoded and not just the last one.

2005-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-single): Don't modify text if it
	has been decoded.

	* mm-decode.el (mm-automatic-display): Add text/verbatim.
	(mm-insert-part): Don't modify text if it has been decoded.

	* mm-uu.el (mm-uu-verbatim-marks-extract): Say text has been
	decoded.

	* mm-view.el (mm-inline-text): Don't strip text props unless
	decoding enriched or richtext parts.

2005-09-25  Romain Francoise  <romain@orebokech.com>

	* gnus-agent.el (gnus-agent-expire-group, gnus-agent-expire):
	* gnus-start.el (gnus-subscribe-interactively):
	* gnus-uu.el (gnus-uu-grab-articles):
	End `yes-or-no-p' and `y-or-n-p' prompts with question mark and
	space.

2005-09-24  Emilio C. Lopes  <eclig@gmx.net>

	* smime.el (smime-sign-buffer, smime-decrypt-buffer):
	* mm-view.el (mm-view-pkcs7-decrypt):
	* gnus-sum.el (gnus-summary-limit-to-extra)
	(gnus-summary-respool-article, gnus-read-move-group-name):
	* gnus-score.el (gnus-summary-increase-score):
	* gnus-util.el (gnus-completing-read-with-default):
	* gnus-art.el (gnus-read-save-file-name)
	(gnus-summary-save-in-rmail, gnus-summary-save-in-mail)
	(gnus-summary-save-in-file, gnus-summary-save-body-in-file):
	* message.el (message-check-news-header-syntax):
	Follow convention for reading with the minibuffer.

2005-09-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-url-ping-plain):
	Use gnus-extended-version as User-Agent.

	* gnus-agent.el (gnus-agent-synchronize-flags): Explain why the
	default value is nil.

	* mm-uu.el (mm-uu-type-alist): Added slrn style verbatim-marks.
	(mm-uu-verbatim-marks-extract): New function.
	(mm-uu-extract): New face.
	(mm-uu-copy-to-buffer): Use it.

	* spam-report.el (spam-report-gmane-ham): Renamed from
	`spam-report-gmane-unspam'.
	(spam-report-gmane-internal): Renamed from `spam-report-gmane'.
	Simplify use of UNSPAM argument.  Fetch "X-Report-Unspam" header.

	* spam.el (spam-report-gmane-spam, spam-report-gmane-ham):
	Autoload.
	(spam-report-gmane-unregister-routine): Renamed
	`spam-report-gmane-unspam' to `spam-report-gmane-ham'.

2005-09-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-gmane, spam-report-gmane-register-routine)
	(spam-report-gmane-unregister-routine): added support for gmane
	unregistration

	* spam-report.el (spam-report-gmane-unspam)
	(spam-report-gmane-spam): new wrappers around spam-report-gmane
	(spam-report-gmane): changed to take a single article and do
	unspam registration

2005-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-url.el (mm-url-decode-entities): Fix regexp.

2005-09-20  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-agent.el (gnus-agent-synchronize-flags): Switch the
	default to nil, to be able to use Gnus at all.  If the default
	switches to something else, then the function should be fixed not
	be exceedingly slow.

2005-09-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-start.el (gnus-activate-group): if the server is nil, don't
	fail hard

	* spam-report.el: better Keywords line

	* spam.el: added Maintainer and better Keywords line

2005-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-replace-part)
	(gnus-mime-replace-part): New functions.
	(gnus-mime-action-alist, gnus-mime-button-commands)
	(gnus-mime-save-part-and-strip): Added file argument.
	(gnus-article-part-wrapper): Added interactive argument.

	* gnus-sum.el (gnus-summary-mime-map): Add
	`gnus-article-replace-part'.

2005-09-19  Didier Verna  <didier@xemacs.org>

	The nnml compaction feature:
	* nnml.el (nnml-request-compact-group): New function.
	* nnml.el (nnml-request-compact): New function.
	* gnus-int.el (gnus-request-compact-group): New function.
	* gnus-int.el (gnus-request-compact): New function.
	* gnus-group.el (gnus-group-compact-group): New function.
	* gnus-group.el (gnus-group-group-map): Bind it to 'G z'.
	* gnus-group.el (gnus-group-make-menu-bar): Add an entry for it.
	* gnus-srvr.el (gnus-server-compact-server): New function.
	* gnus-srvr.el (gnus-server-mode-map): Bind it to 'z'.
	* gnus-srvr.el (gnus-server-make-menu-bar): Add an entry for it.

2005-09-18  Deepak Goel  <deego@gnufans.org>

	* sieve.el (sieve-help): Fix `message' call: first arg should be a
	format spec.

2005-09-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-group-startup-message): Bind image-load-path.

2005-09-15  Romain Francoise  <romain@orebokech.com>

	* message.el (message-fill-paragraph): Clarify docstring.

2005-09-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-part): Protect against broken
	MIME messages.

2005-09-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-edit-article-done): Remove text props
	before parsing header.

2005-09-11  Jari Aalto  <jari.aalto@cante.net>

	* html2text.el: (html2text-replace-list): Add new entities.

2005-09-11  Romain Francoise  <romain@orebokech.com>

	* message.el (message-alternative-emails): Improve docstring.
	(message-setup-1): Call `message-use-alternative-email-as-from'
	after `message-setup-hook' to give it precedence over posting
	styles, etc.
	(message-use-alternative-email-as-from): Add docstring.  Remove
	the original From header if present.

	* nnml.el (nnml-compressed-files-size-threshold): New variable.
	(nnml-save-mail): Use it.

	* gnus-uu.el (gnus-uu-mark-series): Return number of marked
	articles.  Add new argument `silent'.
	(gnus-uu-mark-all): Report the total number of marked articles.

2005-09-10  Romain Francoise  <romain@orebokech.com>

	* gnus-uu.el (gnus-message-process-mark): Use gnus-message.
	(gnus-uu-mark-series): Likewise.

2005-09-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane): Fix generation of spam
	report URL.

2005-09-10  Simon Josefsson  <jas@extundo.com>

	* gnus-agent.el (gnus-agent-synchronize-flags): Make the default
	t, based on discussion on the ding list with Robert Epprecht
	<epprecht@solnet.ch>.

2005-09-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane): Make it work without
	X-Report-Spam header.  Gmane now only provides Archived-At.
	This is only used if `spam-report-gmane-use-article-number' is nil.
	(spam-report-gmane-spam-header): Remove.  Not used anymore.

	* gnus-sum.el (gnus-thread-sort-by-recipient): New function to
	make `gnus-summary-sort-by-recipient' work with threading.

	* nnweb.el (nnweb-google-wash-article): Print a message if article
	is not available.

2005-09-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (gnus-mime-display-single): Revert 2004-10-07
	change.  Decode text/* parts content before displaying.

2005-09-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml-smime.el: Remove defvar of gnus-extract-address-components.

2005-09-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-display-inline-fontify): Disable support modes.

	* lpath.el: Don't bind mc-pgp-always-sign, url-current-object,
	url-package-name, url-package-version,
	w3m-cid-retrieve-function-alist, w3m-current-buffer,
	w3m-display-inline-images, and w3m-minor-mode-map.

2005-09-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tab-body-function): Fixed mismatched custom
	type.

	* gnus.el (gnus-group-change-level-function): Ditto.

	* gnus-msg.el (gnus-outgoing-message-group): Ditto.

	* gnus-art.el (gnus-signature-limit)
	(gnus-article-mime-part-function): Ditto.

2005-09-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-mode): Silence the byte compiler.

	* gnus-art.el (gnus-article-jump-to-part): Redisplay the article
	using `(sit-for 0)' before moving the point to the specified part;
	skip unbuttonized parts.
	(gnus-article-part-wrapper): Don't use save-window-excursion; don't
	return to the summary window if gnus-auto-select-part is non-nil.

2005-09-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-dnd-protocol-alist, mml-dnd-attach-options): New
	variables.
	(mml-dnd-attach-file, mml-mode): Use them.

	* nnweb.el (nnweb-type-definition, nnweb-google-wash-article):
	Make fetching article by MID work again for Google Groups.  Added
	FIXME concerning gnus-group-make-web-group.

	* mml-smime.el (mml-smime-sign-query, mml-smime-get-dns-cert):
	Don't depend on Gnus by using mail-extract-address-components if
	gnus-extract-address-components is not bound.

2005-09-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-mime-display-security): Don't display the
	signature, but only the signed part.

2005-09-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-thread-hide-subtree): Doc fix.

	* gnus-msg.el (gnus-inews-insert-gcc): Fix the mistake of using
	list, not listp.

2005-09-02  Hrvoje Niksic  <hniksic@xemacs.org>

	* mm-encode.el (mm-encode-content-transfer-encoding): Likewise
	when encoding.

	* mm-bodies.el (mm-decode-content-transfer-encoding):
	De-canonicalize CRLF for all text content types, not just
	text/plain.

2005-09-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-part-wrapper): Error if there's no
	valid article; point arrow and cursor at the MIME button.

2005-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-save-part-and-strip): Clarify prompt.
	Suggested by Dan Christensen <jdc@uwo.ca>.

	* mm-decode.el (mm-save-part): Enable change of prompt.

2005-08-29  Jari Aalto  <jari.aalto@cante.net>

	* gnus-msg.el (gnus-inews-add-send-actions): Made
	`message-post-method' lambda parameter ARG `&optional'.

2005-08-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-mime-map): Added
	gnus-article-save-part-and-strip, gnus-article-delete-part and
	gnus-article-jump-to-part.

	* gnus-art.el (gnus-article-edit-article): Added quiet argument.
	(gnus-article-edit-part): Use it.
	(gnus-article-part-wrapper): Added no-handle argument.
	(gnus-article-save-part-and-strip, gnus-article-delete-part): New
	functions.

2005-08-29  Romain Francoise  <romain@orebokech.com>

	* gnus-fun.el (gnus-convert-image-to-face-command): Fix typo in
	docstring.
	(gnus-face-from-file): Likewise.

2005-08-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-mime-save-part-and-strip): Don't prompt.
	(gnus-mime-delete-part): Don't prompt if `gnus-expert-user' is
	non-nil.
	(gnus-auto-select-part): New variable.
	(gnus-article-jump-to-part): New function.
	(gnus-article-edit-part, gnus-mime-save-part-and-strip)
	(gnus-mime-delete-part): Allow selecting specified part after
	deleting or stripping parts.
	(gnus-article-jump-to-part): Don't use `read-number'.  Use last
	part if argument is bogus.

2005-08-31  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (w3m-minor-mode-map):
	* gnus-spec.el (gnus-newsrc-file-version):
	* gnus-util.el (nnmail-active-file-coding-system)
	(gnus-original-article-buffer, gnus-user-agent):
	* gnus.el (gnus-ham-process-destinations)
	(gnus-parameter-ham-marks-alist)
	(gnus-parameter-spam-marks-alist, gnus-spam-autodetect)
	(gnus-spam-autodetect-methods, gnus-spam-newsgroup-contents)
	(gnus-spam-process-destinations, gnus-spam-process-newsgroups):
	* mm-decode.el (gnus-current-window-configuration):
	* mm-extern.el (gnus-article-mime-handles):
	* mm-url.el (url-current-object, url-package-name)
	(url-package-version):
	* mm-view.el (gnus-article-mime-handles, gnus-newsgroup-charset)
	(smime-keys, w3m-cid-retrieve-function-alist)
	(w3m-current-buffer, w3m-display-inline-images)
	(w3m-minor-mode-map):
	* mml-smime.el (gnus-extract-address-components):
	* mml.el (gnus-article-mime-handles, gnus-mouse-2)
	(gnus-newsrc-hashtb, message-default-charset)
	(message-deletable-headers, message-options)
	(message-posting-charset, message-required-mail-headers)
	(message-required-news-headers):
	* mml1991.el (mc-pgp-always-sign):
	* mml2015.el (mc-pgp-always-sign):
	* nnheader.el (nnmail-extra-headers):
	* rfc1843.el (gnus-decode-encoded-word-function)
	(gnus-decode-header-function, gnus-newsgroup-name):
	* spam-stat.el (gnus-original-article-buffer): Add defvars.

2005-08-22  Karl Chen  <quarl@cs.berkeley.edu>  (tiny change)

	* gnus-art.el (gnus-treatment-function-alist): Move date-lapsed to
	the end of the date treatments.

2005-08-15  Simon Josefsson  <jas@extundo.com>

	* pgg.el (url-insert-file-contents): Don't autoload it, Emacs has
	it in url-handlers.el and XEmacs in url.el.  Reported by Luca
	Capello and Romain Francoise.
	(pgg-fetch-key-function): Removed, not used?
	(pgg-insert-url-with-w3): Require url, to get
	url-insert-file-contents regardless of where it is defined.

2005-08-13  Romain Francoise  <romain@orebokech.com>

	* message.el (message-cite-original-1): New function.
	(message-cite-original): Use it.
	(message-cite-original-without-signature): Ditto.

2005-08-08  Romain Francoise  <romain@orebokech.com>

	* message.el (message-yank-empty-prefix): New variable.
	(message-indent-citation): Use it.
	(message-cite-original-without-signature): Respect X-No-Archive.

2005-08-08  Simon Josefsson  <jas@extundo.com>

	* pgg.el: Autoload url-insert-file-contents instead of loading
	w3/url.
	(pgg-insert-url-with-w3): Don't load url here.

2005-08-07  Jesper Harder  <harder@phys.au.dk>

	* message.el (message-kill-to-signature): Don't insert newline at
	bol.
	(message-newline-and-reformat): Bind fill-paragraph-function to nil.

2005-08-06  Romain Francoise  <romain@orebokech.com>

	* message.el (message-user-fqdn): Fix typo in docstring.

2005-08-05  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-pgg-sign): Make sure micalg is correct.

	* pgg-parse.el (pgg-parse-hash-algorithm-alist): Add SHA-2.

2005-08-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-bodies.el (mm-encode-body): Use coding system rather than
	charset to encode text.

	* mm-util.el (mm-find-mime-charset-region): Attempt to reduce the
	number of charsets if utf-8 is available (XEmacs).

2005-08-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-valid-localpart-regexp): New variable
	taken from `gnus-button-mid-or-mail-regexp'.
	(gnus-button-mid-or-mail-regexp, gnus-button-alist): Use it.
	(gnus-button-alist): Improve regexp for domain part of the MIDs
	for news:localpart@domain buttons.
	(gnus-button-ctan-directory-regexp): Update.

2005-08-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* sieve-manage.el (sieve-manage-interactive-login): Use
	make-local-variable rather than make-variable-buffer-local.
	(sieve-manage-open): Ditto.
	(sieve-manage-authenticate): Ditto.

	* mml.el (mml-generate-mime-1): Make the content type default to
	text/plain if the filename is not specified.

2005-08-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-save-article): Use insert-buffer-substring
	instead of insert-buffer.

	* message.el (message-yank-original): Ditto; set the mark at the
	end of the yanked message.

2005-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page-1): Reduce the number of
	lines to scroll rather than to stop it.

	* mml.el (mml-generate-default-type): Add doc string.
	(mml-generate-mime-1): Use mm-default-file-encoding or make it
	default to application/octet-stream when determining the content
	type if it is not specified for the part or the mml contents; add
	a comment about mml-generate-default-type.

2005-07-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-generate-mime-1): Use mm-default-file-encoding or
	make it default to application/octet-stream when determining the
	content type if it is not specified for the external contents.

2005-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Take care that not only a
	segmented parameter but also other parameters might be there.

2005-07-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-display-external): Delete temp file, directory
	and buffer immediately if the external process is exited.

2005-07-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page-1): Don't scroll if there're
	fewer lines than that of scroll-margin.
	(gnus-article-prev-page): Narrow the range to bind scroll-in-place.

2005-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page): Revert.
	(gnus-article-beginning-of-window): New macro.
	(gnus-article-next-page-1): Use it.
	(gnus-article-prev-page): Ditto.
	(gnus-article-edit-part): Use insert-buffer-substring instead of
	insert-buffer.
	(gnus-article-edit-exit): Ditto.

	* gnus-util.el (gnus-beginning-of-window): Remove.
	(gnus-end-of-window): Remove.

	* lpath.el: Don't bind header-line-format and scroll-margin.

2005-07-25  Simon Josefsson  <jas@extundo.com>

	* pgg.el (pgg-insert-url-with-w3): Don't load w3, it is possible
	to have the url package without w3.  Reported by Daiki Ueno
	<ueno@unixuser.org> and Luigi Panzeri <matley@muppetslab.org>.

2005-07-20  Didier Verna  <didier@xemacs.org>

	* gnus-diary.el: Remove the description comment (nndiary is now
	properly documented in the Gnus manual).
	Fix the spelling of "Back End".
	* nndiary.el: Ditto.
	Fix the copyright notice.

2005-07-18  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-to-prefix,
	gnus-summary-newsgroup-prefix): New variables.
	(gnus-summary-from-or-to-or-newsgroups): Use them.

2005-07-17  Romain Francoise  <romain@orebokech.com>

	* mml2015.el (mml2015-clean-buffer): Prefix buffer name with a
	space as it's generally not especially interesting to the user.

2005-07-16  Romain Francoise  <romain@orebokech.com>

	* nnfolder.el (nnfolder-save-buffer): Bind `copyright-update' to
	nil to avoid prompting and file modification if one of the
	messages at the top of the nnfolder file contains a copyright
	notice.
	Update copyright notice.

	* gnus-uu.el (gnus-uu-save-article): Use `message-make-date'
	instead of `current-time-string' as the latter creates a time
	string that is not RFC 2822 compliant (it lacks the zone).
	Update copyright notice.

2005-07-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mml.el (mml-minibuffer-read-disposition): Don't use inline by default
	for text/rtf.  Display default in prompt.  Pass default for M-n.

	* mm-uu.el (mm-uu-copy-to-buffer): Use with-current-buffer.

2005-07-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-button-mailto): Remove
	save-selected-window-window hackery because it relies on
	save-selected-window internals.

2005-07-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page): Use gnus-end-of-window.
	(gnus-article-next-page-1): Use gnus-beginning-of-window.
	(gnus-article-prev-page): Ditto.

	* gnus-util.el (gnus-beginning-of-window): New function.
	(gnus-end-of-window): New function.

	* lpath.el: Bind header-line-format and scroll-margin for XEmacs.

2005-07-14  Hiroshi Fujishima  <hiroshi.fujishima@gmail.com>  (tiny change)

	* gnus-score.el (gnus-score-edit-all-score): Set
	gnus-score-edit-exit-function to gnus-score-edit-done and call
	gnus-message.

2005-07-14  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-button-mailto): Remove
	save-selected-window-window hackery because it relies on
	save-selected-window internals.

2005-07-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-salt.el (gnus-pick-mode): Remove the 5th arg of
	add-minor-mode.
	(gnus-binary-mode): Ditto.

	* gnus-topic.el (gnus-topic-mode): Ditto.

2005-07-08  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* gnus-art.el (gnus-article-next-page, gnus-article-next-page-1)
	(gnus-article-prev-page): Take scroll-margin into consideration.

2005-07-04  Lute Kamstra  <lute@gnu.org>

	Update FSF's address in GPL notices.

2005-07-04  Juanma Barranquero  <lekktu@gmail.com>

	* gnus.el (gnus-exit):
	* gnus-group.el (gnus-group-icons):
	* nnmail.el (nnmail-prepare): Fix typos in docstrings.

	* gnus-nocem.el (gnus-nocem):
	* message.el (message-various, message-buffers, message-sending)
	(message-interface, message-forwarding, message-insertion)
	(message-headers, message-news, message-mail):
	* pgg-gpg.el (pgg-gpg):
	* pgg-parse.el (pgg-parse):
	* pgg-pgp.el (pgg-pgp):
	* pgg-pgp5.el (pgg-pgp5):
	* pop3.el (pop3): Finish `defgroup' description with period.

2005-07-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Improve the efficiency.
	(article-display-x-face): Ditto; remove grey x-face stuff.

2005-06-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Correct the position in
	which Faces are inserted.

2005-06-29  Didier Verna  <didier@xemacs.org>

	* gnus-art.el (article-display-face): Display faces in correct
	order.

2005-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-nocem.el (gnus-nocem-verifyer): Default to pgg-verify.
	(gnus-fill-real-hashtb): Use hash table instead of obarray.
	(gnus-nocem-check-article): Fetch the Type header.
	(gnus-nocem-message-wanted-p): Fix the way to examine types.
	(gnus-nocem-verify-issuer): Use functionp instead of fboundp.
	(gnus-nocem-enter-article): Use hash tables rather than obarrays;
	make sure gnus-nocem-hashtb is initialized.
	(gnus-nocem-alist-to-hashtb): Use hash table instead of obarray.
	(gnus-nocem-unwanted-article-p): Ditto.

	* pgg.el (pgg-verify): Return the verification result.

2005-06-27  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-mime-copy-part): Check whether coding-system
	is ascii.

2005-06-24  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-article-mode): Set `nobreak-char-display', not
	`show-nonbreak-escape'.

2005-06-23  Lute Kamstra  <lute@gnu.org>

	* gnus-art.el (gnus-article-mode): Use kill-all-local-variables.

	* dig.el (dig-mode):
	* smime.el (smime-mode): Use gnus-run-mode-hooks.

2005-06-21  Juanma Barranquero  <lekktu@gmail.com>

	* nnimap.el (nnimap-split-download-body): Fix spellings.

2005-06-16  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-article-encrypt-body):
	* gnus-cus.el (gnus-score-customize):
	* mm-extern.el (mm-extern-local-file, mm-inline-external-body):
	* pop3.el (pop3-user): Don't use `format' on `error' arguments.

2005-06-16  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* smime.el (smime-cert-by-ldap-1): Detect PEM format without
	header by looking for magic "MII" at the beginnig.

2005-06-16  Miles Bader  <miles@gnu.org>

	* gnus-xmas.el (gnus-xmas-group-startup-message):
	Use renamed gnus-splash face.

	* assistant.el (assistant-field): Remove "-face" suffix from face name.
	(assistant-field-face): New backward-compatibility alias for renamed
	face.
	(assistant-render-text): Use renamed assistant-field face.

	* spam.el (spam): Remove "-face" suffix from face name.
	(spam-face): New backward-compatibility alias for renamed face.
	(spam-face, spam-initialize): Use renamed spam face.

	* message.el (message-header-to, message-header-cc)
	(message-header-subject, message-header-newsgroups)
	(message-header-other, message-header-name)
	(message-header-xheader, message-separator, message-cited-text)
	(message-mml): Remove "-face" suffix from face names.
	(message-header-to-face, message-header-cc-face)
	(message-header-subject-face, message-header-newsgroups-face)
	(message-header-other-face, message-header-name-face)
	(message-header-xheader-face, message-separator-face)
	(message-cited-text-face, message-mml-face):
	New backward-compatibility aliases for renamed faces.
	(message-font-lock-keywords): Use renamed message faces.

	* sieve-mode.el (sieve-control-commands, sieve-action-commands)
	(sieve-test-commands, sieve-tagged-arguments):
	Remove "-face" suffix from face names.
	(sieve-control-commands-face, sieve-action-commands-face)
	(sieve-test-commands-face, sieve-tagged-arguments-face):
	New backward-compatibility aliases for renamed faces.
	(sieve-control-commands-face, sieve-action-commands-face)
	(sieve-test-commands-face, sieve-tagged-arguments-face):
	Use renamed sieve faces.

	* gnus.el (gnus-group-news-1, gnus-group-news-1-empty)
	(gnus-group-news-2, gnus-group-news-2-empty, gnus-group-news-3)
	(gnus-group-news-3-empty, gnus-group-news-4)
	(gnus-group-news-4-empty, gnus-group-news-5)
	(gnus-group-news-5-empty, gnus-group-news-6)
	(gnus-group-news-6-empty, gnus-group-news-low)
	(gnus-group-news-low-empty, gnus-group-mail-1)
	(gnus-group-mail-1-empty, gnus-group-mail-2)
	(gnus-group-mail-2-empty, gnus-group-mail-3)
	(gnus-group-mail-3-empty, gnus-group-mail-low)
	(gnus-group-mail-low-empty, gnus-summary-selected)
	(gnus-summary-cancelled, gnus-summary-high-ticked)
	(gnus-summary-low-ticked, gnus-summary-normal-ticked)
	(gnus-summary-high-ancient, gnus-summary-low-ancient)
	(gnus-summary-normal-ancient, gnus-summary-high-undownloaded)
	(gnus-summary-low-undownloaded)
	(gnus-summary-normal-undownloaded, gnus-summary-high-unread)
	(gnus-summary-low-unread, gnus-summary-normal-unread)
	(gnus-summary-high-read, gnus-summary-low-read)
	(gnus-summary-normal-read, gnus-splash):
	Remove "-face" suffix from face names.
	(gnus-group-news-1-face, gnus-group-news-1-empty-face)
	(gnus-group-news-2-face, gnus-group-news-2-empty-face)
	(gnus-group-news-3-face, gnus-group-news-3-empty-face)
	(gnus-group-news-4-face, gnus-group-news-4-empty-face)
	(gnus-group-news-5-face, gnus-group-news-5-empty-face)
	(gnus-group-news-6-face, gnus-group-news-6-empty-face)
	(gnus-group-news-low-face, gnus-group-news-low-empty-face)
	(gnus-group-mail-1-face, gnus-group-mail-1-empty-face)
	(gnus-group-mail-2-face, gnus-group-mail-2-empty-face)
	(gnus-group-mail-3-face, gnus-group-mail-3-empty-face)
	(gnus-group-mail-low-face, gnus-group-mail-low-empty-face)
	(gnus-summary-selected-face, gnus-summary-cancelled-face)
	(gnus-summary-high-ticked-face, gnus-summary-low-ticked-face)
	(gnus-summary-normal-ticked-face)
	(gnus-summary-high-ancient-face, gnus-summary-low-ancient-face)
	(gnus-summary-normal-ancient-face)
	(gnus-summary-high-undownloaded-face)
	(gnus-summary-low-undownloaded-face)
	(gnus-summary-normal-undownloaded-face)
	(gnus-summary-high-unread-face, gnus-summary-low-unread-face)
	(gnus-summary-normal-unread-face, gnus-summary-high-read-face)
	(gnus-summary-low-read-face, gnus-summary-normal-read-face)
	(gnus-splash-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-group-startup-message): Use renamed gnus faces.

	* gnus-srvr.el (gnus-server-agent, gnus-server-opened)
	(gnus-server-closed, gnus-server-denied, gnus-server-offline)
	(gnus-server-agent): Remove "-face" suffix from face names.
	(gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face)
	(gnus-server-offline-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face)
	(gnus-server-offline-face): Use renamed gnus faces.

	* gnus-picon.el (gnus-picon-xbm, gnus-picon):
	Remove "-face" suffix from face names.
	(gnus-picon-xbm-face, gnus-picon-face):
	New backward-compatibility aliases for renamed faces.

	* gnus-cite.el (gnus-cite-attribution, gnus-cite-1, gnus-cite-2)
	(gnus-cite-3, gnus-cite-4, gnus-cite-5, gnus-cite-6)
	(gnus-cite-7, gnus-cite-8, gnus-cite-9, gnus-cite-10)
	(gnus-cite-11): Remove "-face" suffix from face names.
	(gnus-cite-attribution-face, gnus-cite-face-1, gnus-cite-face-2)
	(gnus-cite-face-3, gnus-cite-face-4, gnus-cite-face-5)
	(gnus-cite-face-6, gnus-cite-face-7, gnus-cite-face-8)
	(gnus-cite-face-9, gnus-cite-face-10, gnus-cite-face-11):
	New backward-compatibility aliases for renamed faces.
	(gnus-cite-attribution-face, gnus-cite-face-list)
	(gnus-article-boring-faces): Use renamed gnus faces.

	* gnus-art.el (gnus-signature, gnus-header-from)
	(gnus-header-subject, gnus-header-newsgroups, gnus-header-name)
	(gnus-header-content): Remove "-face" suffix from face names.
	(gnus-signature-face, gnus-header-from-face)
	(gnus-header-subject-face, gnus-header-newsgroups-face)
	(gnus-header-name-face, gnus-header-content-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-signature-face, gnus-header-face-alist): Use renamed gnus faces.

	* gnus-sum.el (gnus-summary-selected-face)
	(gnus-summary-highlight): Use renamed gnus faces.
	* gnus-group.el (gnus-group-highlight): Likewise.

2005-06-14  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-sieve.el (gnus-sieve-article-add-rule):
	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days):
	* spam-stat.el (spam-stat-buffer-change-to-spam)
	(spam-stat-buffer-change-to-non-spam): Follow error conventions.

	* message.el (message-is-yours-p):
	* gnus-sum.el (gnus-auto-select-subject): Fix quoting in docstring.

2005-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text): Withdraw the last change.

2005-06-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text): Turn off adaptive-fill-mode while
	executing enriched-decode.

2005-06-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-find-buffer-file-coding-system): Don't examine
	charset of tar files.

2005-06-04  Luc Teirlinck  <teirllm@auburn.edu>

	* gnus-art.el (article-update-date-lapsed): Use `save-match-data'.

2005-06-04  Lute Kamstra  <lute@gnu.org>

	* nnfolder.el (nnfolder-read-folder): Make sure that undo
	information is never recorded.

2005-06-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-emphasis-alist): Disable the strikethru thingy.

2005-06-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* pop3.el (pop3-apop): Run md5 in the binary mode.

	* starttls.el (starttls-set-process-query-on-exit-flag):
	Use eval-and-compile.

2005-05-31  Simon Josefsson  <jas@extundo.com>

	* smime.el (smime-replace-in-string): Define.
	(smime-cert-by-ldap-1): Use it.

2005-05-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-x-face): Replace
	process-kill-without-query by gnus-set-process-query-on-exit-flag.

	* gnus-util.el (gnus-set-process-query-on-exit-flag): Alias to
	set-process-query-on-exit-flag or process-kill-without-query.

	* html2text.el (html2text-fix-paragraphs): Use `while - re-search'
	loop instead of replace-regexp.

	* imap.el (imap-ssl-open): Use set-process-query-on-exit-flag
	instead of process-kill-without-query if it is available.

	* lpath.el: Fbind ldap-search-entries.

	* mm-util.el (mm-insert-file-contents): Bind find-file-hook
	instead of find-file-hooks if it is available.

	* mml1991.el: Bind pgg-default-user-id when compiling.

	* mml2015.el: Bind pgg-default-user-id when compiling.

	* nndraft.el (nndraft-request-associate-buffer):
	Use write-contents-functions instead of write-contents-hooks if it is
	available.

	* nnheader.el (nnheader-find-file-noselect): Bind find-file-hook
	instead of find-file-hooks if it is available.

	* nntp.el (nntp-open-connection): Replace
	process-kill-without-query by gnus-set-process-query-on-exit-flag.
	(nntp-open-ssl-stream): Ditto.
	(nntp-open-tls-stream): Ditto.

	* starttls.el (starttls-set-process-query-on-exit-flag): Alias to
	set-process-query-on-exit-flag or process-kill-without-query.
	(starttls-open-stream-gnutls): Use it instead of
	process-kill-without-query.
	(starttls-open-stream): Ditto.

2005-05-31  Ulf Stegemann <ulf@zeitform.de>  (tiny change)

	* smime.el (smime-cert-by-ldap-1): Don't use
	replace-regexp-in-string.

2005-05-31  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* smime-ldap.el (smime-ldap-search): Add compatibility for XEmacs.

	* smime.el (smime-cert-by-ldap-1): Handle certificates distributed
	in PEM format. Adjust to the XEmacs compability.

2005-05-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* encrypt.el (encrypt-xor-process-buffer): Replace `string-to-int'
	by `string-to-number'.
	* gnus-agent.el (gnus-agent-regenerate-group)
	(gnus-agent-fetch-articles): Ditto.
	* gnus-art.el (gnus-button-fetch-group): Ditto.
	* gnus-cache.el (gnus-cache-generate-active)
	(gnus-cache-articles-in-group): Ditto.
	* gnus-group.el (gnus-group-set-current-level)
	(gnus-group-insert-group-line): Ditto.
	* gnus-score.el (gnus-score-set-expunge-below)
	(gnus-score-set-mark-below, gnus-summary-score-effect)
	(gnus-summary-score-entry): Ditto.
	* gnus-soup.el (gnus-soup-send-packet, gnus-soup-parse-areas)
	(gnus-soup-pack): Ditto.
	* gnus-spec.el (gnus-xmas-format): Ditto.
	* gnus-start.el (gnus-newsrc-to-gnus-format): Ditto.
	* gnus-sum.el (gnus-create-xref-hashtb): Ditto.
	* gnus-uu.el (gnus-uu-expand-numbers): Ditto.
	* nnbabyl.el (nnbabyl-article-group-number): Ditto.
	* nndb.el (nndb-get-remote-expire-response): Ditto.
	* nndiary.el (nndiary-parse-schedule-value)
	(nndiary-string-to-number, nndiary-request-replace-article)
	(nndiary-request-article): Ditto.
	* nndoc.el (nndoc-rnews-body-end, nndoc-mbox-body-end): Ditto.
	* nndraft.el (nndraft-articles, nndraft-request-group): Ditto.
	* nneething.el (nneething-make-head): Ditto.
	* nnfolder.el (nnfolder-request-article)
	(nnfolder-retrieve-headers): Ditto.
	* nnheader.el (nnheader-file-to-number): Ditto.
	* nnkiboze.el (nnkiboze-request-article): Ditto.
	* nnmail.el (nnmail-process-unix-mail-format)
	(nnmail-process-babyl-mail-format): Ditto.
	* nnmbox.el (nnmbox-read-mbox, nnmbox-article-group-number): Ditto.
	* nnmh.el (nnmh-update-gnus-unreads, nnmh-active-number)
	(nnmh-request-create-group, nnmh-request-list-1)
	(nnmh-request-group, nnmh-request-article): Ditto.
	* nnml.el (nnml-request-replace-article, nnml-request-article): Ditto.
	* nnrss.el (nnrss-find-rss-via-syndic8): Ditto.
	* nnsoup.el (nnsoup-make-active): Ditto.
	* nnspool.el (nnspool-find-id, nnspool-request-group): Ditto.
	* nntp.el (nntp-find-group-and-number)
	(nntp-retrieve-headers-with-xover): Ditto.
	* pgg-gpg.el (pgg-gpg-snarf-keys-region): Ditto.
	* pgg-parse.el (pgg-read-body, pgg-read-bytes)
	(pgg-format-key-identifier): Ditto.
	* pop3.el (pop3-last, pop3-stat): Ditto.
	* qp.el (quoted-printable-decode-region): Ditto.

	* spam-report.el (spam-report-url-ping-mm-url): Use format instead
	of concat.

2005-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-category-mode): Use gnus-run-mode-hooks.

	* gnus-art.el (gnus-article-mode): Use gnus-run-mode-hooks.

	* gnus-cus.el (gnus-custom-mode): Use gnus-run-mode-hooks.

	* gnus-eform.el (gnus-edit-form-mode): Use gnus-run-mode-hooks.

	* gnus-group.el (gnus-group-mode): Use gnus-run-mode-hooks.

	* gnus-kill.el (gnus-kill-file-mode): Use gnus-run-mode-hooks.

	* gnus-salt.el (gnus-tree-mode): Use gnus-run-mode-hooks.
	(gnus-carpal-mode): Ditto.

	* gnus-srvr.el (gnus-server-mode): Use gnus-run-mode-hooks.
	(gnus-browse-mode): Ditto.

	* gnus-sum.el (gnus-summary-mode): Use gnus-run-mode-hooks.

	* gnus-util.el (gnus-run-mode-hooks): Save current buffer.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* gnus-cite.el (gnus-cite-add-face): Set overlay's evaporate property.

2005-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-run-mode-hooks): New function.

	* score-mode.el (gnus-score-mode): Use gnus-run-mode-hooks.

	* dgnushack.el: Advise byte-optimize-form-code-walker to avoid the
	``...called for effect'' warnings for Emacs 21.4 as well as 21.3.

2005-05-26  Luc Teirlinck  <teirllm@auburn.edu>

	* gnus-agent.el (gnus-agent-make-mode-line-string):
	Use mode-line-highlight as mouse-face.

2005-05-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock): Change the parent group to news.

	* deuglify.el (gnus-outlook-deuglify): Add :group.

	* dig.el (dig): Add :group.

	* dns-mode.el (dns-mode): Add :group.

	* encrypt.el (encrypt): Add :group.

	* gnus-cite.el (gnus-cite-attribution-face): Add :group.
	(gnus-cite-face-1, gnus-cite-face-2, gnus-cite-face-3): Ditto.
	(gnus-cite-face-4, gnus-cite-face-5, gnus-cite-face-6): Ditto.
	(gnus-cite-face-7, gnus-cite-face-8, gnus-cite-face-9): Ditto.
	(gnus-cite-face-10, gnus-cite-face-11): Ditto.

	* gnus-diary.el (gnus-diary): Add :group.

	* gnus.el (gnus-group-news-1-face): Add :group.
	(gnus-group-news-1-empty-face): Ditto.
	(gnus-group-news-2-face, gnus-group-news-2-empty-face): Ditto.
	(gnus-group-news-3-face, gnus-group-news-3-empty-face): Ditto.
	(gnus-group-news-4-face, gnus-group-news-4-empty-face): Ditto.
	(gnus-group-news-5-face, gnus-group-news-5-empty-face): Ditto.
	(gnus-group-news-6-face, gnus-group-news-6-empty-face): Ditto.
	(gnus-group-news-low-face, gnus-group-news-low-empty-face): Ditto.
	(gnus-group-mail-1-face, gnus-group-mail-1-empty-face): Ditto.
	(gnus-group-mail-2-face, gnus-group-mail-2-empty-face): Ditto.
	(gnus-group-mail-3-face, gnus-group-mail-3-empty-face): Ditto.
	(gnus-group-mail-low-face, gnus-group-mail-low-empty-face): Ditto.
	(gnus-summary-selected-face, gnus-summary-cancelled-face): Ditto.
	(gnus-summary-high-ticked-face): Ditto.
	(gnus-summary-low-ticked-face): Ditto.
	(gnus-summary-normal-ticked-face): Ditto.
	(gnus-summary-high-ancient-face): Ditto.
	(gnus-summary-low-ancient-face): Ditto.
	(gnus-summary-normal-ancient-face): Ditto.
	(gnus-summary-high-undownloaded-face): Ditto.
	(gnus-summary-low-undownloaded-face): Ditto.
	(gnus-summary-normal-undownloaded-face): Ditto.
	(gnus-summary-high-unread-face): Ditto.
	(gnus-summary-low-unread-face): Ditto.
	(gnus-summary-normal-unread-face): Ditto.
	(gnus-summary-high-read-face, gnus-summary-low-read-face): Ditto.
	(gnus-summary-normal-read-face, gnus-splash-face): Ditto.

	* hashcash.el (hashcash): New custom group.
	(hashcash-default-payment): Add :group.
	(hashcash-payment-alist): Ditto.
	(hashcash-default-accept-payment): Ditto.
	(hashcash-accept-resources): Ditto.
	(hashcash-path): Ditto.
	(hashcash-extra-generate-parameters): Ditto.
	(hashcash-double-spend-database): Ditto.
	(hashcash-in-news): Ditto.

	* message.el (message-minibuffer-local-map): Add :group.

	* netrc.el (netrc): Add :group.

	* sieve-manage.el (sieve-manage-log): Add :group.
	(sieve-manage-default-user): Diito.
	(sieve-manage-server-eol, sieve-manage-client-eol): Ditto.
	(sieve-manage-streams, sieve-manage-stream-alist): Ditto.
	(sieve-manage-authenticators): Ditto.
	(sieve-manage-authenticator-alist): Ditto.
	(sieve-manage-default-port): Ditto.

	* sieve-mode.el (sieve-control-commands-face): Add :group.
	(sieve-action-commands-face): Ditto.
	(sieve-test-commands-face): Ditto.
	(sieve-tagged-arguments-face): Ditto.

	* smime.el (smime): Add :group.

	* spam-report.el (spam-report): Add :group.

	* spam.el (spam, spam-face): Add :group.

2005-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nntp.el (nntp-next-result-arrived-p): Some news servers may
	return \n.\n.\n at the end of articles.  Protect against that.
	(nntp-with-open-group): Allow debugging.

	* nnheader.el (mail-header-set-extra): Make into a function
	because I just could't understand how to quote the list properly.

	* dns.el (query-dns-cached): New function.

2005-05-26  Lute Kamstra  <lute@gnu.org>

	* score-mode.el (gnus-score-mode): Use run-mode-hooks.

2005-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload mail-extract-address-components for XEmacs.

	* gnus-art.el: Don't autoload mail-extract-address-components.

	* gnus.el: Remove duplicated autoload for message-y-or-n-p; use
	eval-and-compile to evaluate it.

	* hashcash.el: Don't autoload executable-find.

	* nndb.el: Don't declare the nndb back end two or more times; don't
	autoload news-reply-mode, news-setup, cancel-timer and telnet.

	* nntp.el: Autoload format-spec instead of format; use
	eval-and-compile to evaluate autoload forms.

2005-05-09  Georg C. F. Greve <greve@gnu.org>  (tiny change)

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Fix PIN caching.

2005-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2005-05-01 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.3 is released.

2005-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* lpath.el (featurep): Bind show-nonbreak-escape.

2005-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): Disable undo.

2005-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-date-ut): Don't delete X-Sent header when
	gnus-article-date-lapsed-new-header is t if date timer is active;
	skip headers in which the original date value is empty.
	(gnus-article-save-original-date): Redefine it as a macro.
	(gnus-display-mime): Use it.

2005-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-date-ut): Support converting date in
	forwarded parts as well.
	(gnus-article-save-original-date): New function.
	(gnus-display-mime): Use it.

2005-04-22  David Hansen  <david.hansen@physik.fu-berlin.de>

	* nnrss.el (nnrss-check-group, nnrss-request-article): Support the
	enclosure element of <item>.

2005-04-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-kill-buffer-query): Renamed from
	`message-kill-buffer-query-if-modified'.  Added :version.

2005-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-preview): Bind gnus-message-buffer while setting the
	window layout.

2005-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el: Autoload dnd when compiling.

2005-04-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-mode, mml-dnd-attach-file): Use dnd-* instead of
	x-dnd-*.

2005-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* qp.el (quoted-printable-encode-region): Save excursion.

2005-04-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* message.el (message-kill-buffer-query-if-modified): new variable
	so the user can kill a modified message buffer quickly
	(message-kill-buffer): use it.

2005-04-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind display-time-event-handler; don't fbind
	string-to-multibyte.

	* qp.el (quoted-printable-encode-region): Use mm-string-to-multibyte.

2005-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-node-text): Replace CRLFs (which might be
	contained in text because xml.el decodes entities) with LFs.

2005-04-11  Lute Kamstra  <lute@gnu.org>

	* nnimap.el (nnimap-date-days-ago): Handle byte-compiler warnings
	differently.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-util.el (mm-detect-coding-region): Typo.

2005-04-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Fix misplaced parens.

2005-04-06  D Goel  <deego@gnufans.org>

	* spam-stat.el (spam-stat-score-buffer): Add a call to a
	user-function allow user modifications of the scores.
	(spam-stat-score-buffer-user): New function, to allow
	user-computed modifications to the score.
	(spam-stat-score-buffer-user-functions): list of additional
	scoring functions
	(spam-stat-error-holder): global temporary error holder
	(spam-stat-split-fancy): use the new `spam-stat-error-holder'
	variable

2005-04-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-clean-empty-function)
	(gnus-registry-trim, gnus-registry-fetch-groups)
	(gnus-registry-delete-group): now groups that match
	`gnus-registry-ignored-groups' will be removed from the registry
	entries, not just ignored for splitting.  This helps clean up the
	registry.  Also, `gnus-registry-fetch-groups' is a convenient way
	to get all the groups a message ID is in.

	* spam-stat.el (spam-stat-split-fancy-spam-threshold)
	(spam-stat-split-fancy): changed "threshhold" to "threshold"
	(spam-stat-score-buffer-user-functions): added :number custom type

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-p): Don't return binary for the nil
	argument in XEmacs.

	* nnrss.el (nnrss-compatible-encoding-alist): New variable.
	(nnrss-request-group): Decode group name first.
	(nnrss-request-article): Make a text/plain article if mml-to-mime
	failed.
	(nnrss-get-encoding): Return a compatible encoding according to
	nnrss-compatible-encoding-alist.
	(nnrss-find-el): Use consp instead of listp.
	(nnrss-opml-export, nnrss-order-hrefs, nnrss-find-el): Use dolist.

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* time-date.el (time-to-seconds): Don't use the #xhhhh syntax
	which Emacs 20 doesn't support.
	(seconds-to-time, days-to-time, time-subtract, time-add): Ditto.

2005-04-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnimap.el (nnimap-date-days-ago): Add defvars in order to
	silence the byte compiler inside the defun

	* gnus-demon.el (parse-time-string): Add autoload.

	* gnus-delay.el (parse-time-string): Add autoload.

	* gnus-art.el (parse-time-string): Add autoload.

	* nnultimate.el (parse-time): Require for `parse-time-string'.

2005-03-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): Update :version.

	* gnus-score.el (gnus-adaptive-pretty-print): Ditto.

	* smime.el (smime-ldap-host-list): Add :version.

2005-03-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-srvr.el (gnus-browse-select-group): Add NUMBER argument and
	pass it to `gnus-browse-read-group'.
	(gnus-browse-read-group): Add NUMBER argument and pass it to
	`gnus-group-read-ephemeral-group'.

	* gnus-group.el (gnus-group-read-ephemeral-group): Add NUMBER
	argument and pass it to `gnus-group-read-group'.

2005-03-19  Aidan Kehoe  <kehoea@parhasard.net>

	* mm-util.el (mm-xemacs-find-mime-charset): Only call
	mm-xemacs-find-mime-charset-1 if we have the mule feature
	available at runtime.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* nnmaildir.el: Replace `illegal' with `invalid'.

2005-03-23  Lute Kamstra  <lute@gnu.org>

	* time-date.el: Add comment on time value formats.
	Don't require parse-time.
	(with-decoded-time-value): New macro.
	(encode-time-value): New function.
	(time-to-seconds, time-less-p, time-subtract, time-add): Use them.
	(days-to-time): Return a valid time value when arg is huge.
	(time-since): Use time-subtract.
	(time-to-number-of-days): Use time-to-seconds.

2005-03-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-start.el (gnus-display-time-event-handler):
	Check display-time-timer at runtime rather than only at load time
	in case display-time-mode is turned off in the mean time.

2005-03-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnimap.el (nnimap-open-connection): Print which authinfo file is
	used.

	* nneething.el (nneething-map-file-directory): Derive from
	`gnus-directory'.

	* gnus-art.el (gnus-header-button-alist): Use `gnus-msg-mail' for
	the To/Cc button.

2005-03-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmaildir.el (nnmaildir-request-accept-article):
	Use `nnheader-cancel-timer' for compatibility with current XEmacs.

2005-03-13  Andrey Slusar  <anrays@gmail.com>  (tiny change)

	* gnus-async.el: Require timer-funcs at compile time when in
	XEmacs for `run-with-idle-timer'.

2005-03-13  Andrey Slusar  <anrays@gmail.com>  (tiny change)

	* gnus.el: Don't try and mark `gnus-agent-save-groups' as an
	autoloaded function.

2005-03-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-retrieve-headers-from-server): Fix last change.

2005-03-10  Arne J,Ax(Brgensen  <arne@arnested.dk>  (tiny change)

	* nnimap.el (nnimap-retrieve-headers-from-server): Fix off-by-one flaw.

2005-03-09  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-confirm-mail-reply-to-news): Add
	gnus-expert-user to default.

2005-03-08  Juergen Kreileder  <jk@blackdown.de>  (tiny change)

	* nnimap.el (nnimap-open-server): Ditto.

	* imap.el (imap-authenticate): Fix typo.

2005-03-08  Bjorn Solberg  <bjorn_ding@hekneby.org>  (tiny change)

	* nnimap.el (nnimap-retrieve-headers-from-server): Sort NOV
	buffer (since IMAP server might return FETCH response out of
	order, and the nntp buffer must be sorted).

2005-03-06  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-start.el (gnus-convert-old-newsrc): Fixed numeric
	comparison on string.

	* gnus-agent.el (gnus-agent-long-article,
	gnus-agent-short-article, gnus-agent-score): Renamed category
	keywords to match gnus-cus.
	(gnus-agent-summary-fetch-series): Modified to protect against
	gnus-agent-summary-fetch-group clearing processable flags.
	(gnus-agent-synchronize-group-flags): Update live group buffer as
	synchronization may occur due to the user toggle the plugged
	status.
	(gnus-agent-fetch-group-1): Clear downloadable flag when article
	successfully downloaded.
	(gnus-agent-expire-group-1): Avoid using markers when the overview
	is in ascending order; greatly improves performance.
	(gnus-agent-regenerate-group): Use
	gnus-agent-synchronize-group-flags to reset read status in both
	gnus and server.
	(gnus-agent-update-files-total-fetched-for): Fixed initial size.

2005-03-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Don't autoload former message-utils variables.
	(message-strip-subject-trailing-was): Change doc string.

	* nnweb.el: Fixes for `gnus-group-make-web-group'.
	(nnweb-type-definition): Don't add "hl=en" in `address'.  Add `base'.
	(nnweb-google-search): Add "hl=en" here.
	(nnweb-google-parse-1, nnweb-google-create-mapping):
	Don't hardcode URL.

2005-03-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-get-reply-headers, message-followup):
	Mention related variables `message-use-followup-to' and
	`message-use-mail-followup-to', in the information buffer.

	* nnweb.el (nnweb-type-definition): Use groups.google.de instead
	of broken groups(-beta).google.com.

2005-03-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-move-article): pass move-is-internal
	parameter to invoked gnus-request-move-article; remove the
	redundant gnus-sum-hint-move-is-internal variable; apply the marks
	all at once instead of once per article
	(gnus-summary-remove-process-mark): accept a list of articles as
	well as a single article for processing

	* gnus-int.el (gnus-request-move-article): add move-is-internal parameter

	* nnml.el (nnml-request-move-article): add move-is-internal parameter

	* nnmh.el (nnmh-request-move-article): add move-is-internal parameter

	* nnmbox.el (nnmbox-request-move-article): add move-is-internal parameter

	* nnmaildir.el (nnmaildir-request-move-article): add move-is-internal parameter

	* nnimap.el (nnimap-request-move-article): add move-is-internal
	parameter and remove the gnus-sum-hint-move-is-internal variable

	* nnfolder.el (nnfolder-request-move-article): add move-is-internal parameter

	* nndraft.el (nndraft-request-move-article): add move-is-internal parameter

	* nndiary.el (nndiary-request-move-article): add move-is-internal parameter

	* nndb.el (nndb-request-move-article): add move-is-internal parameter

	* nnbabyl.el (nnbabyl-request-move-article): add move-is-internal parameter

	* nnagent.el (nnagent-request-move-article): add move-is-internal parameter

2005-03-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Undo last change and fix it in
	a more conservative way.

2005-02-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Move point after displaying the
	buffer, so it moves the window's cursor.

2005-02-26  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* mm-decode.el (mm-dissect-buffer): Pass the from field on to
	`mm-dissect-multipart' and receive the from field as an (optional)
	argument from `mm-dissect-multipart'.
	(mm-dissect-multipart): Receive the from field as an argument and
	pass it on when we call `mm-dissect-buffer' on MIME parts.
	Fixes verification/decryption of signed/encrypted MIME parts.

2005-02-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-move-article): set
	gnus-sum-hint-move-is-internal for gnus-request-move-article and
	whatever it calls (right now, only nnimap-request-move article
	respects it)

	* nnimap.el (nnimap-request-move-article): when
	gnus-sum-hint-move-is-internal is set, don't do the extra
	nnimap-request-article

2005-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnheader.el (nnheader-find-file-noselect): Add doc string.

	* nnfolder.el (nnfolder-read-folder): Use RAWFILE for
	`nnheader-find-file-noselect' to avoid `large-file-warning-threshold'.

	* gnus-sum.el (gnus-summary-caesar-message):
	Apply `gnus-treat-article' after rotation.

	* gnus-group.el (gnus-group-clear-data): Mention process/prefix in
	doc string.

2005-02-22  Simon Josefsson  <jas@extundo.com>

	* encrypt.el (encrypt-password-cache-expiry): Remove (use
	`password-cache-expiry' instead).  Reported by Arne J,Ax(Brgensen
	<arne@arnested.dk>.
	(encrypt): Add password-cache and password-cache-expiry as group
	members.

2005-02-22  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* smime.el (smime-ldap-host-list): Doc fix.
	(smime-ask-passphrase): Use `password-read-and-add' to read (and
	cache) password.
	(smime-sign-region): Use it.
	(smime-decrypt-region): Use it.
	(smime-sign-buffer): Signal an error if `smime-sign-region' fails.
	(smime-encrypt-buffer): Signal an error if `smime-encrypt-region'
	fails.
	(smime-cert-by-ldap-1): Use `base64-encode-string' to convert
	certificate from DER to PEM format rather than calling openssl.

	* mml-smime.el (mml-smime-encrypt-query): Remove obsolete comment.

	* mml-sec.el (mml-secure-message): Insert keyfile/certfile tags
	for signing/encryption.

	* mml.el (mml-parse-1): Use them.

2005-02-21  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* nnrss.el (nnrss-verbose): Removed.
	(nnrss-request-group): Use `nnheader-message' instead.

2005-02-19  Mark Plaksin  <happy@usg.edu>  (tiny change)

	* nnrss.el (nnrss-verbose): New variable.
	(nnrss-request-group): Make it say nnrss is requesting a group.

2005-02-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-parse-news-url, gnus-button-handle-news):
	Handle news URL with given port correctly.

2005-02-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-copy-article-buffer): Quote decoded words
	containing special characters.

	* gnus-sum.el (gnus-summary-edit-article): Ditto.

	* mml.el (mime-to-mml): Ditto.

	* rfc2047.el (rfc2047-encode-parameter): Use ietf-drums-tspecials.
	(rfc2047-quote-decoded-words-containing-tspecials): New variable.
	(rfc2047-decode-region): Quote decoded words containing special
	characters when rfc2047-quote-decoded-words-containing-tspecials
	is non-nil.

2005-02-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-delete-group): Minor bug fix.

	* gnus.el (gnus-install-group-spam-parameters): Doc fix.

2005-02-15  Simon Josefsson  <jas@extundo.com>

	* nnimap.el (nnimap-debug): Doc fix.

	* imap.el (imap-debug): Doc fix.

2005-02-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el: Avoid "Recursive load suspected" error in Emacs 21.1.

2005-02-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus.el (spam-contents): improve docs for spam-contents
	parameter in its variable incarnation

2005-02-14  Simon Josefsson  <jas@extundo.com>

	* smime-ldap.el: Use require instead of load-library for ldap.
	(smime-ldap-search): Indent.
	(smime-ldap-search-internal): Shorten line.

	* smime.el (smime-cert-by-dns): Add doc-string.
	(smime-cert-by-ldap-1): Indent.

	* mml-smime.el (mml-smime-get-ldap-cert): Renamed from
	mml-smime-get-dns-ldap.
	(mml-smime-encrypt-query): Use new function.  Default to ldap.

2005-02-14  Arne J,Ax(Brgensen  <arne@arnested.dk>

	* smime.el: Require smime-ldap.
	(smime-ldap-host-list): New variable.
	(smime-cert-by-ldap, smime-cert-by-ldap-1): New functions.

	* mml-smime.el (mml-smime-encrypt-query): New function.
	(mml-smime-encrypt-query): Use it.

	* smime-ldap.el: New file.

2005-02-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el: Remove garbage made while merging the Emacs trunk.

2005-02-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-doc-group): Mention prefix
	argument in doc string.  Make query for type more clear.

2005-02-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-group-startup-message): Search for gnus images in
	etc/images/gnus.
	* mm-util.el (mm-find-charset-region): Likewise.
	* smiley.el (smiley-data-directory): Search for smilies in
	etc/images/smilies.

2005-02-09  Kim F. Storm  <storm@cua.dk>

	Change Emacs release version from 21.4 to 22.1 throughout.
	Change Emacs development version from 21.3.50 to 22.0.50.

2005-02-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-copy-part): Don't decode compressed parts.

	* mm-util.el (mm-coding-system-to-mime-charset): Make it work with
	non-Mule XEmacs as well.
	(mm-decompress-buffer): Signal an error intentionally if it does
	not decompress compressed data because auto-compression-mode is
	disabled.

2005-02-11  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-delete-group): small bug leaves
	an ID in the registry even if it has no groups

2005-02-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-jka-compr-maybe-uncompress): Remove;
	merge it into mm-decompress-buffer.
	(gnus-mime-copy-part): Use the MIME part charset, the value which
	a user specified or gnus-newsgroup-charset for decoding, like
	gnus-mime-inline-part does; set buffer-file-coding-system to tell
	save-buffer what was used.  Suggested by Kevin Ryde
	<user42@zip.com.au>.
	(gnus-mime-inline-part): Allow the name parameter as well as the
	filename parameter; force decompressing of compressed data; always
	display contents being not decoded as unibyte.

	* mm-view.el (mm-display-inline-fontify): Allow the name parameter
	as well as the filename parameter.

	* mm-util.el (mm-decompress-buffer): Merge
	gnus-mime-jka-compr-maybe-uncompress.
	(mm-find-buffer-file-coding-system): Doc fix; force decompressing
	of compressed data.

2005-02-08  Simon Josefsson  <jas@extundo.com>

	* imap.el (imap-log): Doc fix.

2005-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-inline-part): Decode parts according to
	the coding cookies; decompress compressed parts.

	* mml.el (mml-generate-mime-1): Add the charaset parameter according
	to the value which a user specified manually or the coding cookie.

	* mm-util.el (mm-string-to-multibyte): New function.
	(mm-detect-mime-charset-region): Work with Emacs 22 as well.
	(mm-coding-system-to-mime-charset): New function.
	(mm-decompress-buffer): New function.
	(mm-find-buffer-file-coding-system): New function.

	* mm-view.el (mm-insert-inline): Make sure a part ends with a newline.
	(mm-display-inline-fontify): Rewrite for decoding and decompressing
	parts.

2005-02-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mm-view.el (mm-display-inline-fontify): Decode a part according
	to the charset parameter.

2005-02-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-inline-part): Show the raw contents if a
	prefix arg is neither nil nor a number, as info specifies.

2005-02-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-marks-changed-p): Use time-less-p to compare the
	timestamps.

2005-02-02  Jari Aalto  <jari.aalto@cante.net>

	* gnus-sum.el (gnus-list-of-unread-articles): Improve active
	groups error checking and notify user.

2005-02-02  Jari Aalto  <jari.aalto@poboxes.com>

	* message.el (message-send-mail-function): Check existence of
	sendmail-program first before using default value
	`message-send-mail-with-sendmail'.  Otherwise use more generic
	`smtpmail-send-it'.

2005-02-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-request-update-info): Always return nil.

2005-01-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-article-mode): Turn off the "\ " non-break space.

2005-01-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-beginning-of-line): Change the behavior when
	invoked between BOL and : so that it first moves backward.

2005-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-setup-buffer): Kill and re-create the
	article buffer when editing of the article is discarded.
	(gnus-article-prepare): Revert.

2005-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-prepare):
	Remove message-strip-forbidden-properties from the local hook.

2005-01-27  Simon Josefsson  <jas@extundo.com>

	* password.el (password-cache-add): Only start one timer per key.
	Reported by Derek Atkins <warlord@MIT.EDU>.

2005-01-26  Steve Youngs  <steve@sxemacs.org>

	* run-at-time.el: Removed.  It is no longer needed as
	timer-funcs.el in the xemacs-base package has a working version of
	`run-at-time'.

	* gnus-xmas.el: Require timer-funcs instead of run-at-time.

	* password.el: Require timer-funcs instead of run-at-time in
	XEmacs.
	Remove `password-run-at-time' macro.
	(password-cache-add): Use `run-at-time' instead of
	`password-run-at-time'.

	* nnheaderxm.el: Require timer-funcs instead of run-at-time.
	Remove `nnheader-cancel-function-timers' alias,
	`cancel-function-timers' exists in XEmacs in timer-funcs.

	* mail-source.el: Require timer-funcs instead of itimer in XEmacs
	for `run-with-idle-timer'.

	* gnus-demon.el: Require timer-funcs instead of itimer in XEmacs
	for `run-at-time'.

	* mm-url.el: Require timer-funcs at compile time when in XEmacs
	for `with-timeout'.

	* dgnushack.el: Autoload the correct `setenv' for SXEmacs which is
	the same as for XEmacs 21.4.
	No need to ignore `run-with-idle-timer', this function exists in
	XEmacs now in timer-funcs.el in the xemacs-base package.
	(dgnushack-compile): No need to delete
	run-at-time.el from the list of files to compile because it
	doesn't exist anymore.

2005-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-generate-mime-1): Convert string into unibyte when
	inserting " *mml*" buffer's contents into a unibyte temp buffer.

2005-01-24  Harald Meland  <harald.meland@usit.uio.no>  (tiny change)

	* mail-source.el (mail-source-fetch-imap): Search for ^From case
	sensitively.

2005-01-21  Derek Atkins  <warlord@MIT.EDU>  (tiny change)

	* pgg-pgp.el (pgg-pgp-decrypt-region): Use passphrase cache.

2005-01-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-insert-part): Switch the multibyteness of data
	which will be inserted according to the multibyteness of a buffer
	rather than the type of contents.  Suggested by ARISAWA Akihiro
	<ari@mbf.ocn.ne.jp>.

	* nnrss.el (nnrss-find-el): Check carefully whether there's a list
	of string which old xml.el may return rather than a string.

2005-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-idna-message): Silence byte compiler.

2005-01-16  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-summary-idna-message): Fail gracefully if
	idn/idna.el isn't available.
	(gnus-summary-idna-message): Doc fix.  Suggested by Michael Cook
	<michael@waxrat.com>.

	* hashcash.el: Remove non-FSF copyright header.

	* hashcash.el (hashcash-extra-generate-parameters): New variable.
	(hashcash-generate-payment): Use it.
	(hashcash-generate-payment-async): Use it.

2005-01-15  Simon Josefsson  <jas@extundo.com>

	* message.el (message-idna-to-ascii-rhs): Decode Reply-To too.
	Suggested by Raymond Scholz <ray-2005@zonix.de>.

	* gnus-sum.el (gnus-summary-wash-map): Bind "W i" to
	gnus-summary-idna-message.
	(gnus-summary-make-menu-bar): Add De-IDNA menu entry.
	(gnus-summary-idna-message): New function.

2005-01-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-confirm-mail-reply-to-news): Change default to
	gnus-novice-user.

2005-01-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-delete-group): Delete entries in
	nnrss-group-alist as well.
	(nnrss-save-server-data): Insert newline.

2005-01-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-user-agent): Use list of symbols instead of
	symbols.  Display full version number for (S)XEmacs.  Optionally
	display (S)XEmacs codename.

	* gnus-util.el (gnus-emacs-version): Update for new
	`gnus-user-agent'.

	* gnus-msg.el (gnus-extended-version): Make it possible to omit
	Gnus version.

2005-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-face): New face.  Don't use `gnus-splash-face'
	which is unreadable in some setups.

2005-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-spec.el (gnus-update-format-specifications): Flush the
	group format spec cache if it doesn't support decoded group names.

2005-01-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-decay-scores, gnus-score-load-file): Allow
	to apply decay on score files matching a regexp.

2004-12-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-line-format-alist): Keep the forward
	compatibility in %g and %c.

2004-12-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-line-format-alist): Use decoded group
	name for only %g and %c.
	(gnus-group-insert-group-line): Bind gnus-tmp-decoded-group instead
	of gnus-tmp-group to decoded group name.
	(gnus-group-make-rss-group): Exclude `/'s from group names.

2004-12-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-get-encoding): Fix regexp.

2004-12-27  Simon Josefsson  <jas@extundo.com>

	* mm-bodies.el (mm-body-encoding): Don't permit 7-bit to be used when
	mm-use-ultra-safe-encoding is enabled (e.g., for PGP/MIME) and we have
	trailing white space.  Reported by Werner Koch <wk@gnupg.org>.

2004-12-17  Kim F. Storm  <storm@cua.dk>

	* gnus-group.el (gnus-group-mode-map): Map follow-link to mouse-face.

	* gnus-sum.el (gnus-summary-mode-map): Likewise.

2004-12-26  Tsuyoshi AKIHO  <akiho@kawachi.zaq.ne.jp>

	* gnus-sum.el (gnus-summary-walk-group-buffer): Decode group name.

2004-12-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el: Require rfc2047 and mml.
	(nnrss-file-coding-system): New variable.
	(nnrss-format-string): Redefine it as an inline function.
	(nnrss-decode-group-name): New function.
	(nnrss-string-as-multibyte): Remove.
	(nnrss-retrieve-headers): Decode group name; don't use
	nnrss-format-string.
	(nnrss-request-group): Decode group name.
	(nnrss-request-article): Decode group name; allow a Message-ID as
	well as an article number; don't use nnrss-format-string; encode a
	Message-ID string which may contain non-ASCII characters; use
	mml-to-mime to compose a MIME article.
	(nnrss-request-expire-articles): Decode group name.
	(nnrss-request-delete-group): Decode group name.
	(nnrss-fetch): Clarify error message.
	(nnrss-read-server-data): Use insert-file-contents instead of load;
	bind file-name-coding-system; use multibyte buffer.
	(nnrss-save-server-data): Bind coding-system-for-write to the
	value of nnrss-file-coding-system; bind file-name-coding-system;
	add coding cookie.
	(nnrss-read-group-data): Use insert-file-contents instead of load;
	bind file-name-coding-system; use multibyte buffer.
	(nnrss-save-group-data): Bind coding-system-for-write to the
	value of nnrss-file-coding-system; bind file-name-coding-system.
	(nnrss-decode-entities-string): Rename from n-d-e-unibyte-string;
	make it work with non-ASCII text.
	(nnrss-find-el): Make it work with old xml.el as well.

2004-12-26  Tsuyoshi AKIHO  <akiho@kawachi.zaq.ne.jp>

	* nnrss.el (nnrss-get-encoding): New function.
	(nnrss-fetch): Use unibyte buffer initially; bind
	coding-system-for-read while performing mm-url-insert; remove ^Ms;
	decode contents according to the encoding attribute.
	(nnrss-save-group-data): Add coding cookie.
	(nnrss-mime-encode-string): New function.
	(nnrss-check-group): Use it to encode subject and author.

2004-12-23  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB): don't get the symbol-value of an
	imaginary variable

2004-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-spec.el (gnus-spec-tab): Make a Lisp form which works
	correctly even if there are wide characters.

2004-12-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB): fix the BBDB caching code to use
	downcased symbol names; make a new cache instead of reusing
	bbdb-hashtable

2004-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Decode encoded value after
	concatenating segments rather than before concatenating them.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.

	* message.el (message-get-reply-headers): Bind `extra'.

2004-12-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-extra-wide-headers): New variable.
	(message-get-reply-headers): Use it.

2004-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-group-path): Decode group name.
	(gnus-agent-group-pathname): Ditto.

	* gnus-cache.el (gnus-cache-file-name): Decode group name.

	* gnus-group.el (gnus-group-make-group): Decode group name.
	(gnus-group-make-rss-group): Register the group data after opening
	the nnrss group.

2004-12-17  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-expire-articles): Articles moved
	by expiry now get marked as read.

2004-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-xemacs-find-mime-charset): New macro.

2004-12-17  Aidan Kehoe  <kehoea@parhasard.net>

	* mm-util.el (mm-xemacs-find-mime-charset-1): New function used to
	unify Latin characters in XEmacs.
	(mm-find-mime-charset-region): Use it.

2004-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-delete-directory): New function.

	* gnus-agent.el (gnus-agent-delete-group): Use it.

	* gnus-cache.el (gnus-cache-delete-group): Use it.

2004-12-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-rss-group): Unify non-ASCII group
	names.

2004-12-16  Simon Josefsson  <jas@extundo.com>

	* hashcash.el (hashcash-payment-alist): Fix custom :type.

2004-12-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-url.el (mm-url-predefined-programs): Add --silent arg to curl.

	* gnus-group.el (gnus-group-expire-articles-1): Decode group name.
	(gnus-group-set-current-level): Decode group name.

2004-12-15  Maciek Pasternacki  <maciekp@japhy.fnord.org>  (tiny change)

	* nnrss.el (nnrss-fetch): Signal an error if w3-parse-buffer also
	failed.

2004-12-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-delete-group): Decode group name.
	(gnus-group-make-rss-group): Encode group name.
	(gnus-group-catchup-current): Decode group name.
	(gnus-group-kill-group): Decode group name.

2004-12-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-narrow-to-page): Don't hardcode point-min.

2004-12-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-rss-group):
	Use gnus-group-make-group instead of gnus-group-unsubscribe-group.

	* gnus-start.el (gnus-setup-news): Honor user's setting to
	gnus-message-archive-method.  Suggested by Lute Kamstra
	<lute@gnu.org>.

2004-12-10  Arnaud Giersch  <arnaud.giersch@free.fr>  (tiny change)

	* gnus-sum.el (gnus-summary-exit-no-update): Don't clear the
	global counterparts of the buffer-local variables.

2004-11-16  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-exit): Don't clear the global
	counterparts of the buffer-local variables.

2004-11-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-forbidden-properties): Fixed typo in doc
	string.

2004-11-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-replace-in-string): Added doc string.

	* nnmail.el (nnmail-split-header-length-limit): Increase to 2048
	to avoid problems when splitting mails with many recipients.

2004-11-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Remove redundant and harmful
	pop-to-buffer, covered by the subsequent gnus-configure-windows.

2004-12-05  Nelson Ferreira  <nelson.ferreira@ieee.org>

	* spam-stat.el (spam-stat-save): Load the hashtable from disk only
	if there is no hashtable in memory or file modification time is
	newer than cached timestamp.

2004-12-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-limit-to-recipient): Implement
	not-matching option.

2004-12-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-limit-to-recipient): New function.
	Suggested David Mazieres in analogy to rmail-summary-by-recipients.
	(gnus-summary-limit-map, gnus-summary-make-menu-bar): Add it.
	(gnus-article-sort-by-recipient, gnus-summary-sort-by-recipient):
	New functions.  Suggested by Uwe Brauer <oub@mat.ucm.es>.
	(gnus-summary-mode-map, gnus-summary-make-menu-bar): Add it.

2004-12-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-forward-make-body-mml): Remove headers
	according to message-forward-ignored-headers if a message is decoded.

2004-12-02  Romain Francoise  <romain@orebokech.com>

	* message.el (message-forward-make-body-plain): Always remove
	headers according to message-forward-ignored-headers.

2004-12-01  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): remove the
	gnus-summary-limit pop for now, it has problems with ham marks for
	me

2004-11-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): use gnus-summary-limit
	correctly

2004-11-28  Carl Henrik Lunde  <chlunde+bugs+@ping.uio.no>  (tiny change)

	* format-spec.el (format-spec): Message the char.

2004-11-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-art.el (gnus-split-methods): reformat comments

	* spam.el (spam-summary-prepare-exit): remove article limits
	before exiting the summary buffer

2004-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Remove bbdb-create-internal, bbdb-records,
	spam-BBDB-register-routine and spam-enter-ham-BBDB.

	* nnrss.el (nnrss-string-as-multibyte): Redefine it as a macro in
	order to silence the byte compiler.

	* spam.el: Fix the way to silence the byte compiler, which
	complained about bbdb-buffer, bbdb-create-internal, bbdb-records,
	bbdb-search-simple, spam-BBDB-register-routine,
	spam-enter-ham-BBDB, spam-stat-buffer-change-to-non-spam,
	spam-stat-buffer-change-to-spam, spam-stat-buffer-is-non-spam,
	spam-stat-buffer-is-spam, spam-stat-load,
	spam-stat-register-ham-routine, spam-stat-register-spam-routine,
	spam-stat-save and spam-stat-split-fancy.

2004-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-password): Remove `:size 0' or `:size 1'
	which may confuse users.
	(canlock-password-for-verify): Ditto.

	* deuglify.el (gnus-outlook-deuglify-unwrap-stop-chars): Ditto.

	* gnus-art.el (gnus-emphasis-alist): Ditto.

	* gnus-registry.el (gnus-registry-max-entries): Ditto.

	* gnus-score.el (gnus-adaptive-word-length-limit): Ditto.

	* gnus-start.el (gnus-save-killed-list): Ditto.

	* gnus-sum.el (gnus-thread-hide-subtree): Ditto.
	(gnus-sum-thread-tree-root): Ditto.
	(gnus-sum-thread-tree-false-root): Ditto.
	(gnus-sum-thread-tree-single-indent): Ditto.

	* message.el (message-courtesy-message): Ditto.
	(message-archive-note): Ditto.
	(message-subscribed-address-file): Ditto.
	(message-user-fqdn): Ditto.

	* spam-report.el (spam-report-gmane-regex): Ditto.

	* spam.el (spam-blackhole-good-server-regex): Ditto.

2004-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-preview): Widen the message buffer before copying
	the contents to the preview buffer; sort headers before previewing.

	* message.el (message-hidden-headers): Fix the way to avoid a bug
	in the `repeat' widget in Emacs 21.3 or earlier.

2004-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-hidden-headers): Default to "^References:".
	From Reiner Steib <Reiner.Steib@gmx.de>; improve customization type.
	(message-strip-forbidden-properties): Remove check for obsolete
	`message-hidden' text property, hidden headers are not accessible
	in the buffer anymore.  From Romain Francoise on January 11, 2004.

2004-11-22  Romain Francoise  <romain@orebokech.com>

	* message.el (message-header-format-alist): Add `From' in list
	so that it can be sorted.
	(message-fix-before-sending): Widen and sort headers before
	sending.
	(message-hide-headers): Use narrowing to hide headers by moving
	them to the top of the buffer and narrowing to the region
	underneath.

2004-11-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-strip-forbidden-properties): Bind
	buffer-read-only (etc) to nil.

2004-11-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-header-encoding-alist): Add In-Reply-To to
	address-mime.  Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.

2004-11-22  Marek Martin  <marek.martin@mum.pri.ee>  (tiny change)

	* nnfolder.el (nnfolder-request-create-group): Save current buffer.

2004-11-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Use sit-for to time instead of
	accept-process-output, since that doesn't seem to work on udp
	sockets.

2004-11-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Encode bogus delimiters.

2004-11-15  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-leave-mail-on-server): Don't quote nil in
	docstrings.

2004-11-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-request-update-info): Return nil if
	nntp-marks-is-evil is true so that gnus-get-unread-articles-in-group
	may not call gnus-activate-group which uselessly issues the GROUP
	commands for all nntp groups and wastes time.  Reported by Romain
	Francoise <romain@orebokech.com>.

	* gnus-start.el (gnus-get-unread-articles): Remove redundant test.

2004-11-15  Simon Josefsson  <jas@extundo.com>

	* gnus-art.el (gnus-header-button-alist): Handle URLs in OpenPGP:
	headers separately.
	(gnus-button-openpgp): New function, inspired by Jochen K,A|(Bpper
	<jochen-+It19tn3Rl9sbm7dSapR3bNAH6kLmebB@public.gmane.org>.

2004-11-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-convert-old-newsrc):
	Assign legacy-gnus-agent to 5.10.7.

2004-11-14  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (article-unsplit-urls): Don't anchor urls to the
	start of the lines.

2004-11-14  Magnus Henoch  <mange@freemail.hu>

	* hashcash.el (hashcash-default-payment): Change default to 20
	(hashcash-default-accept-payment): Change default to 20
	(hashcash-process-alist): New variable
	(hashcash-generate-payment-async): Add
	(hashcash-already-paid-p): Add
	(hashcash-insert-payment): Don't generate payments twice
	(hashcash-insert-payment-async): Add
	(hashcash-insert-payment-async-2): Add
	(hashcash-cancel-async): Add
	(hashcash-wait-async): Add
	(hashcash-processes-running-p): Add
	(hashcash-wait-or-cancel): Add
	(mail-add-payment): New optional argument.  Conditionally start
	asynchronous calculation.
	(mail-add-payment-async): Add

	* message.el (message-send-mail): Wait for asynchronous hashcash
	results.  Don't clobber existing X-Hashcash headers.
	(message-setup-1): Call mail-add-payment-async when
	message-generate-hashcash is non-nil.

2004-11-11  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* message.el (message-use-alternative-email-as-from): Examine the
	From header as well; use message-make-from in order to include a
	user's full name.

2004-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-emphasis-alist): Don't hide asterisks by
	default; improve customization type.
	(gnus-emphasis-custom-with-format): New macro.
	(gnus-emphasis-custom-value-to-external): New function.
	(gnus-emphasis-custom-value-to-internal): New function.

2004-11-09  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Resolve reverse addresses.

2004-10-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-get-new-news): Use it.

	* gnus-start.el (gnus-check-reasonable-setup): New function.

2004-11-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-configure-posting-styles): Don't cause the
	"Args out of range" error.  Reported by Arnaud Giersch
	<arnaud.giersch@free.fr>.

2004-11-07  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-clear-local-variables): Use symbolp.
	From Stefan Wiens <s.wi@gmx.net>.

2004-11-04  Richard M. Stallman  <rms@gnu.org>

	* spam.el (spam group): Add :version.

	* pgg-def.el (pgg group): Add :version.

2004-11-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-article): Don't associate the
	article buffer with a draft file.  This is a temporary measure
	against the 2004-08-22 change to gnus-article-edit-mode.

2004-11-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* html2text.el (html2text-get-attr): Remove unused argument `tag'.
	(html2text-format-tags): Remove unused variable `attr'.

2004-11-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-summary-resend-default-address): Add :version.

	* tls.el (tls-process-connection-type, tls-success)
	(tls-certtool-program): Add :version.

	* starttls.el (starttls-gnutls-program, starttls-use-gnutls)
	(starttls-extra-arguments, starttls-process-connection-type)
	(starttls-connect, starttls-failure, starttls-success):

	* spam-stat.el (spam-stat): Add :version.

	* sieve.el (sieve): Add :version.

	* sha1.el (sha1): Add :version.
	(sha1-use-external): Remove redundant version.

	* nnmail.el (nnmail-split-fancy-with-parent-ignore-groups)
	(nnmail-cache-ignore-groups, nnmail-spool-hook)
	(nnmail-split-fancy-match-partial-words)
	(nnmail-split-lowercase-expanded):

	* nndiary.el (nndiary): Add :version.

	* mml2015.el (mml2015-unabbrev-trust-alist): Add :version.

	* mml-sec.el (mml-default-sign-method)
	(mml-default-encrypt-method, mml-signencrypt-style-alist):
	Add :version.

	* mm-uu.el (mm-uu-diff-groups-regexp): Add :version.

	* mm-url.el (mm-url-use-external, mm-url-program)
	(mm-url-arguments): Add :version.

	* mm-decode.el (mm-inline-text-html-with-w3m-keymap)
	(mm-attachment-file-modes, mm-decrypt-option)
	(mm-w3m-safe-url-regexp): Add :version.

	* message.el (message-cite-prefix-regexp)
	(message-sendmail-envelope-from, message-minibuffer-local-map)
	(message-user-fqdn, message-completion-alist): Add :version.

	* gnus-win.el (gnus-configure-windows-hook)
	(gnus-use-frames-on-any-display): Add :version.

	* gnus-art.el (gnus-article-address-banner-alist)
	(gnus-treat-unsplit-urls, gnus-treat-unfold-headers)
	(gnus-treat-from-picon, gnus-treat-mail-picon)
	(gnus-treat-x-pgp-sig): Add :version.

	* gnus-sum.el (gnus-spam-mark, gnus-recent-mark)
	(gnus-undownloaded-mark, gnus-summary-article-move-hook)
	(gnus-summary-article-delete-hook)
	(gnus-summary-display-while-building): Add :version.

	* gnus-start.el (gnus-subscribe-newsgroup-hooks)
	(gnus-get-top-new-news-hook):Add :version.

	* gnus-srvr.el (gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face): Add :version.

	* gnus-registry.el (gnus-registry): Add :version.

	* gnus-spec.el (gnus-use-correct-string-widths)
	(gnus-make-format-preserve-properties): Add :version.

	* gnus.el (gnus-group-charter-alist)
	(gnus-group-fetch-control-use-browse-url)
	(gnus-install-group-spam-parameters): Add :version.

	* gnus-diary.el (gnus-diary): Add :version.

	* gnus-delay.el (gnus-delay): Add :version.

	* gnus-cite.el (gnus-cite-unsightly-citation-regexp)
	(gnus-cite-ignore-quoted-from, gnus-cite-attribution-face)
	(gnus-cite-blank-line-after-header, gnus-article-boring-faces):
	Add :version.

	* gnus-agent.el (gnus-agent-max-fetch-size)
	(gnus-agent-enable-expiration, gnus-agent-queue-mail)
	(gnus-agent-prompt-send-queue): Add :version.

	* deuglify.el (gnus-outlook-deuglify): Add :version.

	* html2text.el: Beautify code.  Improve doc strings.  Some
	checkdoc cleanup.
	(html2text-get-attr, html2text-fix-paragraph): Simplify code.

2004-11-01  Alfred M. Szmidt <ams@kemisten.nu>  (tiny change)

	* html2text.el (html2text-format-tag-list): Add "strong" and "em".

2004-10-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-hashtb): create the registry
	when package is loaded

	* spam.el (spam-summary-score-preferred-header): global preference
	for people who want to override the default SpamAssassin over
	Bogofilter preference (when both are set)
	(spam-necessary-extra-headers): add spam-use-bogofilter as an option
	(spam-user-format-function-S): check spam-summary-score-preferred-header
	(spam-extra-header-to-number): add X-Bogosity header parsing
	(spam-user-format-function-S): format the score correctly

2004-10-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-configure-posting-styles): Work with empty
	signature file.  Suggested by Manoj Srivastava
	<srivasta@golden-gryphon.com>.

	* mm-util.el (mm-coding-system-priorities): Prefer iso-8859-1 than
	iso-2022-jp even in the Japanese language environment.
	Suggested by Jason Rumney <jasonr@gnu.org>.

2004-10-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-update-summary-mark-positions): Allow users to
	use the same characters as the dummy marks; make it free from
	getting affected by the language environment.
	(gnus-summary-read-group-1): Update mark positions only when the
	format spec is updated.

	* gnus-spec.el (gnus-update-format-specifications): Return a list
	of updated types.

2004-10-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-check-reasonable-setup): Use fboundp instead
	of boundp to check if display-warning is available.

2004-10-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): fixed prog1/prog2 bug

2004-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnspool.el (nnspool-spool-directory): Use news-path if the
	news-directory variable is not bound.

	* gnus-start.el (gnus-check-reasonable-setup): Use an alternative
	function instead of display-warning if it is not available.

2004-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-expire-group-1): Fix last merge from
	v5-10: Use `point-at-bol'.

2004-10-26  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: Fix URL in comment, reported by Cheng Gao
	<chenggao@gmail.com>.

2004-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* html2text.el (html2text-buffer-head): Remove.  Use `goto-char'
	instead.

2004-10-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-remove-server-from-buffer-alist): new function
	to remove a server from the nnimap-server-buffer-alist
	(nnimap-open-connection, nnimap-close-server): use it

	* gnus-encrypt.el: removed in favor of encrypt.el

2004-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-display-inline-fontify): Inhibit font-lock when
	running the major-mode function.

2004-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-update-summary-mark-positions): Search for
	dummy marks in the right way.

2004-10-18  David Edmondson  <dme@dme.org>

	* mm-view.el (mm-w3m-cid-retrieve-1): Don't use recursive call
	excessively.

2004-10-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-split-references): accept a nil references
	string and go on blissfully

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): catch
	cases where the references string is non-nil but has no references

	* encrypt.el: add autoload tags

	* spam.el (spam-resolve-registrations-routine): remove article
	from unregistration list too.  Reported by David Hanak
	<dhanak@isis.vanderbilt.edu>

2004-10-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): Default to
	nil.  Changed custom type.

2004-10-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): New variable.

	* gnus-sum.el (gnus-summary-move-article): Use it.

2004-10-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* encrypt.el: add autoload cookies

	* spam.el (spam-backend-article-list-property)
	(spam-backend-get-article-todo-list)
	(spam-backend-put-article-todo-list, )
	(spam-summary-prepare-exit, spam-resolve-registrations-routine):
	resolve registrations separately
	(spam-register-routine): format comments
	(spam-unregister-routine, spam-register-routine): always call with
	specific-articles, no default list
	(spam-summary-prepare-exit): use the spam-classifications function

	* netrc.el (autoload, netrc-parse): use encrypt.el instead of
	gnus-encrypt.el

	* encrypt.el: copied from gnus-encrypt.el

	* gnus-encrypt.el: commented that it's obsolete

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-adaptive-pretty-print): New variable.
	(gnus-score-save): Use it.

	* message.el (message-bury): Use `window-dedicated-p'.

2004-10-15  Simon Josefsson  <jas@extundo.com>

	* pop3.el (top-level): Don't require nnheader.
	(pop3-read-timeout): Add.
	(pop3-accept-process-output): Add.
	(pop3-read-response, pop3-retr): Use it.

2004-10-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine): move comment
	(spam-verify-bogofilter): we use 'unknown for the initial
	spam-bogofilter-valid state, not 'never

	* netrc.el (netrc-machine-user-or-password): convenience wrapper
	for netrc-machine

	* nnimap.el (nnimap-open-connection): use
	netrc-machine-user-or-password

2004-10-17  Richard M. Stallman  <rms@gnu.org>

	* gnus-registry.el (gnus-registry-unload-hook):
	Set as a variable with add-hook.

	* nnspool.el (nnspool-spool-directory): Use news-directory instead
	of news-path.

	* spam-stat.el (spam-stat-unload-hook): Set as a variable w/ add-hook.

	* spam.el: Delete duplicate `provide'.
	(spam-unload-hook): Set as a variable with add-hook.

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-leave-mail-on-server): Describe possible problems
	in the doc string.

	* message.el (message-ignored-news-headers)
	(message-ignored-supersedes-headers)
	(message-ignored-resent-headers)
	(message-forward-ignored-headers): Improve custom type.

2004-10-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-tokenize-header): Fix 2004-09-06 change
	which used point-min in the wrong place.

2004-10-12  Simon Josefsson  <jas@extundo.com>

	* net/tls.el (tls-certtool-program): New variable.
	(tls-certificate-information): New function, based on
	ssl-certificate-information.

2004-10-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el: Move the version of ELisp-based uncompface program
	to the contrib directory because of the copyright problem.

2004-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-kill-buffer): Raise the current frame.

2004-10-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el: Mention that multibyte characters don't work as marks.

	* gnus.el (message-y-or-n-p): Autoload.

	* pop3.el (pop3-maildrop, pop3-mailhost, pop3-port)
	(pop3-password-required, pop3-authentication-scheme)
	(pop3-leave-mail-on-server): Made customizable.
	(pop3): New custom group.
	(pop3-retr): Remove `sleep-for' statements.
	Suggested by Dave Love <fx@gnu.org>.

	* nnheader.el (nnheader-read-timeout): Explain 1.0 timeout for
	Windows/DOS.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix incorrect use of `assert'.  Suggested by
	Dave Love <fx@gnu.org>.

	* mml.el (mml-minibuffer-read-disposition): Require match.
	Suggested by Dave Love <fx@gnu.org>.

2004-10-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-delete-group): Change "\t." to "  " in
	doc string.

2004-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Support all text/* types.

2004-10-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (gnus-mime-display-single): Call `mm-display-inline'
	instead of calling `mm-insert-inline', to decode text/* parts
	before displaying them.

2004-10-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-text-plain-type): New variable.
	(mm-uu-pgp-signed-extract-1): Use it.
	(mm-uu-pgp-encrypted-extract-1): Use it.
	(mm-uu-dissect): Allow MIME type and parameters as an optional arg;
	bind mm-uu-text-plain-type with that value.
	(mm-uu-dissect-text-parts): Pass MIME type and parameters to
	mm-uu-dissect.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use mm-string-as-multibyte instead
	of string-as-multibyte.

2004-10-05  Juri Linkov  <juri@jurta.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use `string-as-multibyte' to convert
	8-bit unibyte values to a multibyte string for search functions.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect): Allow optional arg.
	(mm-uu-dissect-text-parts): New function.

	* gnus-art.el (gnus-display-mime): Use mm-uu-dissect-text-parts to
	dissect text parts.

	* gnus-sum.el (gnus-summary-insert-subject): Remove redundant setq.
	(gnus-summary-force-verify-and-decrypt): Revert 2004-08-18 change.

	* mm-decode.el (mm-dissect-singlepart): Revert 2004-08-18 change.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): Use
	gnus-current-topics instead of gnus-current-topic.

2004-10-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-show-article): Use with-current-buffer.

2004-10-05  Jesper Harder  <harder@ifa.au.dk>

	* nnsoup.el (nnsoup-read-active-file): Use dolist, mapc or last
	where approriate.

	* nnml.el (nnml-generate-active-info): do.

	* nndiary.el (nndiary-generate-active-info): do.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): do.
	(gnus-topic-move): do.

	* gnus-sum.el (gnus-data-enter-list, gnus-summary-process-mark-set)
	(gnus-summary-set-local-parameters, gnus-summary-read-document): do.

	* gnus-srvr.el (gnus-server-prepare)
	(gnus-server-open-all-servers): do.

	* gnus-msg.el (gnus-summary-cancel-article)
	(gnus-summary-resend-message)
	(gnus-summary-mail-crosspost-complaint): do.

	* gnus-move.el (gnus-change-server): do.

	* gnus-group.el (gnus-group-unmark-all-groups)
	(gnus-group-set-current-level): do.

2004-10-04  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Doc fix.

2004-10-02  Kevin Greiner  <kgreiner@compsol.cc>

	* nnagent.el (nnagent-request-type): Bind gnus-agent to nil to
	avoid infinite recursion via gnus-get-function.

2004-10-02  Jesper Harder  <harder@ifa.au.dk>

	* mm-partial.el (mm-partial-find-parts): Use with-current-buffer.

	* nnfolder.el (nnfolder-generate-active-file): Use dolist.

	* nnmail.el (nnmail-split-history): do.

	* nnml.el (nnml-generate-nov-databases-1, nnml-request-rename-group)
	(nnml-request-delete-group): do.

	* nnslashdot.el (nnslashdot-read-groups): do.

	* nnsoup.el (nnsoup-delete-unreferenced-message-files): do.
	(nnsoup-unpack-packets, nnsoup-make-active): Simplify.

	* nnspool.el (nnspool-find-id): Use with-temp-buffer.
	(nnspool-sift-nov-with-sed): Use last
	(nnspool-retrieve-headers-with-nov): Use mapc.
	(nnspool-request-newgroups): Use dolist.
	(nnspool-request-group): Use last.

	* nntp.el (nntp-read-server-type): Use dolist.

	* nnvirtual.el (nnvirtual-create-mapping)
	(nnvirtual-update-read-and-marked): Use dolist.
	(nnvirtual-convert-headers): Simplify.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Added
	support for sync'ing tick marks.

2004-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-toggle-header): Make it work even if
	there's no visible header.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): When
	necessary, pass full group name to gnus-request-set-marks.

2004-10-01  Simon Josefsson  <jas@extundo.com>

	* mailcap.el (mailcap-mime-data): Add pdf.  Remove non-free
	acroread.

2004-10-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-gmane): Fix interactive.

	* gnus-art.el (gnus-treat-body-boundary): Only do stuff under X.

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Be silent
	when writing file.
	(gnus-agent-synchronize-flags): Don't default to being
	interactive.

2004-09-30  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Add.
	(message-send-mail): Use it, call mail-add-payment.

2004-09-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): -V, not -sV option

2004-09-28  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Replaced
	gnus-requst-update-info with explicit code to sync the in-memory
	info read flags with the marks being sync'd to the backend.

	*gnus-util.el (gnus-pp): Added optional stream to match pp API.

2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): new function
	(spam-check-bogofilter)
	(spam-bogofilter-register-with-bogofilter): use it
	(spam-verify-bogofilter): small fixes

2004-09-28  Simon Josefsson  <jas@extundo.com>

	* hashcash.el (hashcash-generate-payment): Revert.

2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): use
	gnus-extract-references instead of gnus-split-references

	* gnus-util.el (gnus-extract-references): new function, analogous
	to gnus-split-references but extracts only the message-ID without
	anything extra

	* hashcash.el (hashcash-generate-payment)
	(hashcash-check-payment): do the right thing if hashcash-path is
	nil (because the hashcash program could not be found)

	* spam.el (spam-use-hashcash): remove comment

2004-09-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-possibly-remove-articles-1)
	(gnus-cache-enter-article, gnus-cache-remove-article)
	(gnus-cache-braid-heads, gnus-cache-generate-active): Use dolist.

	* gnus-async.el (gnus-async-prefetch-remove-group): do.

	* gnus-art.el (article-hide-boring-headers)
	(article-translate-strings, article-display-face)
	(gnus-article-mime-match-handle-first)
	(gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): do.

2004-09-27  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: New version, from
	http://users.actrix.co.nz/mycroft/hashcash.el.  Previously in
	../contrib/.

2004-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-copy-to-buffer): Don't use set-buffer-multibyte.

2004-09-26  Jesper Harder  <harder@ifa.au.dk>

	* gnus-dup.el (gnus-dup-open): Use mapc.
	(gnus-dup-enter-articles, gnus-dup-suppress-articles): Use dolist.

	(gnus-dup-enter-articles): Remove excess ID's from gnus-dup-hashtb.
	Reported by Stefan Wiens <s.wi@gmx.net>.

	* gnus.el (gnus-shutdown): Use dolist.

	* gnus-undo.el (gnus-undo): Use mapc.

	* nnrss.el (nnrss-generate-active): do.

	* message.el (message-cite-original-without-signature)
	(message-cite-original): Use mapc.
	(message-do-actions, message-make-forward-subject): Use dolist.

2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-check-overview-buffer): Fixed range of
	deletion to remove entire duplicate line.  Fixes merged article
	number bug.

2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-possibly-synchronize-flags): Ignore
	servers that are offline.  Avoids having gnus-agent-toggle-plugged
	first ask if you want to open a server and then, even when you
	responded with no, asking if you want to synchronize the server's
	flags.
	(gnus-agent-synchronize-flags-server): Rewrote read loop to handle
	multi-line expressions.
	(gnus-agent-synchronize-group-flags): New internal function.
	Updates marks in memory (in the info structure) AND in the
	backend.

	* gnus-util.el (gnus-remassoc): Fixed typo in documentation.

	* nnagent.el (nnagent-request-set-mark): Use
	gnus-agent-synchronize-group-flags, not backend's request-set-mark
	method, to ensure that synchronization updates marks in the
	backend and in the info (in memory) structure.

2004-09-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Obey the process/prefix
	convention fully; don't miss the root article of a thread; make
	the X-Draft-From header with correct article numbers.

2004-09-23  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Do nothing
	unless plugged.  Disable the agent so that an open failure causes
	an error.

	* gnus-int.el (gnus-request-set-mark, gnus-request-update-mark):
	Reverted 2004-09-21 change.  The backend must be opened while
	synchronizing flags even when the backend stores the flags
	locally.

2004-09-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-configure-posting-styles): Narrow to headers
	in `header' match.  Reported by Svend Tollak Munkejord.

	* message.el (message-cite-original): Fix use of
	`message-cite-articles-with-x-no-archive'.

2004-09-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-win.el (gnus-buffer-configuration): Add mml-preview.
	(gnus-window-to-buffer): Ditto.

	* mml.el (mml-preview-buffer): New variable.
	(mml-preview): Manage window layout with gnus-buffer-configuration.

	* gnus-msg.el (gnus-setup-message): Put article numbers into the
	X-Draft-From header even if those articles aren't quoted.

2004-09-21  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-int.el (gnus-servers-that-use-local-marks): New variable.
	(gnus-request-set-mark, gnus-request-update-mark): Use new
	g-s-t-u-l-m to decide to use backend even when unplugged.

2004-09-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Don't add
	a trailing whitespace.  Suggested by Cheng Gao <chenggao@gmail.com>.

2004-09-20  Simon Josefsson  <jas@extundo.com>

	* mm-util.el (mm-charset-synonym-alist): Map "unicode" to
	"utf-16-le".

2004-09-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-copy-to-buffer): Preserve the data's unibyteness.

2004-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* uudecode.el (uudecode-use-external): Add :version.

	* smime.el (smime-CA-file, smime-encrypt-cipher)
	(smime-dns-server): Add :version.

	* smiley.el (gnus-smiley-file-types): Add :version.

	* sha1.el (sha1-use-external): Add :version.

	* pgg-def.el (pgg-query-keyserver): Add :version.

	* nnmail.el (nnmail-fancy-expiry-targets)
	(nnmail-mail-splitting-charset, nnmail-mail-splitting-decodes):

	* nnimap.el (nnimap-split-download-body, nnimap-dont-close)
	(nnimap-retrieve-groups-asynchronous): Add :version.
	(nnimap-close-asynchronous): Add :version.  Fixed typo in doc string.

	* mml.el (mml-content-disposition-parameters)
	(mml-insert-mime-headers-always): Add :version.

	* mm-util.el (mm-coding-system-priorities):

	* mm-decode.el (mm-inline-text-html-with-images)
	(mm-keep-viewer-alive-types, mm-external-terminal-program)
	(mm-verify-option): Add :version.
	(mm-text-html-renderer): Change :version.

	* message.el (message-fcc-externalize-attachments)
	(message-required-headers, message-draft-headers)
	(message-subject-trailing-was-query)
	(message-subject-trailing-was-ask-regexp)
	(message-subject-trailing-was-regexp, message-mark-insert-begin)
	(message-mark-insert-end, message-archive-header)
	(message-archive-note, message-cross-post-default)
	(message-cross-post-note, message-followup-to-note)
	(message-cross-post-note-function, message-use-mail-followup-to)
	(message-subscribed-address-functions)
	(message-subscribed-address-file, message-subscribed-addresses)
	(message-subscribed-regexps, message-allow-no-recipients)
	(message-yank-cited-prefix, message-signature-insert-empty-line)
	(message-hidden-headers, message-hierarchical-addresses)
	(message-mail-user-agent, message-use-idna)
	(message-valid-fqdn-regexp)
	(message-strip-special-text-properties, message-header-synonyms)
	(message-beginning-of-line, message-tab-body-function): Add :version.
	(message-insert-canlock, message-wide-reply-confirm-recipients):
	Change :version.

	* mail-source.el (mail-source-ignore-errors): Add :group, :type
	and :version.
	(mail-source-delete-old-incoming-confirm)
	(mail-source-movemail-program): Add :version.

	* gnus.el (gnus-parameters, gnus-user-agent): Add :version.
	(gnus-agent-cache, gnus-agent): Change :version.

	* gnus-util.el (gnus-use-byte-compile): Change :version.

	* gnus-sum.el (gnus-summary-make-false-root-always)
	(gnus-summary-default-high-score)
	(gnus-summary-default-low-score, gnus-auto-goto-ignores)
	(gnus-forwarded-mark, gnus-unseen-mark, gnus-no-mark)
	(gnus-read-all-available-headers, gnus-article-emulate-mime)
	(gnus-sum-thread-tree-root, gnus-sum-thread-tree-false-root)
	(gnus-sum-thread-tree-single-indent)
	(gnus-sum-thread-tree-vertical, gnus-sum-thread-tree-indent)
	(gnus-sum-thread-tree-leaf-with-other)
	(gnus-sum-thread-tree-single-leaf): Add :version.
	(gnus-summary-display-arrow, gnus-summary-muttprint-program)
	(gnus-article-loose-mime): Change :version.

	* gnus-start.el (gnus-backup-startup-file)
	(gnus-save-startup-file-via-temp-buffer): Add :version.

	* gnus-srvr.el (gnus-server-browse-in-group-buffer)
	(gnus-server-offline-face): Add :version.

	* gnus-score.el (gnus-adaptive-word-length-limit):

	* gnus-msg.el (gnus-gcc-externalize-attachments)
	(gnus-debug-files, gnus-debug-exclude-variables)
	(gnus-discouraged-post-methods): Change :version.
	(gnus-confirm-mail-reply-to-news)
	(gnus-confirm-treat-mail-like-news): Add :version.

	* gnus-int.el (gnus-server-unopen-status): Add :version.

	* gnus-group.el (gnus-group-jump-to-group-prompt)
	(gnus-large-ephemeral-newsgroup)
	(gnus-fetch-old-ephemeral-headers): Add :version.

	* gnus-fun.el (gnus-x-face-directory)
	(gnus-convert-pbm-to-x-face-command)
	(gnus-convert-image-to-x-face-command)
	(gnus-convert-image-to-face-command): Add :version.

	* gnus-delay.el (gnus-delay-default-hour): Add :version.

	* gnus-cite.el (gnus-cite-blank-line-after-header)
	(gnus-article-boring-faces):

	* gnus-art.el (gnus-buttonized-mime-types)
	(gnus-inhibit-mime-unbuttonizing)
	(gnus-treat-display-face)
	(gnus-treat-body-boundary): Change :version.
	(gnus-body-boundary-delimiter, gnus-picon-databases)
	(gnus-treat-strip-cr, gnus-treat-leading-whitespace)
	(gnus-treat-date-english, gnus-treat-fold-headers)
	(gnus-article-skip-boring, gnus-treat-fold-newsgroups)
	(gnus-treat-mail-picon, gnus-treat-wash-html)
	(gnus-article-encrypt-protocol)
	(gnus-use-idna, gnus-article-over-scroll)
	(gnus-mime-display-multipart-alternative-as-mixed)
	(gnus-mime-display-multipart-related-as-mixed)
	(gnus-button-valid-fqdn-regexp, gnus-button-man-handler)
	(gnus-ctan-url, gnus-button-ctan-handler)
	(gnus-button-handle-ctan-bogus-regexp)
	(gnus-button-ctan-directory-regexp)
	(gnus-button-mid-or-mail-regexp, gnus-button-prefer-mid-or-mail)
	(gnus-button-mid-or-mail-heuristic-alist, gnus-button-tex-level)
	(gnus-button-man-level, gnus-button-emacs-level)
	(gnus-button-message-level, gnus-button-browse-level): Add :version.

	* gnus-agent.el (gnus-agent-fetched-hook): Add :version.
	(gnus-agent-go-online): Change :version.
	(gnus-agent-expire-unagentized-dirs)
	(gnus-agent-auto-agentize-methods): Add :version.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Add :version.

	* deuglify.el (gnus-outlook-deuglify-unwrap-min)
	(gnus-outlook-deuglify-unwrap-max)
	(gnus-outlook-deuglify-cite-marks)
	(gnus-outlook-deuglify-unwrap-stop-chars)
	(gnus-outlook-deuglify-no-wrap-chars)
	(gnus-outlook-deuglify-attrib-cut-regexp)
	(gnus-outlook-deuglify-attrib-verb-regexp)
	(gnus-outlook-deuglify-attrib-end-regexp)
	(gnus-outlook-display-hook): Add :version.

	* binhex.el (binhex-use-external): Add :version.

2004-09-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-fetch-old-headers): Add custom choices `t'
	and `invisible'.

2004-09-10  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): watch out for negatives
	in gnus-registry-trim

2004-09-13  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add XEmacs auto-mode-alist autoload cookie.

	* nnimap.el (nnimap-demule): Revert 2004-08-30 change.

	* dns-mode.el (dns-mode): Fix menu for XEmacs, reported by Steve
	Youngs <steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.
	(dns-mode-font-lock-keywords): Fix faces, reported by Steve Youngs
	<steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.

	* sieve.el (sieve-manage-mode): Ditto.

2004-09-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-copy-article): Fix doc string.

2004-09-11  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add.

	* mm-view.el (mm-display-dns-inline): Add.

	* mm-decode.el (mm-inline-media-tests): Add text/dns.
	(mm-automatic-display): Ditto.

	* mailcap.el (mailcap-mime-data): Add text/dns.
	(mailcap-mime-extensions): Map .soa to text/dns.

2004-09-10  Miles Bader  <miles@gnu.ai.mit.edu>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Remove unnecessary bindings of
	`inhibit-read-only' inherited from v5.10 merge.

2004-09-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp): New customization group.
	(nntp-authinfo-file): Add customization group.

	* mml2015.el (mml2015-unabbrev-trust-alist): Add customization group.

	* mml-sec.el (mml-signencrypt-style-alist): Ditto.

	* gnus.el (to-address, to-list, subscribed)
	(large-newsgroup-initial): Ditto.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Ditto.

2004-09-06  Stefan  <monnier@iro.umontreal.ca>

	* message.el (message-tokenize-header, message-send-mail-with-qmail):
	Use point-min rather than 1.
	(message-send-mail): Use buffer-size rather than point-max.

	* gnus-sum.el (gnus-summary-search-article-forward):
	Signal a specific `search-failed' rather than a generic `error'.

	* gnus-salt.el (gnus-pick-mouse-pick-region): Switch 1 => point-min.
	(gnus-generate-vertical-tree): Usue `bobp' rather than compare to 1.
	(gnus-highlight-selected-tree): Use point-min rather than 1 and 2.

2004-09-10  Simon Josefsson  <jas@extundo.com>

	* nndb.el (require): Remove tcp and duplicate cl.

2004-09-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (directory-files-and-attributes): Move forward.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (directory-files-and-attributes): Optionally
	defined to support XEmacs.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-cat-groups): rewrote avoiding defsetf
	to avoid run-time CL dependencies.
	(gnus-agent-unfetch-articles): New function.
	(gnus-agent-fetch-headers): Use gnus-agent-braid-nov to validate
	article numbers even when local .overview file is missing.
	(gnus-agent-read-article-number): New function. Only accepts
	27-bit article numbers.
	(gnus-agent-copy-nov-line, gnus-agent-uncached-articles): Use
	gnus-agent-read-article-number.
	(gnus-agent-braid-nov): Rewrote to validate article numbers coming
	from backend while recognizing that article numbers in .overview
	must be valid.
	(gnus-agent-update-files-total-fetched-for): Use
	directory-files-and-attributes to improve performance.
	* gnus-int.el (gnus-request-move-article): Use
	gnus-agent-unfetch-articles in place of gnus-agent-expire to
	improve performance.

	* gnus-start.el (gnus-convert-old-newsrc): Changed message text as
	some users confused by references to .newsrc when they only have a
	.newsrc.eld file.
	(gnus-convert-mark-converter-prompt,
	gnus-convert-converter-needs-prompt): Fixed use of property list.
	* legacy-gnus-agent.el (gnus-agent-convert-to-compressed-agentview-prompt):
	New function. Used internally to only display 'gnus converting
	files' message when actually necessary.

	* gnus-sum.el (): Removed (require 'gnus-agent) as required
	methods now autoloaded.

2004-09-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-insert-subject): Remove list
	identifiers.

2004-09-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el: Fix indentation and closing parenthesis.

2004-09-01  Simon Josefsson  <jas@extundo.com>

	* message.el (message-canlock-generate): Require sha1, not
	sha1-el.  (Can we get rid of this require alltogheter? It is ugly
	to require within a function.  Sadly, if sha1.el isn't loaded, the
	let binding in m-c-g will hide the defcustom definition, which is
	bad.)

	* canlock.el: Require sha1, not sha1-el.

	* message.el: Don't autoload sha1 (there is a autoload cookie in
	sha1.el).

	* sha1-el.el: Renamed to sha1.el.

2004-08-30  Juanma Barranquero  <lektu@terra.es>

	* ietf-drums.el (ietf-drums-remove-whitespace): Fix character constant.

2004-08-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-demule): Avoid string-as-multibyte.

2004-08-30  Kim F. Storm  <storm@cua.dk>

	* nntp.el (nntp-authinfo-file): Add :group 'nntp.

	* nnimap.el (nnimap-authinfo-file, nnimap-prune-cache):
	Add :group 'nnimap.

2004-08-30  Andreas Schwab <schwab@suse.de>

	* rfc2231.el (rfc2231-parse-string): Restore whitespace syntax for
	?* and ?\;.

	* ietf-drums.el (ietf-drums-syntax-table): Set syntax of ?* ?\;
	and ?\' to symbol instead of whitespace.

2004-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-restore-gcc): Use ^ and regexp-quote.

	* gnus-sum.el (gnus-summary-morse-message): Use search-forward
	instead of re-search-forward.

	* gnus-uu.el (gnus-uu-save-article): Ditto.
	(gnus-uu-post-encode-uuencode): Ditto.

	* html2text.el (html2text-clean-list-items): Ditto.
	(html2text-clean-dtdd): Ditto.
	(html2text-format-tags): Ditto.

	* message.el (message-send-mail-with-sendmail): Fix regexp.
	(message-fill-field-general): Use search-forward instead of
	re-search-forward.
	(unbold-region): Ditto.

	* nnrss.el (nnrss-request-article): Ditto.

	* nnslashdot.el (nnslashdot-request-article): Ditto.

	* nnweb.el (nnweb-gmane-wash-article): Ditto.

	* gnus-sum.el (gnus-summary-make-menu-bar): Avoid the
	"Unrecognized menu descriptor" error in XEmacs.

2004-08-26  Stefan Wiens <s.wi@gmx.net>  (tiny change)

	* gnus-sum.el (gnus-read-header): Don't remove a header for the
	parent article of a sparse article in the thread hashtb.

2004-08-26  David Hedbor <dhedbor@real.com>  (tiny change)

	* nnmail.el (nnmail-split-lowercase-expanded): New user option.
	(nnmail-expand-newtext): Lowercase expanded entries if
	nnmail-split-lowercase-expanded is non-nil.

2004-08-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Fix regexp in the rfc822-forward
	entry.

	* gnus-group.el (gnus-group-line-format-alist): Convert the value
	of gnus-tmp-news-method into string under XEmacs.  It will be
	passed to gnus-correct-length which takes only a string argument.

2004-08-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-bind-print-variables): New macro.
	(gnus-prin1): Use it.
	(gnus-prin1-to-string): Use it.
	(gnus-pp): New function.
	(gnus-pp-to-string): New function.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field): Replace
	pp-to-string with gnus-pp-to-string.
	* gnus-eform.el (gnus-edit-form): Replace pp with gnus-pp.
	* gnus-group.el (gnus-group-make-kiboze-group): Ditto.
	* gnus-msg.el (gnus-debug): Ditto.
	* gnus-score.el (gnus-score-save): Ditto.
	* gnus-spec.el (gnus-update-format): Replace pp-to-string with
	gnus-pp-to-string.
	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days): Replace pp
	with gnus-pp.
	* score-mode.el (gnus-score-pretty-print): Ditto.
	* webmail.el (webmail-debug): Ditto.

2004-08-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face, article-display-x-face): Use
	buffer-read-only.

2004-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-list-identifiers): Bind
	inhibit-read-only as t.

2004-08-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-mlspl.el (gnus-group-split-update): Fix docstring.

2004-08-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el: Use inhibit-read-only instead of buffer-read-only.
	(gnus-narrow-to-page): Don't assume point-min == 1.
	(gnus-article-edit-mode): Derive from message-mode.

	* gnus-score.el (gnus-score-find-bnews): Simplify and don't assume
	point-min == 1.

	* imap.el (imap-parse-address-list, imap-parse-body-ext):
	Disable incorrect use of `assert'.

	* message.el (message-mode): Set comment-start-skip.


2004-08-22  Sam Steingold  <sds@gnu.org>

	* pop3.el (pop3-leave-mail-on-server): New user variable.
	(pop3-movemail): Delete mail only when it is nil.

2004-08-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp-marks-is-evil): Fix typo in docstring.

	* mml.el (mml-preview): Use `pop-to-buffer'.

	* message.el (message-goto-mail-followup-to): Insert after "To".
	(message-carefully-insert-headers): Add comment.

	* gnus.el: Remove unused variable `gnus-article-check-size'.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add help texts.

	* gnus-art.el (gnus-button-alist): Improve
	`gnus-button-handle-library' entry.

2004-08-19  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--emlink-p, nnmaildir--enoent-p): Use
	downcase, since XEmacs capitalizes error messages differently.
	From Sebastian Freundt <hroptatyr@gna.org>.

2004-08-18  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el: Add (require 'gnus) due to reference to
	`gnus-directory'.  Reported by Matt Swift <swift@alum.mit.edu>.

2004-08-18  Florian Weimer  <fw@deneb.enyo.de>

	* gnus-sum.el (gnus-summary-force-verify-and-decrypt): Bind
	`mm-fill-flowed'.

	* mm-decode.el (mm-dissect-singlepart): Check it.

2004-08-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): add 'imaps' synonym to
	'imap' for netrc parsing

2004-08-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mailcap.el (mailcap-mime-data): Mark as risky.

2004-08-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Assume the close parenthesis
	may be included in the encoded word.
	(rfc2047-encode): Don't append a space if the encoded word
	includes close parenthesis.

2004-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-1, rfc2047-encode): Improve encoding
	of text within parentheses.

2004-08-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-encrypt.el (gnus-encrypt-insert-file-contents)
	(gnus-encrypt-write-file-contents): the password key is the file
	name PLUS the cipher, not just the cipher.  Also remove failed
	passwords from the cache.

2004-08-06  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-article-loose-mime): Change default to t.  Doc
	fix.

2004-08-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-fold-region): Use trailing whitespace as
	LWSP.

2004-08-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): try
	to append in-reply-to: data to the references: header

	* netrc.el: removed old encryption support, autoload gnus-encrypt.el
	(netrc-parse): use gnus-encrypt.el functions

	* gnus-encrypt.el: new file for encryption support; currently
	does only a few GPG ciphers and an internal XOR cipher

	* password.el: add comments on using password-read-and-add
	(password-read-and-add): new function to read and add the
	password to the cache at once

2004-07-28  Simon Josefsson  <jas@extundo.com>

	* pgg-pgp5.el (pgg-pgp5-encrypt-region): Accept sign
	parameter (but don't use it, for now).

	* imap.el (imap-ssl-open): Use imap-process-connection-type,
	instead of hard coding to nil.

2004-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-image-emacs): Open lines under an image
	as mm-inline-image-xemacs does.

2004-07-26  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-group-map, gnus-group-make-menu-bar):
	Revert part of 2004-07-17 change below.

2004-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Don't infloop.  Suggested by
	Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-07-25  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* flow-fill.el (fill-flowed): Remove space stuffing, and only do
	quotes that actually start with ">" at the beginning of the
	lines.

2004-07-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.
	(rfc2047-encode-parameter): Remove useless concat.

2004-07-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Check carefully whether to
	encode special characters; fix some kind of misconfigured headers;
	signal a real error if debug-on-quit or debug-on-error is non-nil.
	(rfc2047-encode-max-chars): New variable.
	(rfc2047-encode-1): Use it.
	(rfc2047-encode-parameter): New function.

	* mml.el (mml-insert-parameter): Remove an excessive space.

2004-07-17  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-make-group-simple): Add, suggested by
	Kai Grossjohann <kai@emptydomain.de>.
	(gnus-group-group-map): Use it, instead of gnus-group-make-group.
	(gnus-group-make-menu-bar): Ditto.

	* gnus-util.el (gnus-group-server): Add.

2004-07-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-clone-locals): Clone sendmail and smtp
	variables.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Treat backslash-quoted
	characters as non-special.

2004-07-09  Simon Josefsson  <jas@extundo.com>

	* gnus-agent.el (gnus-agent-synchronize-flags): Revert to ask.
	Users will lose all flag changes made while unplugged with
	e.g. nntp unless flag synchronization happens, thus `nil' is not a
	good default.  See numerous reports on ding mailing list.

2004-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Improve regexp for article-begin,
	add generate-head-function and generate-article-function to the
	rfc822-forward entry.
	(nndoc-rfc822-forward-generate-article): New function.
	(nndoc-rfc822-forward-generate-head): New function.

	* mm-decode.el (mm-dissect-buffer): Simplify cleaning of CTE.

2004-07-06  Dan Christensen  <jdc@uwo.ca>

	* gnus-sum.el (gnus-summary-read-group-1): When summary
	is unthreaded, respect display group parameter.
	(gnus-articles-to-read): Remove unused reference to
	display group parameter.

2004-07-03  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnheader.el (nnheader-uniquify-message-id): New experimental
	variable.
	(nnheader-nov-read-message-id): Use it.

	* spam-report.el (spam-report-gmane): Add interactive.

2004-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-content-transfer-encoding-defaults): Use
	qp-or-base64 for the application/* types.

2004-07-02  Joakim Verona  <joakim@verona.se>  (tiny change)

	* nnrss.el (nnrss-read-group-data): Fix off-by-one error.

2004-06-30  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): don't allow a negative
	trim value

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--condcase, nnmaildir--enoent-p):
	New macro and function.
	(nnmaildir--new-number, nnmaildir-request-set-mark): Use them.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): Fix cleaning of
	after-load-alist.

2004-06-29  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't
	update info that isn't there.

2004-06-29  Ilya N. Golubev  <gin@mo.msk.ru>.

	* mm-util.el (mm-mime-mule-charset-alist): Add the windows-1251
	entry.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-render-with-function): Use multibyte
	buffer; decode html source by charset.

	* mm-encode.el (mm-content-transfer-encoding-defaults): Doc fix.

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): New function run when
	Mule-UCS is loaded under XEmacs.
	(mm-mime-mule-charset-alist): Avoid duplicated entries.

2004-06-28  Jesper Harder  <harder@ifa.au.dk>

	* nnheader.el (nnheader-max-head-length): Increase to 8192.

2004-06-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-p): Return a coding-system.
	(mm-mime-mule-charset-alist): Use shift_jis instead of
	iso-2022-jp-2 for the katakana-jisx0201 mule charset; add new
	entries for the mime charsets iso-2022-jp-3 and shift_jis.
	(mm-coding-system-priorities): Use shift_jis and iso-8859-1
	instead of japanese-shift-jis and iso-latin-1 respectively in
	order to share the default value with both Emacs and XEmacs-mule.
	(mm-mule-charset-to-mime-charset): Make
	mm-coding-system-priorities effective.
	(mm-sort-coding-systems-predicate): Canonicalize coding-systems
	while predicating of candidates upon the priorities.

2004-06-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-make-menu-bar): Add
	gnus-uu-invert-processable.

	* gnus.el: Autoload gnus-uu-invert-processable.

2004-06-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-with-multibyte-buffer): New macro.

	* rfc2047.el (rfc2047-encode-string): Use it.
	(rfc2047-encode-region): Move point to the end of the region after
	encoding.  Suggested by IRIE Tetsuya <irie@t.email.ne.jp>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-parse): Don't ignore case when finding
	">From ".  Thanks to Reiner Steib <Reiner.Steib@gmx.de>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-ignore-quoted-from): New user option.
	(gnus-cite-parse): Ignore quoted envelope From_.  Suggested by
	Karl Chen <quarl@nospam.quarl.org>.

2004-06-23  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-idna-to-ascii-rhs-1): Don't choke on
	invalid addresses.

2004-06-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el: section markers changed, TODO list revised
	(spam-backends): new master list of all installed backends
	(spam-summary-exit-behavior): new variable to determine how
	messages moves are done at summary exit
	(spam-move-spam-nonspam-groups-only)
	(spam-process-ham-in-nonham-groups)
	(spam-process-ham-in-spam-groups): variables removed, the
	spam-summary-exit-behavior variable should be used to manage this
	behavior
	(spam-old-ham-articles, spam-old-spam-articles): removed
	(spam-old-articles): new variable, replacing spam-old-ham-articles
	and spam-old-spam-articles
	(spam-use-copy, spam-use-move, spam-use-gmane, spam-use-resend):
	empty variables, placeholders for the backends they represent
	(spam-set-difference): moved, unchanged
	(spam-list-of-processors): variable OBSOLETE, not used anymore
	unless the user has a processor variable
	(spam-classifications, spam-classification-valid-p)
	(spam-backend-properties, spam-backend-property-valid-p)
	(spam-backend-function-type-valid-p)
	(spam-process-type-valid-p, spam-list-articles): helper functions
	(spam-report-articles-gmane, spam-report-articles-resend):
	functions removed, they are not needed
	(spam-install-backend-super, spam-backend-list)
	(spam-backend-check, spam-backend-valid-p, spam-backend-info)
	(spam-backend-function, spam-backend-ham-registration-function)
	(spam-backend-spam-registration-function)
	(spam-backend-ham-unregistration-function)
	(spam-backend-spam-unregistration-function)
	(spam-backend-statistical-p, spam-backend-mover-p)
	(spam-install-backend-alias, spam-install-checkonly-backend)
	(spam-install-mover-backend, spam-install-nocheck-backend)
	(spam-install-backend, spam-install-statistical-backend)
	(spam-install-statistical-checkonly-backend): backend installation
	support
	(spam-summary-prepare-exit): rewritten to use the new backend code
	(spam-group-processor-p): use the new backend code and respect the
	summary exit behavior
	(spam-mark-spam-as-expired-and-move-routine): removed
	(spam-summary-prepare): changed to use the new spam-old-articles
	variable
	(spam-copy-or-move-routine, spam-copy-spam-routine)
	(spam-move-spam-routine, spam-copy-ham-routine)
	(spam-move-ham-routine): new code to copy/move ham or spam
	(spam-fetch-field-fast): doc and code improved, plus it allows the
	'number request
	(spam-list-of-checks, spam-list-of-statistical-checks): variables
	removed, no longer used
	(spam-split, spam-find-spam): use the new backend code
	(spam-registration-functions): variable removed, no longer used
	(spam-unregister-routine): convenience wrapper
	(spam-log-undo-registration, spam-register-routine)
	(spam-log-processing-to-registry)
	(spam-log-unregistration-needed-p): renamed "check" to "backend"
	where possible
	(spam-check-gmane-xref, spam-check-regex-headers)
	(spam-check-blackholes, spam-check-stat, spam-check-ifile, spam-check-BBDB)
	(spam-check-whitelist, spam-check-blacklist)
	(spam-check-bogofilter-headers, spam-check-spamoracle)
	(spam-check-spamassassin-headers, spam-check-bsfilter-headers)
	(spam-check-crm114-headers): use the spam-split-group that
	spam-split prepares, no need to determine it every time

	* nnimap.el (nnimap-retrieve-headers-progress): add the message number to
	the nnheader-parse-naked-head call

	* nnheader.el (nnheader-generate-fake-message-id): fix indentation

	* gnus-sum.el (gnus-nov-parse-line): add the message number to
	the nnheader-nov-read-message-id call

2004-06-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't call
	gnus-activate-group twice.  Suggested by Markus Peter
	<warp@spin.de>.

2004-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-time-format): Exchange the order of
	day and month in the default value; fix customization type.
	(article-date-ut): Use add-text-properties.
	(article-make-date-line): Use message-make-date instead of
	current-time-string.

	* message.el (message-fetch-field): Don't use set-text-properties.
	(message-make-date): Simplify.

	* messagexmas.el (message-xmas-make-date): New function.
	(message-xmas-redefine): Defalias message-make-date to it.

2004-06-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-syntax-table): Treat `(' and `)' as is.
	(rfc2047-encode-region): Treat text within parentheses as special;
	show the original text when error has occurred.

	* gnus-group.el (gnus-group-get-new-news-this-group): Pass the
	already-computed method to gnus-activate-group.

	* gnus-start.el (gnus-make-hashtable-from-newsrc-alist): Make the
	same select-methods identical Lisp objects.

	* gnus-srvr.el (gnus-server-set-info): Don't make a new Lisp
	object when modifying the info.

2004-06-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-srvr.el (gnus-server-set-info): Remove the server from
	gnus-opened-servers since it has never been opened with the new
	configuration yet.

2004-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-nov-read-message-id): Pass the optional
	arg to nnheader-generate-fake-message-id.

2004-06-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnheader.el (nnheader-generate-fake-message-id): accept a
	number and build a fake message ID localized to a group and
	article number (so it's repeatable from that point on)
	(nnheader-fake-message-id-p): change regex to accomodate new fake
	ID format

	* gnus-sum.el (gnus-get-newsgroup-headers): call
	nnheader-generate-fake-message-id with the article number

2004-06-12  YAGI Tatsuya  <ynyaaa@ybb.ne.jp>  (tiny change)

	* gnus-art.el (gnus-article-next-page): Fix the way to find a real
	end-of-buffer.

2004-06-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-ignored-supersedes-headers): Add Approved.

2004-06-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-message-header): Remove useless
	goto-char.
	(rfc2047-encode): Fold the line before encoding.

2004-06-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* rfc2047.el (rfc2047-encode-message-header): Disabled header
	folding -- not all headers can be folded, and this should be done
	by the message composition mode.  Probably.  I think.

2004-06-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-remove-text-with-property): Make it slightly
	fast.

	* gnus-ems.el (gnus-remove-image): Don't use
	message-text-with-property; remove only the image found first.

	* gnus-xmas.el (gnus-xmas-remove-image): Remove only the image
	found first.

2004-06-09  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-send-mail-with-sendmail): Use with-current-buffer.

2004-06-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-text-with-property): Make it fast and accept
	optional arguments.
	(message-strip-forbidden-properties): Use it.
	(message-fix-before-sending): Follow the m-t-w-p change.

	* gnus-ems.el (gnus-remove-image): Follow the m-t-w-p change.

2004-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Don't change the buffer
	mistakenly when performing mml-preview even if
	gnus-single-article-buffer is nil.

2004-06-08  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* message.el (message-expand-name-databases): New user option.
	(message-expand-name): Use it.

2004-06-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-report-articles-resend)
	(spam-report-resend-register-routine): allow ham reporting
	(spam-report-resend-register-ham-routine): simple wrapper
	(spam-registration-functions): add ham resending functions
	(spam-list-of-processors): add ham resend processor

	* gnus.el (ham-resend-to): new group parameter
	(spam-process): add ham resend option

	* spam-report.el (spam-report-resend): allow reporting ham
	(spam-report-resend-ham): simple wrapper

2004-06-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-articles-with-x-no-archive): New
	variable.
	(message-cite-original): Use it.

2004-06-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-original): Respect X-No-Archive.

2004-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Refer to the values for
	gnus-ignored-headers and gnus-visible-headers in the summary
	buffer since a user may have set them as group parameters.

2004-06-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-node-name): new convenience function
	(assistant-render-text, assistant-render-node): error handling,
	plus handle multiple next nodes
	(assistant-find-next-node): commented out for now
	(assistant-find-next-nodes): new function, returns list of next
	nodes

2004-06-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-source-directory): Fix doc-string.

2004-05-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text, assistant-eval): add :set
	widget type, which is different because it takes and returns a
	list.  Much hilarity ensues.

2004-05-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist): Fixed regexp for manual links.

	* gnus-group.el (gnus-group-get-new-news-this-group): Added
	doc-string.

	* gnus-start.el (gnus-activate-group): Added doc-string.

2004-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-safer-encoding): Consider 7bit is safe.

2004-05-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text): trying to add a :set
	widget, more to come...

	* spam.el (spam-group-spam-contents-p): handle empty groupname
	strings
	(spam-report-articles-resend)
	(spam-register-routine): do registration iff any articles warrant
	it.
	(spam-summary-prepare-exit): changed log message for nil group
	destinations

2004-05-27  Daniel Pittman  <daniel@rimspace.net>

	* spam.el (spam-report-resend-register-routine): allow
	spam-report-resend-to to be a group parameter or a global value

2004-05-26  Simon Josefsson  <jas@extundo.com>

	* starttls.el: Merge with my GNUTLS based starttls.el.
	(starttls-gnutls-program, starttls-use-gnutls)
	(starttls-extra-arguments, starttls-process-connection-type)
	(starttls-connect, starttls-failure, starttls-success): New
	variables.
	(starttls-program, starttls-extra-args): Doc fix.
	(starttls-negotiate-gnutls, starttls-open-stream-gnutls): New
	functions.
	(starttls-negotiate, starttls-open-stream): Check
	`starttls-use-gnutls' and pass on to corresponding *-gnutls
	function if it is set.

2004-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Encode encoded words in
	structured fields.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-resend): Bind rfc2047-encode-encoded-words.

2004-05-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-mark-new-messages-in-spam-group-as-spam): New
	variable.
	(spam-mark-junk-as-spam-routine): Use it.  Allow to disable
	assigning the spam-mark to new messages.

2004-05-26  Adam Sj,Ax(Bgren  <asjo@koldfront.dk>  (tiny change)

	(spam-ham-copy-or-move-routine): Don't declare `todo' twice.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload customize-set-variable for XEmacs.

	* rfc2047.el (rfc2047-encodable-p): Don't move point.
	(rfc2047-decode): Treat the ascii coding-system as raw-text by
	default.

2004-05-25  Anand Mitra <mitramc@yahoo.com>  (tiny change)

	* gnus-sum.el (gnus-summary-delete-article): invoke hook with
	correct data.

2004-05-24  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): use nil for nonexistent processors
	(spam-group-processor-p): fixed function so it works properly
	(spam-group-processor-multiple-p)
	(spam-group-spam-processor-report-gmane-p)
	(spam-group-spam-processor-report-resend-p)
	(spam-group-spam-processor-bogofilter-p)
	(spam-group-spam-processor-blacklist-p)
	(spam-group-spam-processor-ifile-p)
	(spam-group-ham-processor-ifile-p)
	(spam-group-spam-processor-spamoracle-p)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-bogofilter-p)
	(spam-group-spam-processor-stat-p)
	(spam-group-ham-processor-stat-p)
	(spam-group-ham-processor-whitelist-p)
	(spam-group-ham-processor-BBDB-p)
	(spam-group-ham-processor-spamoracle-p)
	(spam-group-ham-processor-copy-p): functions removed with some
	prejudice against unneeded code
	(spam-report-articles-resend)
	(spam-report-resend-register-routine): allow the group/topic
	spam-resend-to value to override spam-report-resend-to
	(spam-summary-prepare-exit): invoke spam-group-processor-p
	properly now

	* spam-report.el (spam-report-resend-to, spam-report-resend):
	start with resend-to set to nil, and then ask the user if
	necessary.  From Daniel Pittman <daniel@rimspace.net>.

	* gnus.el (spam-resend-to): new group/topic parameter
	(spam-process): move the OBSOLETE processors to the end of the
	choices.

	* spam-report.el (spam-report-resend): spam-report-resend takes a
	list of articles, not separate article numbers.  From Daniel
	Pittman <daniel@rimspace.net>.

2004-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-text-html-renderer): Make sure w3m exists in
	addition to emacs-w3m.

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* assistant.el (assistant-authinfo-data): New function.
	(assistant-eval): Eval for entire assistant.

	* netrc.el (netrc-services-file): New variable.
	(netrc-parse-services): New function.
	(netrc-find-service-name): New function.
	(netrc-find-service-number): New function.
	(netrc-port-equal): New function.
	(netrc-machine): Use it.

	* nnimap.el (nnimap-open-connection): Use netrc.

	* gnus-util.el (gnus-netrc-get): Remove aliases.

	* gnus-sum.el (gnus-auto-center-summary): Change default to 2.

	* assistant.el (wid-edit): Fix compilation.

	* gnus-util.el (gnus-set-file-modes): Just ignore errors.

2004-05-23  Paul Stodghill  <stodghil@cs.cornell.edu>

	* gnus-util.el (gnus-set-file-modes): New function.  (small
	patch).

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-topic.el (gnus-topic-jump-to-topic): Goto missing topic.

	* assistant.el (assistant-render-node): Fix up rendering and
	read-only text.
	(assistant-render-node): Reset.
	(assistant-make-read-only): Not sticky.

2004-05-20  Danny Siu  <dsiu@adobe.com>

        * gnus-sum.el (gnus-summary-recenter): Summery buffer was not auto
	centered even when gnus-auto-center-summary is t

2004-05-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (dns-get-txt-answer): New function.
	(dns-read-txt): Ditto.
	(query-dns): Use it.

2004-05-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Don't invalidate
	active for foreign groups even if the group level is higher than
	the specified value.

2004-05-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-jump-to-group): Don't prompt for
	non-active groups.

	* gnus-art.el (gnus-picon-databases): Add /usr/share/picons.

2004-05-20  Magnus Henoch  <mange@freemail.hu>

	* dns.el (dns-read-type): Add support for SVR.  (small patch)

2004-05-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-crm114, spam-crm114, spam-crm114-program)
	(spam-crm114-header, spam-crm114-spam-switch)
	(spam-crm114-spam-strong-switch, spam-crm114-ham-strong-switch)
	(spam-crm114-positive-spam-header)
	(spam-crm114-database-directory, spam-list-of-processors)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-crm114-p, spam-extra-header-to-number)
	(spam-generic-score, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-crm114-headers, spam-crm114-score)
	(spam-check-crm114, spam-crm114-register-with-crm114)
	(spam-crm114-register-spam-routine)
	(spam-crm114-unregister-spam-routine)
	(spam-crm114-register-ham-routine)
	(spam-crm114-unregister-ham-routine): add CRM114 support.  From
	asjo@koldfront.dk (Adam Sj,Ax(Bgren).

	* gnus.el: added spam-use-crm114

	* spam.el (spam-list-of-processors, spam-registration-functions):
	add spam-use-resend
	(spam-group-spam-processor-report-resend-p): utility wrapper
	(spam-report-articles-gmane): doc fix
	(spam-report-articles-resend,
	spam-report-resend-register-routine): wrappers around
	spam-report-resend-to

	* spam-report.el (spam-report-resend-to, spam-report-resend):
	support for resending spam
	(spam-report-gmane): line length >80 fix

	* gnus.el (spam-process): add spam-use-resend

2004-05-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-mark-spam-as-expired-and-move-routine): Return the
	number of processed spam messages.
	(spam-ham-copy-or-move-routine): Return the number of processed
	ham messages.
	(spam-summary-prepare-exit): Use the above values to decide
	whether status messages shouled be displayed.

2004-05-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-function-alist): Renamed from
	`rfc2047-encoding-function-alist' in order to avoid conflicting
	with the old version.
	(rfc2047-encode-region): Concatenate words containing non-ASCII
	characters in structured fields; don't encode space-delimited
	ASCII words even in unstructured fields; don't break words at
	char-category boundaries.
	(rfc2047-encode-1): New function.
	(rfc2047-encode): Use it; encode text so that it occupies the
	maximum width within 76-column; work correctly on Q encoding for
	iso-2022-* charsets.
	(rfc2047-fold-region): Use existing whitespace for LWSP; make it
	sure not to break a line just after the header name.
	(rfc2047-b-encode-region): Removed.
	(rfc2047-b-encode-string): New function.
	(rfc2047-q-encode-region): Removed.
	(rfc2047-q-encode-string): New function.

	* mm-util.el (mm-replace-in-string): New function.

2004-05-20  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Really
	get it right.
	(gnus-inews-make-draft): Really.

2004-05-19  Ben Menasha  <bmenasha@benmenasha.net>

	* nnmh.el (nnmh-request-list-1): Don't check the link count
	before descending.  (small patch)

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Fix quote
	stuff.

	* gnus-start.el (gnus-subscribe-hierarchical-interactive): Match
	on real group name.

	* gnus-art.el (gnus-signature-limit): Doc fix.

	* gnus-msg.el (gnus-inews-make-draft): Quote list.

	* pgg-pgp.el (pgg-pgp-verify-region): Clean up.

2004-05-19  Michael Schierl  <schierlm-usenet@gmx.de>  (tiny change)

	* pgg-pgp.el (pgg-pgp-verify-region): Default when signature
	isn't a string.

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-draft.el (gnus-draft-send): Bind
	rfc2047-encode-encoded-words.

	* rfc2047.el (rfc2047-encode-region): Encode =? strings.
	(rfc2047-encodable-p): Say that =? needs encoding.
	(rfc2047-encode-encoded-words): New variable.

	* gnus-group.el (gnus-group-select-group): Doc fix.

	* gnus-draft.el (gnus-draft-setup): Mark all replied as replied.

	* gnus-group.el (gnus-group-mode): Set show-trailing-whitespace
	to nil.

	* gnus-cache.el (gnus-cache-possibly-enter-article): Use it.

	* nnheader.el (nnheader-get-lines-and-char): New function.

2004-05-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-summary-followup-with-original): Document
	yanking of region when active.

2004-05-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Do nothing for foreign
	groups if the group level is higher than the specified value.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-jump-to-group-prompt): Allow an alist.
	(gnus-group-jump-to-group): Added prefix argument using
	`gnus-group-jump-to-group-prompt'.  Query before jumping to
	non-active group.

	* compface.el (uncompface): Be verbose when changing
	`uncompface-use-external'.

	* gnus-art.el (gnus-button-handle-man, gnus-button-alist): Try to
	handle manual section.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-button-alist): Revert previous change.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-idna-to-ascii-rhs-1): Fix typo.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-do-gcc): Don't use read-only-p to see
	whether backend can accept message.

	* message.el (message-idna-to-ascii-rhs-1): Don't use equalp.

2004-05-18  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info):
	Avoid creating directory when nntp-marks-is-evil is true.
	Reported by Reiner Steib.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el (gnus-picon-style): New variable.
	(gnus-picon-insert-glyph): Added optional `nostring' argument.
	(gnus-picon-transform-address): Support `gnus-picon-style'.  From
	Jesper Harder <harder@ifa.au.dk>.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-fill-field): Return point.
	(message-generate-headers): Go to end of field.

	* gnus-start.el (gnus-get-unread-articles-in-group): Don't do
	stuff for non-living groups.

2004-05-18  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-article-followup-with-original)
	(gnus-article-reply-with-original): gnus-mark-active-p ->
	gnus-region-active-p.

2004-05-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): fix messages, so they show
	only when there is spam or ham to be processed

2004-05-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mail-source.el (mail-source-delete-crash-box): Refactor.
	(mail-source-fetch): Use it.
	(mail-source-fetch-file): Ditto.
	(mail-source-fetch-directory): Run postscript in loop.
	(mail-source-fetch-pop): Delete.
	(mail-source-fetch-maildir): Ditto.
	(mail-source-fetch-imap): Ditto.

	* imap.el (imap-authenticators): Comment out sasl.

	* message.el (message-skip-to-next-address): New function.
	(message-fill-header-address): Refactor.
	(message-fill-address): Use it.
	(message-delete-address): Use it.
	(message-fill-header-general): Refactor.
	(message-fill-field-address): Rename.
	(message-narrow-to-field): Find the start of the header.
	(message-header-format-alist): Don't pre-fill.
	(message-fill-header): Removed.
	(message-insert-header): New function.
	(message-shorten-references): Use it.

	* rfc2047.el (rfc2047-field-value): Strip props.

	* mail-parse.el (mail-header-make-address): New alias.

	* ietf-drums.el (ietf-drums-make-address): New function.

	* imap.el: Add compiler directives.

	* gnus-score.el (gnus-score-edit-done): run-hook->run-hooks.

	* gnus-art.el (article-decode-idna-rhs): Don't use
	message-idna-inside-rhs-p.

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-idna-inside-rhs-p): Removed.
	(message-idna-to-ascii-rhs-1): Use proper address parsing.

	* gnus-art.el (gnus-emphasis-alist): Removed strikethru; too many
	false positives.

2004-05-16  Kim Minh Kaplan  <kmkaplan-AwwS6Bc0PDVoiYX5Tdu9fQ@public.gmane.org>

	* imap.el (imap-sasl-make-mechanisms): Use sasl.

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nneething.el (nneething-file-name): Don't create spurions
	files.

	* gnus-msg.el (gnus-inews-do-gcc): Ignore read-only groups.
	(gnus-inews-do-gcc): Remove sleep.

	* gnus-art.el (gnus-mime-delete-part): Error message when no MIME
	part under point.

	* gnus-agent.el (gnus-agent-synchronize-flags): Default to nil.
	(gnus-agent-regenerate-group): Using nil messages aren't valid.

2004-05-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): oops, forgot (length)

2004-05-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): only produce "marking spam
	as expired without moving it" message when there are spam
	messages left

2004-05-14  Nelson Ferreira  <nelson.ferreira@verizon.net>  (tiny change)

	* gnus-dup.el (gnus-dup-unsuppress-article): don't assume the mail
	header is not nil.

2004-05-14  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info): Call
	nntp-possibly-create-directory, not nntp-possibly-change-group.
	(nntp-marks-changed-p): New arg SERVER.
	(nntp-request-update-info): Adjust caller.

2004-05-14  Kai Grossjohann  <kai@emptydomain.de>

	* nntp.el (nntp-save-marks): Pass missing arg.

2004-05-13  Kai Grossjohann  <kai.grossjohann@gmx.net>

	* nntp.el: Support marks.
	(nntp-marks-is-evil, nntp-marks-file-name, nntp-marks)
	(nntp-marks-modtime, nntp-marks-directory): New variables.
	(nntp-request-set-mark, nntp-request-update-info)
	(nntp-possibly-create-directory, nntp-marks-changed-p)
	(nntp-save-marks, nntp-open-marks, nntp-marks-directory): New
	functions.

2004-05-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-xmas.el (gnus-xmas-select-lowest-window)
	(gnus-xmas-redefine): Rename.

	* gnus-score.el (gnus-score-insert-help): Use
	gnus-select-lowest-window.

	* gnus-ems.el (gnus-select-lowest-window): Copy definition of
	appt-select-lowest-window and rename to gnus-select-lowest-window.

	* gnus.el: do.

2004-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* rfc2047.el (rfc2047-encode): Use uppercase letters to specify
	encodings of MIME-encoded words, in order to improve
	interoperability with several broken MUAs.

2004-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mm-view.el (mm-inline-text-html-render-with-w3): Check META
	tags, only when charsets are not specified in headers.
	(mm-inline-text-html-render-with-w3m): Ditto.

	* lpath.el: Remove `w3m-meta-content-type-charset-regexp' and
	`w3m-charset-to-coding-system'.  Add `w3m-detect-meta-charset'.

2004-05-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (article-strip-banner): Use MIME-encoded from fields
	instead of MIME-decoded from fields when checking
	`gnus-article-address-banner-alist'.

2004-05-03  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-check-group, nnrss-read-group-data): Hash on
	description rather than subject.

2004-05-02  Steve Youngs  <steve@youngs.au.com>

	* dgnushack.el: Autoload `mail-fetch-field' for XEmacs.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.

2004-05-01 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.2 is released.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-agent.el (gnus-agent-read-agentview): Inline
	gnus-uncompress-range.

2004-05-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-bsfilter-path): Use `executable-find' instead of
	`exec-installed-p'.

2004-04-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus.el (spam-process, spam-autodetect-methods): Add
	bsfilter and bsfilter-headers.

	* spam.el (spam-bsfilter): New customize group.
	(spam-use-bsfilter, spam-use-bsfilter-headers, spam-bsfilter-path)
	(spam-bsfilter-header, spam-bsfilter-probability-header)
	(spam-bsfilter-spam-switch, spam-bsfilter-ham-switch)
	(spam-bsfilter-spam-strong-switch, spam-bsfilter-ham-strong-switch)
	(spam-bsfilter-database-directory): New options.
	(spam-install-hooks, spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions):
	Add `spam-use-bsfilter' and `spam-use-bsfilter-headers'.
	(spam-bsfilter-score): New command.
	(spam-check-bsfilter-headers, spam-check-bsfilter)
	(spam-bsfilter-register-with-bsfilter)
	(spam-bsfilter-register-spam-routine)
	(spam-bsfilter-unregister-spam-routine)
	(spam-bsfilter-register-ham-routine)
	(spam-bsfilter-unregister-ham-routine): New functions.
	(spam-generic-score): Support bsfilter; Accept an optional argument
	to recalcurate spam score even if scoring header has already been
	added.
	(spam-bogofilter-score, spam-spamassassin-score): Accept an
	optional argument to recalcurate spam score even if scoring header
	has already been added.

2004-04-29  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-get-namespace-prefix): Use string= to compare
	strings!  Reported by David D. Smith <davidsmith@acm.org>.
	(nnrss-check-group, nnrss-read-group-data): Hash on Subject if
	link is missing.

2004-04-28  Jesper Harder  <harder@ifa.au.dk>

	* html2text.el (html2text-replace-list): Add &amp; and &apos;.
	(html2text-get-attr): Rewrite.

	* message.el (message-setup-1): Remove redundant put-text-property
	on mail-header-separator.

2004-04-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-whitespace)
	(gnus-registry-action, gnus-registry-spool-action)
	(gnus-registry-split-fancy-with-parent): changed message levels
	from 5 to 3 or 7, as needed

	* spam.el (spam-summary-prepare-exit)
	(spam-mark-junk-as-spam-routine, spam-fetch-field-fast)
	(spam-split, spam-find-spam, spam-log-undo-registration)
	(spam-check-blackholes, spam-enter-ham-BBDB): changed message
	level from 5 to 6

2004-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el: Autoload appt-select-lowest-window (revert
	2004-03-04 change).

2004-04-25  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-score-buffer): Simplify mapcar usage.
	Use mapc when appropriate.

	* sieve-manage.el (sieve-manage-open): do.

	* nnweb.el (nnweb-insert-html): do.

	* nnvirtual.el (nnvirtual-catchup-group, nnvirtual-partition-sequence)
	(nnvirtual-partition-sequence, nnvirtual-create-mapping): do.

	* nnspool.el (nnspool-request-group): do.

	* nnrss.el (nnrss-opml-export, nnrss-find-el, nnrss-order-hrefs):
	do.

	* nnml.el (nnml-request-update-info): do.

	* nnmh.el (nnmh-request-group, nnmh-request-list-1, nnmh-active-number)
	(nnmh-request-create-group, nnmh-update-gnus-unreads): do.

	* nnimap.el (nnimap-request-close, nnimap-acl-edit)
	(nnimap-request-set-mark): do.

	* nnfolder.el (nnfolder-request-update-info): do.

	* mm-view.el (mm-pkcs7-signed-magic, mm-pkcs7-enveloped-magic):
	do.

	* mml.el (mml-destroy-buffers, mml-compute-boundary-1): do.

	* gnus-uu.el (gnus-uu-find-articles-matching): do.

	* gnus-topic.el (gnus-topic-check-topology, gnus-topic-remove-group):
	do.

	* gnus-sum.el (gnus-summary-fetch-faq, gnus-read-move-group-name):
	do.

	* gnus-score.el (gnus-score-load-file, gnus-sort-score-files): do.

	* gnus-nocem.el (gnus-nocem-scan-groups): do.

	* gnus-int.el (gnus-start-news-server): do.

	* gnus-group.el (gnus-group-make-kiboze-group)
	(gnus-group-browse-foreign-server): do.

2004-04-22  Teodor Zlatanov  <tzz@lifelogs.com>

	From Dan Christensen <jdc@uwo.ca>, asjo@koldfront.dk (Adam
	Sj,Ax(Bgren), Wes Hardaker <wes@hardakers.net>, and Michael Shields
	<shields@msrl.com>:

	* spam.el (spam-necessary-extra-headers): get the extra headers we
	may need for spam sorting and scoring
	(spam-user-format-function-S): a user format function suitable for
	general use
	(spam-article-sort-by-spam-status): sorting function for summary
	sorting
	(spam-extra-header-to-number): get a score from a header
	(spam-summary-score): get a numeric score from the headers
	(spam-generic-score): oops, function doc in wrong place
	(spam-initialize): take symbols when it's run, and install the
	extra headers that spam-necessary-extra-headers thinks we need

2004-04-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): logic and message fix.
	Reported by bojohan+news@dd.chalmers.se (Johan Bockg,Ae(Brd).

2004-04-17  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-set-global-variables)
	(gnus-build-all-threads, gnus-get-newsgroup-headers)
	(gnus-article-get-xrefs, gnus-summary-best-group)
	(gnus-summary-next-article, gnus-summary-enter-digest-group)
	(gnus-summary-set-bookmark, gnus-offer-save-summaries)
	(gnus-summary-update-info, gnus-kill-or-deaden-summary): Use
	with-current-buffer.

2004-04-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): simplified logic
	(spam-fetch-article-header): read the article header if it's not
	available
	(spam-list-articles): simplified logic
	(spam-filelist-register-routine): found bug with unregister-list

	* gnus-registry.el: clarified comments at beginning

2004-04-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cater-to-broken-inn): Remove.
	(message-shorten-references): Make sure the total folded length of
	References is shorter than 998 characters to cater to a bug in INN
	2.3.  Also, don't pretend that references aren't folded -- this
	hasn't worked for a while.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agentize):
	gnus-agent-send-mail-real-function no longer set to current value
	of message-send-mail-function but rather a lambda that calls
	message-send-mail-function.  The change makes the agent real-time
	responsive to user changes to message-send-mail-function.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* legacy-gnus-agent.el
	(gnus-agent-convert-to-compressed-agentview): Fixed typos with
	help from Florian Weimer <fw@deneb.enyo.de>

2004-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Revert last change.

2004-04-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Always check whether
	nnmail-cache-ignore-groups matches a group name.

2004-04-13  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-generate-fake-headers)
	(spam-find-spam, spam-log-processing-to-registry)
	(spam-log-registered-p, spam-log-unregistration-needed-p)
	(spam-log-undo-registration): use gnus-message instead of
	gnus-error, none of these errors are fatal

	* gnus-registry.el (gnus-registry-clean-empty-function)
	(gnus-registry-clean-empty): remove only empty entries without
	extra data

2004-04-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-stat.el (spam-stat-buffer-change-to-spam)
	(spam-stat-buffer-change-to-non-spam): change (error) to
	(gnus-message 8) invocation

2004-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-via-netcat-command): New variable.
	(nntp-via-netcat-switches): New variable.
	(nntp-open-via-rlogin-and-netcat): New function.
	(nntp-open-connection-function): Doc fix.
	(nntp-telnet-command): Doc fix.
	(nntp-end-of-line): Doc fix.
	(nntp-via-rlogin-command): Doc fix.
	(nntp-via-user-name): Doc fix.
	(nntp-via-address): Doc fix.

2004-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml2015.el (mml2015-use): Avoid the "Recursive load suspected"
	error in Emacs 21.1.

2004-04-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-get-unread-articles): Fix last commit.

2004-04-07  Kevin Greiner  <kgreiner@xpediantsolutions.com>
	* gnus-agent.el (gnus-agent-total-fetched-hashtb): New variable.
	(gnus-agent-with-refreshed-group): New macro.
	(gnus-agent-rename-group): New function.
	(gnus-agent-delete-group): New function.
	(gnus-agent-save-group-info): Use gnus-command-method when
	`method' parameter is nil.  Don't write nil entries into the
	active file.
	(gnus-agent-get-group-info): New function.
	(gnus-agent-fetch-articles): Use
	gnus-agent-update-files-total-fetched-for to increment disk space
	used.
	(gnus-agent-fetch-headers, gnus-agent-save-alist): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-get-local): Added optional parameters to avoid calling
	gnus-group-real-name and gnus-find-method-for-group.
	(gnus-agent-set-local): Delete stored entry if either min, or max,
	are nil.
	(gnus-agent-fetch-session): Reworded error/quit messages.  On
	quit, use gnus-agent-regenerate-group to record existance of any
	articles fetched to disk before the quit occurred.
	(gnus-agent-expire-group-1): Use gnus-agent-with-refreshed-group,
	gnus-agent-update-view-total-fetched-for, and
	gnus-agent-update-files-total-fetched-for to decrement disk space
	used.
	(gnus-agent-retrieve-headers): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-regenerate-group): Replace gnus-group-update-group
	with gnus-agent-update-files-total-fetched-for to decrement disk
	space and fresh group buffer.
	(gnus-agent-inhibit-update-total-fetched-for): New variable.
	(gnus-agent-need-update-total-fetched-for): New variable.
	(gnus-agent-update-files-total-fetched-for): New function.
	(gnus-agent-update-view-total-fetched-for): New function.
	(gnus-agent-total-fetched-for): New function.

	* gnus-cache.el (gnus-cache-save-buffers): Use
	gnus-cache-update-overview-total-fetched-for to change disk space
	used by this group.
	(gnus-cache-possibly-enter-article): Use
	gnus-cache-update-file-total-fetched-for to increment disk space
	used by this group.
	(gnus-cache-possibly-remove-article): Use
	gnus-cache-update-file-total-fetched-for to decrement disk space
	used by this group.
	(gnus-cache-generate-nov-databases): Purge total fetched cache.
	(gnus-cache-rename-group): New function.
	(gnus-cache-delete-group): New function.
	(gnus-cache-inhibit-update-total-fetched-for): New variable.
	(gnus-cache-need-update-total-fetched-for): New variable.
	(gnus-cache-with-refreshed-group): New macro.
	(gnus-cache-update-file-total-fetched-for): New function.
	(gnus-cache-update-overview-total-fetched-for): New function.
	(gnus-cache-rename-group-total-fetched-for): New function.
	(gnus-cache-delete-group-total-fetched-for): New function.
	(gnus-cache-total-fetched-for): New function.

	* gnus-group.el: Require gnus-sum and autoload functions to
	resolve warnings when gnus-group.el compiled alone.
	(gnus-group-line-format): Documented new %F
	(size of Fetched data) group line format; identifies disk space
	used by agent and cache.
	(gnus-group-line-format-alist): Defined new F format.
	(gnus-total-fetched-for): New function.
	(gnus-group-delete-group): No longer update
	gnus-cache-active-altered as gnus-request-delete-group now keeps
	the cache in sync.
	(gnus-group-list-active): Let the agent store a server's active
	list if currently plugged.

	* gnus-int.el (gnus-request-delete-group): Use
	gnus-cache-delete-group and gnus-agent-delete-group to keep the
	local disk in sync with the server.
	 (gnus-request-rename-group): Use
	gnus-cache-rename-group and gnus-agent-rename-group to keep the
	local disk in sync with the server.

	* gnus-start.el (gnus-get-unread-articles): Cosmetic
	simplification to logic.

	* gnus-util.el (gnus-rename-file): New function.

2004-04-07  Christian Neukirchen  <chneukirchen@yahoo.de>  (tiny change)

	* mm-util.el (mm-image-load-path): Handle nil in load-path.

2004-04-07  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Remove unnecessary
	'+'.  Reported by Stefan Wiens <s.wi@gmx.net>.

2004-04-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-save-buffers): Check if buffer is
	alive.  Reported by Laurent Martelli <laurent@aopsys.com>.

2004-04-03  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-getenv-nntpserver): Strip whitespace.

2004-04-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-set-difference): new function to replace
	gnus-set-difference in spam.el
	(spam-summary-prepare-exit): use spam-set-difference

2004-03-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-file): updated to use
	gnus-dribble-directory OR gnus-home-directory OR ~
	(gnus-registry-split-fancy-with-parent): fixed doc

2004-03-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Use
	message-mark-active-p.  Suggested by Jesper Harder
	<harder@ifa.au.dk>.

2004-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Don't activate
	region if it was inactive.  Suggested by Hiroshi Fujishima
	<pooh@nature.tsukuba.ac.jp>.

2004-03-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Display Faces in the same
	order as X-Faces.

2004-03-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-forward-type-p): Recognize envelope From_.

2004-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): Remove.
	(gnus-mime-multipart-functions): Revert 2004-03-19 change.
	(gnus-article-mime-hierarchy): Remove.
	(gnus-article-mime-hierarchy-next): Remove.
	(gnus-article-mode): Revert 2004-03-19 change.
	(gnus-article-setup-buffer): Revert 2004-03-19 change.
	(gnus-insert-mime-button): Revert 2004-03-19 change.
	(gnus-mime-accumulate-hierarchy): Remove.
	(gnus-mime-enter-multipart): Remove.
	(gnus-mime-leave-multipart): Remove,
	(gnus-mime-display-part): Revert 2004-03-19 change.
	(gnus-mime-display-alternative): Revert 2004-03-19 change.

	* mml.el (mml-preview): Revert 2004-03-19 change.

2004-03-18  Helmut Waitzmann  <Helmut.Waitzmann@web.de>  (tiny change)

	* gnus-sum.el (gnus-newsgroup-variables): Doc fix.

2004-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-save-part): Bind enable-multibyte-characters to
	t while entering a file name using the mm-with-multibyte macro.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

	* mm-util.el (mm-with-multibyte): New macro.

2004-03-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): New
	user option.
	(gnus-mime-multipart-functions): Doc and customization fix.
	(gnus-article-mime-hierarchy): New variable.
	(gnus-article-mime-hierarchy-next): New variable.
	(gnus-article-mode): Make gnus-article-mime-hierarchy buffer-local.
	(gnus-article-setup-buffer): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.
	(gnus-insert-mime-button): Show hierarchy numbers.
	(gnus-mime-accumulate-hierarchy): New function.
	(gnus-mime-enter-multipart): New function.
	(gnus-mime-leave-multipart): New function.
	(gnus-mime-display-part): Recompute hierarchical MIME structure.
	(gnus-mime-display-alternative): Show hierarchy numbers.

	* mml.el (mml-preview): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.

2004-03-19  Steve Youngs  <sryoungs@bigpond.net.au>

	* dns.el: Don't require gnus-xmas.

2004-03-17  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-generate-mime-1): Don't use format=flowed with
	inline PGP.
	(mml-menu): Disable mml-quote-region if mark is inactive.

2004-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-regenerate-group): Activate the group
	when the group's active is not available.

2004-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-read-agentview): Add a missing arg to
	error.

2004-03-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* imap.el (imap-store-password): New variable.
	(imap-interactive-login): Use it.
	Suggested by Mark Plaksin <happy@mcplaksin.org>.

2004-03-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Restore new
	window-start and hscroll to summary window.

2004-03-12  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-start.el (gnus-convert-old-newsrc): Only write the
	conversion message to newsrc-dribble when an actual conversion is
	performed.

2004-03-10  Malcolm Purvis  <malcolmpurvis@optushome.com.au>  (tiny change)

	* spam-stat.el (spam-stat-coding-system): Use mm-coding-system-p.

2004-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-complicated-handles): New function reviving
	former definition of mm-multiple-handles.

	* gnus-art.el (gnus-mime-save-part-and-strip): Use it.
	(gnus-mime-delete-part): Use it.

2004-03-09  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-local): Bind
	nnheader-file-coding-system to gnus-agent-file-coding-system to
	avoid the implicit assumption that they will always be equal.
	(gnus-agent-save-local): Bind buffer-file-coding-system, not
	coding-system-for-write, as the with-temp-file macro first prints
	to a buffer then saves the buffer.

2004-03-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): New function.
	(gnus-mime-save-part-and-strip): Use it; do query instead of
	signaling an error; don't use mm-multiple-handles.
	(gnus-mime-delete-part): Ditto.

2004-03-08  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-agentview): Removed support for
	old file versions.
	(gnus-group-prepare-hook): Removed function that converted list
	form of gnus-agent-expire-days to group properties.

	* gnus-int.el: Autoload gnus-agent-regenerate-group.
	(gnus-request-accept-article): Re-indented.

	* gnus-start.el (gnus-convert-old-newsrc): Registered new
	converters to handle old agent file formats.  Added logic for a
	"backup before upgrading warning".
	(gnus-convert-mark-converter-prompt): Developers can mark
	functions as needing (default), or not needing,
	gnus-convert-old-newsrc's "backup before upgrading warning".
	(gnus-convert-converter-needs-prompt): Tests whether the user
	should be protected from potentially irreversable changes by the
	function.

	* legacy-gnus-agent.el (): New. Provides converters that are only
	loaded when gnus-convert-old-newsrc needs to call them.

2004-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mail-source.el (mail-source-touch-pop): Doc fix.

	* message.el (message-smtpmail-send-it): Doc fix.

2004-03-05  Jesper Harder  <harder@ifa.au.dk>

	* sha1-el.el (sha1-maximum-internal-length): Doc fix.

	* nnmail.el (nnmail-split-fancy): do.

	* gnus-kill.el (gnus-kill, gnus-execute): do.

2004-03-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-sum.el (gnus-widget-reversible-match)
	(gnus-widget-reversible-to-internal)
	(gnus-widget-reversible-to-external): New functions.
	(gnus-widget-reversible): New widget.
	(gnus-article-sort-functions, gnus-thread-sort-functions): Use it.

2004-03-05  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* gnus-sum.el (gnus-thread-sort-functions)
	(gnus-article-sort-functions): Document `(not F)' items.

2004-03-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-gmane-xref): new backend
	(spam-gmane-xref-spam-group): variable to control the name of the
	Gmane spam group
	(spam-blackhole-servers, spam-blackhole-good-server-regex)
	(spam-regex-headers-spam, spam-regex-headers-ham)
	(spam-regex-body-spam, spam-regex-body-ham): clarified docs
	(spam-list-of-checks): added spam-use-gmane-xref to list of
	backends and checks
	(spam-check-gmane-xref): function for spam-use-gmane-xref

	* gnus.el (spam-autodetect-methods): add spam-use-gmane-xref as
	an autodetect method

2004-03-04  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-int.el (gnus-request-accept-article): Inform the agent that
	articles are being added to a group.
	(gnus-request-replace-article): Inform the agent that articles
	need to be uncached as the cached contents are no longer valid.

2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* binhex.el: Don't autoload executable-find.

	* canlock.el: Don't autoload mail-fetch-field.

	* dgnushack.el: Autoload c-mode for XEmacs.

	* gnus-ems.el: Don't autoload appt-select-lowest-window.

	* gnus-msg.el: Don't autoload news-reply-mode, news-setup,
	rmail-dont-reply-to and rmail-output.

	* gnus-score.el: Don't autoload ffap-string-at-point.

	* gnus-setup.el: Don't autoload sc-cite-original.

	* imap.el: Don't autoload base64-decode-string,
	base64-encode-string and md5.

	* message.el: Autoload rmail-dont-reply-to, rmail-msg-is-pruned
	and rmail-msg-restore-non-pruned-header.

	* mm-decode.el: Don't autoload executable-find.

	* mm-url.el: Don't autoload executable-find.

	* mm-view.el: Don't autoload diff-mode.

	* nndb.el: Don't autoload news-reply-mode, news-setup,
	cancel-timer and telnet.

	* password.el: Don't autoload run-at-time for Emacs.

	* sha1-el.el: Don't autoload executable-find.

	* sieve-mode.el: Don't autoload c-mode.

	* uudecode.el: Don't autoload executable-find.

2004-03-04  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-file-header-cache): Removed.
	(gnus-agent-possibly-alter-active): Avoid null in numeric
	comparison.
	(gnus-agent-set-local): Refuse to save null in local object table.
	(gnus-agent-regenerate-group): The REREAD parameter can now be a
	list of articles that will be marked as unread.

2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encoded-word-regexp): Mismatched paren.

2004-03-04  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Support RFC 2231
	language tags.

2004-03-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-agent.el (gnus-agent-read-local, gnus-agent-save-local):
	Don't bind "obarray".

	* gnus-sum.el (gnus-thread-sort-functions): Added
	`gnus-thread-sort-by-most-recent-number' and
	`gnus-thread-sort-by-most-recent-date'.
	Reported by Kai Grossjohann <kai@emptydomain.de>.

2004-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cus.el (gnus-agent-customize-category): Mismatched paren.

2004-03-02  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-cus.el (gnus-agent-customize-category): Removed
	ignore-errors macro reference that required cl to be loaded at
	run-time.

	* gnus-range.el (gnus-sorted-range-intersection): Now accepts
	single-interval range of the form (min . max).  Previously the
	range had to look like ((min . max)).  Likewise, return
	(min . max) rather than ((min . max)).
	(gnus-range-map): Use gnus-range-normalize to accept
	single-interval range.

	* gnus-sum.el (gnus-summary-highlight-line): Articles stored in
	the cache, but not the agent, now appear with their usual face.

	* dgnushack.el (loaddir): New variable that is bound to the
	directory containing the dgnushack.el file. Use loaddir, rather
	than srcdir, to update load-path. Change lets dgnushack compile
	code in directories other than GNUS/lisp.

2004-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Don't bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't make the
	w3m-safe-url-regexp variable buffer-local.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

2004-02-27  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-move-group-prefix-function): Add, default to
	gnus-group-real-prefix.
	(gnus-summary-move-article): Use it, instead of
	gnus-group-real-prefix.

2004-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Make the
	w3m-safe-url-regexp variable buffer-local and set it as the value
	of mm-w3m-safe-url-regexp.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

	* gnus-msg.el (gnus-setup-message): Ignore an article copy while
	parsing gnus-posting-styles when the message is not for replying.

	* dgnushack.el: Autoload sgml-mode for XEmacs.

	* nnrss.el (nnrss-opml-export): Use
	mm-set-buffer-file-coding-system instead of
	set-buffer-file-coding-system.

2004-02-27  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el: Pedantic docstring and whitespace fixes (courtesy
	of checkdoc.el).
	* nnrss.el: do.
	* gnus-mlspl.el: do.
	* gnus-ml.el: do.
	* gnus-srvr.el: do.

	* nnrss.el (nnrss-opml-export): Turn on sgml-mode.

2004-02-27  Kevin Ryde  <user42@zip.com.au>  (tiny change)

	* gnus.el (gnus-group, gnus-summary, gnus-summary-sort):
	Corrections to custom-manual links.

	* gnus-art.el (gnus-article): Ditto.

	* mm-decode.el (mime-display, mime-security): Ditto.

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* flow-fill.el: Typo.

2004-02-26  Andrew Cohen  <cohen@andy.bu.edu>

	* spam-wash.el: New file.

2004-02-26  Mark A. Hershberger  <mah@everybody.org>

	* nnrss.el (nnrss-opml-import, nnrss-opml-export): New functions.

2004-02-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): gnus-set-difference needs
	to be run with new-articles as LIST1, not LIST2
	(spam-registration-functions): add spam-use-ham-copy as a nil
	registration backend

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-washing-hook): New option.
	(spam-stat-buffer-words): Use it.
	(spam-stat-process-directory, spam-stat-test-directory): Use
	insert-file-contents-literally.
	(spam-stat-coding-system): New variable.
	(spam-stat-load, spam-stat-save): Use it.

2004-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* spam-report.el (spam-report-plug-agent): Quote
	spam-report-url-to-file and spam-report-url-ping-plain.

2004-02-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist, gnus-header-button-alist): Allow
	/ in mailto URLs.

2004-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): Fix interactive use.
	(spam-report-url-ping-temp-agent-function, spam-report-plug-agent)
	(spam-report-unplug-agent): Doc fixes.
	(spam-report-url-ping-mm-url, spam-report-url-to-file)
	(spam-report-agentize, spam-report-deagentize): Autoload

2004-02-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el (with-syntax-table): Redefine it for XEmacs 21.5.

	* message.el (message-setup-fill-variables): Add mml tags to
	paragraph-start and paragraph-separate.  Suggested by Andrew Korty
	<ajk@iu.edu>.
	(message-mode): Don't modify paragraph-separate there.

2004-02-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface-use-external): Default to undecided.
	(uncompface-use-external-threshold): New variable.
	(uncompface-float-time): New macro.
	(uncompface): Determine whether to use the external decoder if
	uncompface-use-external is undecided.

2004-02-15  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mm-view.el (mm-inline-image-emacs): Don't insert blank lines
	after images.

	* gnus-art.el (gnus-mime-display-single): Remove dead code.

2004-02-14  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-request-article, nnrss-find-el): Cleanup.

	* html2text.el (html2text-get-attr, html2text-fix-paragraph): do

	* gnus-sum.el (gnus-summary-limit-to-age)
	(gnus-summary-limit-children): do.

	* gnus-int.el (gnus-request-scan): do.

	* gnus-group.el (gnus-group-suspend): do.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field): do.

	* gnus-cite.el (gnus-cite-parse-attributions): do.

	* gnus-agent.el (gnus-summary-set-agent-mark)
	(gnus-agent-regenerate-group): do.

	* deuglify.el (gnus-article-outlook-unwrap-lines): do.

	* binhex.el (binhex-decode-region-internal): do.

2004-02-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-fun.el (gnus-face-properties-alist): New user option.
	(gnus-display-x-face-in-from): Use it.

	* gnus-art.el (article-display-face): Ditto.

	* compface.el (uncompface-use-external): Default to nil.

2004-02-12  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el (nntp-erase-buffer): New function.
	(nntp-retrieve-data, nntp-send-command)
	(nntp-send-buffer, nntp-retrieve-groups, nntp-handle-authinfo)
	(nntp-possibly-change-group): Use it.

	* nnnil.el (nnnil-retrieve-headers, nnnil-request-list): Use
	with-current-buffer.

2004-02-12  TAKAI Kousuke  <tak@kmc.gr.jp>

	* compface.el: Merge the ELisp-based uncompface program.
	(compface): New customization group.
	(uncompface-use-external): New user option.
	(uncompface): Call uncompface-internal if uncompface-use-external
	is nil.
	(uncompface-internal): New function.  Note that there are also
	some other functions and variables added for this function.

2004-02-10  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-read-group-data): Initialize nnrss-group-hashtb
	if necessary.

2004-02-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-report.el (spam-report-unplug-agent)
	(spam-report-plug-agent, spam-report-deagentize)
	(spam-report-agentize, spam-report-url-ping-temp-agent-function):
	support for the Agent in spam-report: when unplugged, report to a
	file; when plugged, submit all the requests

	* spam.el (spam-register-routine): improved message about
	registration

2004-02-09  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-qp-or-base64): New function to reduce
	dependencies.
	(rfc2047-encode): Use it.

	* gnus-art.el (gnus-button-marker-list): Move before first
	reference.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix format string mismatch.

	* gnus-score.el (gnus-summary-increase-score): do.

	* nnrss.el (nnrss-close): New function.

2004-02-08  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-make-filename): New function.
	(nnrss-request-delete-group, nnrss-read-server-data)
	(nnrss-save-server-data, nnrss-read-group-data)
	(nnrss-save-group-data): Use it.
	(nnrss-save-server-data, nnrss-save-group-data): Use gnus-prin1.
	(nnrss-read-server-data, nnrss-read-group-data): Use load.
	(nnrss-group-hashtb): Make it a hash table rather than an obarray.

2004-02-07  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-compute-boundary-1): Don't uncompress files.

2004-02-06  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-mode, mml-x-dnd-attach-file): Attach drop and drag
	files.

	* message.el (message-generate-headers-first): Don't quote nil
	and t in docstrings.

	* imap.el (imap-id): do.

	* gnus-agent.el (gnus-agent-consider-all-articles)
	(gnus-agent-queue-mail): do.

2004-02-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): New function.
	Process requests from `spam-report-requests-file'.
	(spam-report-process-queue): Doc fix.

2004-02-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine)
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	change "check" to "spam-check" for semi-clarity

2004-02-05  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el: Require nnheader.

	* mml-smime.el: Require cl.  Autoload message-fetch-field.

	* mml-sec.el (mml-signencrypt-style): Don't depend on Gnus.

	* gnus-picon.el: Require cl.

	* gnus-fun.el: Require gnus-ems and gnus-util.

	* gnus.el (gnus-method-to-server): Move defsubst before first use.

	* gnus-diary.el (gnus-diary-header-schedule): caddr -> car (cddr

	* gnus-art.el (gnus-article-edit-mode): Define before first
	reference.

2004-02-04  Jesper Harder  <harder@ifa.au.dk>

	* gnus-uu.el (gnus-uu-check-correct-stripped-uucode): Simplify.
	(gnus-uu-post-encoded): Use point-at-bol.

	* gnus-topic.el (gnus-group-active-topic-p): do.

	* gnus-start.el (gnus-newsrc-to-gnus-format): do.

	* gnus-group.el (gnus-group-kill-region): do.

	* gnus-art.el (article-date-ut): do.

	* message.el (message-fetch-field): Remove redundant
	case-fold-search binding.
	(message-narrow-to-field): Simplify.

2004-02-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-directory): Derive from `gnus-directory'.

	* spam-report.el (spam-report-url-to-file)
	(spam-report-requests-file): New function and variable for offline
	reporting.
	(spam-report-url-ping-function): Add `spam-report-url-to-file'
	and user defined function.
	(spam-report-url-ping-mm-url): Remove doubled slash.

2004-02-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): fixed spamassassin variable names

2004-02-03  Jesper Harder  <harder@ifa.au.dk>

	* spam.el (spam-check-spamoracle, spam-spamoracle-learn): Fix
	format string mismatch.

	* sieve.el (sieve-deactivate-all): do.

	* nnfolder.el (nnfolder-request-set-mark, nnfolder-save-marks): do.

	* nnlistserv.el (nnlistserv-kk-wash-article): do.

	* nnml.el (nnml-request-set-mark, nnml-save-marks): do.

	* mm-bodies.el (mm-7bit-chars): Don't include \r.

2004-02-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-checks): added spam-use-BBDB-eclusive to
	the list of checks

2004-01-31  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-pad-base64): Deal with more cases of invalid
	padding.

2004-01-27  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* mm-view.el (mm-fill-flowed): New variable.
	(mm-inline-text): Use it.

2004-01-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-spamassassin-register-ham-routine)
	(spam-spamassassin-register-spam-routine): fixed function names

2004-01-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-tmp-grouplens): Remove.
	(gnus-summary-line-format): Remove grouplens.

	* gnus-group.el (gnus-group-line-format): Ditto.

	* gnus-spec.el (gnus-format-specs): Ditto.
	(gnus-update-format-specifications): Flush the group format spec
	cache if there's the grouplens stuff.
	(gnus-parse-simple-format): Replace %l with the empty string.

2004-01-27  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus-spec.el (gnus-parse-simple-format): Fix setq value
	omission.
	From Jerry James  <james@xemacs.org>

2004-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-resend-message-edit): Call mime-to-mml.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--num-file, nnmaildir--mkfile,
	nnmaildir--emlink-p, nnmaildir--eexist-p, nnmaildir--new-number):
	New macros and functions.
	* nnmaildir.el (nnmaildir--group-maxnum, nnmaildir--update-nov):
	Handle > NLINK_MAX messages.
	* nnmaildir.el (nnmaildir-request-set-mark): Use
	nnmaildir--emlink-p and nnmaildir--eexist-p.

2004-01-25  Alex Schroeder  <alex@gnu.org>

	* spam-stat.el (spam-stat-process-directory-age): New option.
	(spam-stat-process-directory): Use it.

2004-01-24  Hiroshi Fujishima  <pooh@nature.tsukuba.ac.jp>  (tiny change)

	* spam-stat.el (spam-stat-reduce-size): Set spam-stat-dirty.
	(spam-stat-save): Accept prefix argument.

2004-01-23  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-set-mark): Handle the "too many
	links" error.

2004-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Advise byte-optimize-form-code-walker to optimize
	the rest of the and/or forms.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-tmp-grouplens): Define for the sake of backward
	compatibility with old .newsrc.eld files.

	* gnus-xmas.el (gnus-xmas-grouplens-menu-add): Remove.

	* gnus-sum.el (gnus-summary-line-format-alist): Remove grouplens.

	* gnus-start.el (gnus-1): do.

	* gnus-group.el (gnus-group-line-format-alist): do.

	* gnus.el (gnus-use-grouplens, gnus-visual): do.

	* gnus-gl.el: Remove.

2004-01-23  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Now correctly handles a list of
	marks consisting of a single range {for example, (3 . 5)} rather
	than a list of a single range { ((3 . 5)) }.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-store-gnus-article-buffer): Use
	with-current-buffer.
	(spam-stat-store-current-buffer): Use insert-buffer-substring to
	avoid consing a string.

	* mm-util.el (mm-charset-synonym-alist): Add ks_c_5601-1987.
	Remove obsolete entries for big5 and gb2312.

2004-01-22  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Avoid splicing null INTO the
	uncompressed list.

2004-01-22  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-strip-xref): New function.
	(spam-stat-process-directory): Use it.

	* gnus-util.el (gnus-fetch-field): Don't bind case-fold-search
	here -- it's done in message-fetch-field.

2004-01-21  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-queue-mail,
	gnus-agent-prompt-send-queue): New variables.
	(gnus-agent-send-mail): Use gnus-agent-queue-mail.
	* gnus-draft.el (gnus-group-send-queue): Pass the group name
	"nndraft:queue" along to gnus-draft-send.  Use
	gnus-agent-prompt-send-queue.
	(gnus-draft-send): Rebind gnus-agent-queue-mail to nil when group
	is "nndraft:queue".  Suggested by Gaute Strokkenes
	<gs234@srcf.ucam.org>

	* gnus-agent.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added
	(gnus-agent-cat-groups): Use eval-and-compile, not
	eval-when-compile, to define gnus-agent-set-cat-groups as the setf
	method of gnus-agent-cat-groups even when the buffer has been
	evaled.
	(gnus-agent-save-active,gnus-agent-save-active-1): Merged to
	delete gnus-agent-save-active-1.
	(gnus-agent-save-groups): Deleted. Identical to
	gnus-agent-save-active.
	(gnus-agent-write-active): No longer adjust agent's copy of active
	file as agent's adjustments are now stored in their own
	file. Removed optional parameter.
	(gnus-agent-possibly-alter-active): Ignore groups of unagentized
	servers.  Add use of min/max range limits from server's local
	file.
	(gnus-agent-save-alist): Removed unused optional argument.
	(gnus-agent-load-local,gnus-agent-read-and-cache-local),
	(gnus-agent-read-local,gnus-agent-save-local,gnus-agent-get-local),
	(gnus-agent-set-local): A per-server file that keeps min/max range
	limits for articles known to the agent.	 Provides a fast mechanism
	for altering many active ranges.
	(gnus-agent-expire-group,gnus-agent-expire): No longer save the
	active file (local makes it unnecessary).
	(gnus-agent-regenerate-group): Fixed XEmacs compatibility.

	* gnus-cus.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added

	* gnus-draft.el (gnus-draft-send): Bind gnus-agent-queue-mail to
	disable it when sending to "nndraft:queue".
	(gnus-group-send-queue): Add safety check to avoid sending queue
	when unplugged.

	* gnus-group.el (gnus-group-catchup): Use new
	gnus-sequence-of-unread-articles, not
	gnus-list-of-unread-articles, to avoid exhausting memory with huge
	numbers of articles.  Use gnus-range-map to avoid having to
	uncompress the unread list.
	(gnus-group-archive-directory,
	gnus-group-recent-archive-directory): Fixed invalid ange-ftp
	reference.

	* gnus-range.el (gnus-range-map): Iterate over list or sequence.
	(gnus-sorted-range-intersection): Intersection of two ranges
	without requiring that they first be uncompressed.

	* gnus-start.el (gnus-activate-group): Unless blocked by the
	caller, possibly expand the active range to include both cached
	and agentized articles.
	(gnus-convert-old-newsrc): Rewrote in anticipation of having
	multiple version-dependent converters.
	(gnus-groups-to-gnus-format): Replaced gnus-agent-save-groups with
	gnus-agent-save-active.
	(gnus-save-newsrc-file): Save dirty agent range limits.

	* gnus-sum.el (gnus-select-newgroup): Replaced inline code with
	gnus-agent-possibly-alter-active.
	(gnus-adjust-marked-articles): Faster handling of simple lists

2004-01-21  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-test-directory): New optional argument
	displays a list of files detected.  Suggested by Andrew Cohen
	<cohen@andy.bu.edu>.
	(spam-stat-buffer-words-with-scores): Don't narrow and change
	syntax table here.  Reported by Andrew Cohen <cohen@andy.bu.edu>.

2004-01-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (gnus-summary-mode-map): make spam-generic-score the
	default scoring function
	(spam-generic-score): calls spam-spamassassin-score if
	spam-use-spamassassin or spam-use-spamassassin-headers is on;
	spam-bogofilter-score otherwise.

	From Hubert Chan <hubert@uhoreg.ca>:

	* spam.el (spam-use-spamassassin, spam-use-spamassassin-headers)
	(spam-install-hooks, spam-spamassassin, spam-spamassassin-path)
	(spam-spamassassin-arguments)
	(spam-spamassassin-spam-flag-header)
	(spam-spamassassin-positive-spam-flag-header)
	(spam-spamassassin-spam-status-header, spam-sa-learn-path)
	(spam-sa-learn-rebuild, spam-sa-learn-spam-switch)
	(spam-sa-learn-ham-switch, spam-sa-learn-unregister-switch)
	(spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-spamassassin-headers, spam-check-spamassassin)
	(spam-spamassassin-score)
	(spam-spamassassin-register-with-sa-learn)
	(spam-spamassassin-register-spam-routine)
	(spam-spamassassin-register-ham-routine)
	(spam-assassin-register-spam-routine)
	(spam-assassin-register-ham-routine): add SpamAssassin support
	(spam-bogofilter-score): fix to show article before scoring

	* gnus.el (spam-process, spam-autodetect-methods): add
	spamassassin and spamassassin-headers

	* gnus-registry.el (gnus-registry-split-fancy-with-parent):
	Suppress unnecessary messages.  From Nevin Kapur
	<nkapur@cs.caltech.edu>.

2004-01-20  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-to-hash-table): Use :size keyword in
	make-hash-table.

2004-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (base64-encode-string): Don't autoload it.

2004-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* run-at-time.el: Remove useless (require 'itimer),
	eval-and-compile and (featurep 'xemacs).

2004-01-16  Jesper Harder  <harder@ifa.au.dk>

	* gnus-msg.el (gnus-post-news): Use blank Newsgroups line if
	GROUP is a virtual group.

2004-01-16  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus.el: Autoload `message-y-or-n-p'.

2004-01-15  Jesper Harder  <harder@ifa.au.dk>

	* pgg-parse.el: Remove unnecessary (require 'custom).

	* pgg-def.el: do.

	* nnmail.el: do.

	* gnus-undo.el: do.

	* gnus-picon.el: do.

	* gnus-util.el: do.

2004-01-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-pick-line-number): Add autoload.

2004-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-multiple-handles): Recognize a string as a mime
	handle, as well as a list.

	* mm-view.el (mm-w3m-cid-retrieve-1): Call itself recursively.
	Suggested by ARISAWA Akihiro <ari@mbf.sphere.ne.jp>.
	(mm-w3m-cid-retrieve): Simplify.

2004-01-14  Kai Grossjohann  <kai@emptydomain.de>

	* message.el (message-kill-to-signature): Allow prefix arg to
	specify number of lines to keep before signature.  From Vasily
	Korytov.
	(message-kill-to-signature): Change docstring.

2004-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el: Always require sha1-el.
	(canlock-sha1): Bind sha1-maximum-internal-length to nil.

	* message.el: Autoload sha1 only when compiling.

	* lpath.el: Bind eudc-protocol for both Emacs and XEmacs; fbind
	eudc-expand-inline for XEmacs.

2004-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-canlock-generate): Require sha1-el.

2004-01-13  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-expand-name): Silence the byte compiler.

	* lpath.el: Add detect-coding-system.

	* dgnushack.el (dgnushack-compile): Remove obsolete check for
	cus-edit.

2004-01-13  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): Fix prototype.
	Invoke gnus-score-mode.  Reported by
	bojohan+news@dd.chalmers.se (Johan Bockg,Ae(Brd).

	* gnus-range.el (gnus-compress-sequence): Doc fix.  Suggested by
	Jim Blandy <jimb@redhat.com> (tiny change).

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-srvr.el (gnus-browse-foreign-server): Reduce consing.

2004-01-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-get-article-as-string): updated to use
	gnus-request-article-this-buffer, much simpler
	(spam-get-article-as-buffer): removed

2004-01-12  Kai Grossjohann  <kai.grossjohann@mci.com>

	* message.el (message-expand-name): Use EUDC if the user uses
	that.

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-parse-and-decode, rfc2047-decode): Use a
	character for the encoding to avoid consing a string.

	* rfc2047.el (rfc2047-decode-string): Don't cons a string
	unnecessarily.

	* mm-util.el (mm-replace-chars-in-string): Remove.

	* rfc2047.el (rfc2047-decode): Use mm-subst-char-in-string instead
	of mm-replace-chars-in-string.

2004-01-11  Jesper Harder  <harder@ifa.au.dk>

	* gnus.sum.el (gnus-remove-odd-characters): Don't cons two new
	strings.

	* mm-util.el (mm-subst-char-in-string): Support inplace.

	* gnus-sum.el (gnus-summary-remove-list-identifiers): Don't cons
	a new string in every iteration.  Use shy groups.

2004-01-10  Jesper Harder  <harder@ifa.au.dk>

	* gnus-start.el (gnus-subscribe-newsgroup, gnus-start-draft-setup)
	(gnus-group-change-level, gnus-kill-newsgroup)
	(gnus-check-bogus-newsgroups, gnus-get-unread-articles-in-group)
	(gnus-get-unread-articles, gnus-make-articles-unread)
	(gnus-make-ascending-articles-unread): Use accessor
	macros (gnus-group-entry, gnus-group-unread, gnus-info-marks etc.)
	to get group information for improved readability.

	* gnus-srvr.el (gnus-browse-unsubscribe-group): do.

	* gnus-soup.el (gnus-soup-group-brew): do.

	* gnus-msg.el (gnus-put-message): do.

	* gnus-move.el (gnus-group-move-group-to-server): do.

	* gnus-kill.el (gnus-batch-score): do.

	* gnus-group.el (gnus-group-prepare-flat, gnus-group-delete-group)
	(gnus-group-update-group-line, gnus-group-insert-group-line-info)
	(gnus-group-update-group, gnus-group-read-group)
	(gnus-group-make-group, gnus-group-make-help-group)
	(gnus-group-make-archive-group, gnus-group-make-directory-group)
	(gnus-group-make-empty-virtual, gnus-group-sort-selected-flat)
	(gnus-group-sort-by-unread, gnus-group-catchup)
	(gnus-group-unsubscribe-group, gnus-group-kill-group)
	(gnus-group-yank-group, gnus-group-set-info)
	(gnus-group-list-groups): do.

	* gnus.el (gnus-generate-new-group-name): do.

	* gnus-delay.el (gnus-delay-send-queue): do.

	* nnvirtual.el (nnvirtual-catchup-group): do.

	* nnkiboze.el (nnkiboze-generate-group, nnkiboze-generate-group):
	do.

	* gnus-topic.el (gnus-topic-find-groups, gnus-topic-clean-alist)
	(gnus-group-prepare-topics, gnus-topic-check-topology): do.

	* gnus-sum.el (gnus-update-read-articles, gnus-select-newsgroup)
	(gnus-mark-xrefs-as-read, gnus-compute-read-articles)
	(gnus-summary-walk-group-buffer, gnus-summary-move-article)
	(gnus-group-make-articles-read): do.

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Use gnus-with-article-buffer.

	* gnus-art.el (gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): Use gnus-with-article-headers.

	* gnus-art.el (gnus-mm-display-part, gnus-article-wash-status)
	(gnus-article-set-globals, gnus-request-article-this-buffer)
	(gnus-button-message-id, gnus-article-maybe-hide-headers)
	(gnus-mime-view-part-externally, gnus-mime-view-part-internally)
	(gnus-mime-display-alternative): Use with-current-buffer.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-generate-fake-headers): rewrite to be simpler,
	also under 80 char limit, and call gnus-error if needed
	(spam-fetch-article-header): finally fixed - it was a
	buffer-local variable (gnus-newsgroup-data)
	(spam-find-spam): use spam-generate-fake-headers, forget about
	spam-insert-fake-headers
	(spam-insert-fake-headers): removed

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* deuglify.el (gnus-article-outlook-unwrap-lines)
	(gnus-outlook-rearrange-article)
	(gnus-outlook-repair-attribution-outlook)
	(gnus-outlook-repair-attribution-block)
	(gnus-outlook-repair-attribution-other): Remove redundant
	save-excursion.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-fetch-field-from-fast)
	(spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast, spam-generate-fake-headers)
	(spam-fetch-article-header): new functions to deal with Gnus
	internals for fast retrieval of article header data
	(spam-initialize): put spam-find-spam in the gnus-summary-prepared-hook

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-md5): Remove.
	(pop3-apop): Replace pop3-md5 with md5.

	* mm-bodies.el: base64 is always built-in.

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Use
	with-current-buffer.

2004-01-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-insert-header): Remove excessive grouping in
	regexp.

	* gnus-sum.el (gnus-summary-read-document): Ditto.

	* gnus-uu.el (gnus-uu-part-number): Ditto.

	* html2text.el (html2text-remove-tags): Ditto.
	(html2text-format-tags): Ditto.
	(html2text-format-single-elements): Ditto.

	* mml.el (mml-parse-1): Ditto.

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-update-mark): Revert previous change.

	* gnus-group.el (gnus-group-mark-group): Fix for multibyte marks.

	* gnus-sum.el (gnus-summary-update-mark): Fix for multibyte marks.

	* gnus-util.el (gnus-replace-in-string): Remove Emacs 20 code.

2003-11-15  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-lookup-all-secret-keys)
	(pgg-gpg-lookup-key): Use regexp match instead of
	split-string (split-string is different between emacs 21.2 and
	22.1).  Reported by ultrasoul@ultrasoul.com (David D. Smith).

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-view-all-parts)
	(gnus-article-part-wrapper, gnus-article-view-part): Use
	with-current-buffer.

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-disable-spam-split-during-ham-respool)
	(spam-spamoracle-database, spam-cache-lookups)
	(spam-split-last-successful-check, spam-clear-cache, spam-xor)
	(spam-group-ham-mark-p, spam-group-spam-mark-p)
	(spam-group-ham-marks, spam-group-spam-marks)
	(spam-group-spam-contents-p, spam-group-ham-contents-p)
	(spam-list-of-processors, spam-list-of-statistical-checks): doc
	fix, also add spam-use-blackholes to the statistical checks
	(spam-fetch-field-fast): new interface to fetching fields, may
	become a macro
	(spam-fetch-field-from-fast, spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast): use spam-fetch-field-fast
	(spam-insert-fake-headers): fake an article when needed
	(spam-find-spam): fake article when possible
	(spam-check-blackholes, spam-check-BBDB, spam-from-listed-p)
	(spam-check-bogofilter-headers): use message-fetch-field instead
	of nnmail-fetch-field

2004-01-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-find-trace): Add `k' (kill-buffer).

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-split): do not require spam-use-CHECK to be
	enabled if that check is passed to spam-split explicitly; also
	fix so 'spam doesn't get converted to spam-split-group when
	spam-split-symbolic-return is t
	(spam-find-spam): find registrations of the article and use those
	instead of re-running spam-split to find the spam/ham
	classification of the article
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	use gnus-error instead of gnus-message
	(spam-log-registration-type): new function to determine the
	classification of a message based on registry entries; will
	return nil if both 'spam and 'ham are found
	(spam-check-BBDB): expand all the BBDB macros here so we can have
	a reasonably fast local cache without the loading errors
	(spam-cache-lookups): set to t by default
	(spam-find-spam): don't try to guess spam-cache-lookups
	(spam-enter-whitelist, spam-enter-blacklist): also clear the
	spam-caches entry
	(spam-filelist-build-cache, spam-filelist-check-cache): better
	caching of whitelist/blacklist entries
	(spam-check-whitelist, spam-check-blacklist): invoke
	spam-from-listed-p with a type, not a cache variable
	(spam-from-listed-p): wrap around spam-filelist-check-cache

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cite-prefix-regexp): Use with-syntax-table.

	* nnmail.el (nnmail-split-fancy): do.

	* mml.el (mml-parse): do.

	* gnus-score.el (gnus-enter-score-words-into-hashtb)
	(gnus-score-adaptive): do.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-treat-emphasize): Ignore Emacs version number.
	(gnus-mime-button-map): Don't set keymap parent.
	(gnus-button-ctan-directory-regexp): Use shy grouping.
	(gnus-prev-page-map): Don't set keymap parent.
	(gnus-prev-page-map): Remove duplicated one.
	(gnus-next-page-map): Don't set keymap parent.
	(gnus-mime-security-button-map): Ditto.

	* nnheader.el (nnheader-directory-files-is-safe): Ignore Emacs
	version number.

	* sha1-el.el (sha1-string-external): Use with-temp-buffer.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-sha1-function): Remove.
	(canlock-sha1-function-for-verify): Remove.
	(canlock-openssl-program): Remove.
	(canlock-openssl-args): Remove.
	(canlock-ignore-errors): Remove.
	(canlock-sha1-with-openssl): Remove.
	(canlock-sha1): Use sha1 instead of to call canlock-sha1-function.
	(canlock-verify): Don't use canlock-ignore-errors.

	* sha1-el.el (sha1-string-external): Make it can return a string
	in binary form.
	(sha1-region-external): Ditto.
	(sha1-string-internal): Ditto.
	(sha1-region-internal): Ditto.
	(sha1-region): Ditto.
	(sha1-string): Ditto.
	(sha1): Ditto.

2004-01-07  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam.el (spam-report-articles-gmane): New command.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el: Don't make unnecessary *Group* buffer when loading.

	* run-at-time.el (run-at-time-saved): Remove.
	(run-at-time): Doc fix.

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-limit-to-replied): New command.
	(gnus-summary-limit-map): Add it.
	(gnus-summary-make-menu-bar): do.

2004-01-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-cache-lookups, spam-caches, spam-clear-cache):
	first attempt at some caching support (done for BBDB only now)
	(spam-find-spam): set spam-cache-lookups if there are more than 2
	addresses to be checked
	(spam-clear-cache-BBDB): new function, to be invoked by
	bbdb-change-hook, and triggering spam-clear-cache of 'spam-use-BBDB
	(spam-check-BBDB): check and use the caches, if
	spam-cache-lookups is on
	remove superfluous (provide)

2004-01-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences): Changed default.

2004-01-07  Steve Youngs  <sryoungs@bigpond.net.au>

	* run-at-time.el (run-at-time-saved): Move to after the definition
	of `run-at-time'.

	* dgnushack.el: Autoload `font-lock-fontify-buffer' in XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't use
	mm-w3m-local-map-property.

	* mm-view.el (mm-w3m-mode-map): Remove.
	(mm-w3m-local-map-property): Remove.
	(mm-inline-text-html-render-with-w3m): Don't use
	mm-w3m-local-map-property.

2004-01-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* run-at-time.el: New file.

	* dgnushack.el (dgnushack-compile): Don't compile run-at-time
	under Emacs.

	* gnus.el ((fboundp 'gnus-set-text-properties)): Remove definition
	of gnus-set-text-properties.

	* gnus-uu.el (gnus-uu-save-article): Ditto.

	* gnus-salt.el (gnus-carpal-setup-buffer): Ditto.

	* gnus-cite.el (gnus-cite-parse): Ditto.

	* gnus-art.el (gnus-button-push): Use set-text-properties instead
	of gnus-.

	* gnus-xmas.el (run-at-time): Require run-at-time.

	* gnus.el: Changed calls to nnheader-run-at-time and
	password-run-at-time throughout to use run-at-time directly.

	* password.el: Removed definition of run-at-time.

	* nnheaderxm.el: Remove definition of run-at-time.

2004-01-05  Karl Pfl,Ad(Bsterer  <sigurd@12move.de>  (tiny change)

	* mml.el (mml-minibuffer-read-disposition): Show attachment type
	in prompt.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* messagexmas.el (message-xmas-redefine): Alias
	`message-make-caesar-translation-table' to
	``message-xmas-make-caesar-translation-table' regardless of XEmacs
	version.

	* gnus-xmas.el (gnus-xmas-set-text-properties): Removed.
	(gnus-xmas-define): Don't alias `gnus-set-text-properties' to
	`gnus-xmas-set-text-properties'.
	(gnus-xmas-redefine): Don't alias `gnus-completing-read' to
	`gnus-xmas-completing-read'.
	(gnus-xmas-completing-read): Removed.
	(gnus-xmas-open-network-stream): Removed.

	* gnus-ems.el (gnus-mode-line-modified): Don't conditionalise on
	XEmacs version.

	* dns.el (dns-make-network-process): Use `open-network-stream'
	instead of `gnus-xmas-open-network-stream'.

	* dgnushack.el: Remove some XEmacs 21.1 specific stuff.

	* .cvsignore: Add auto-autoloads.el, custom-load.el.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-display-alternative)
	(gnus-insert-mime-button, gnus-insert-mime-security-button)
	(gnus-insert-prev-page-button, gnus-insert-next-page-button):
	Don't use gnus-local-map-property.

	* gnus-util.el (gnus-local-map-property): Remove.

	* mm-view.el (mm-view-pkcs7-decrypt): Replace
	gnus-completing-read-maybe-default with completing-read.

	* gnus-util.el (gnus-completing-read): do.
	(gnus-completing-read-maybe-default): Remove.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* password.el: Only autoload `run-at-time' if not XEmacs.
	Only autoload the itimer functions if XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-xmas-define): Defun char-width for non-MULE
	XEmacsen.

	* dgnushack.el: Autoload executable-find for XEmacs.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-read-string): Remove.
	(gnus-summary-pipe-to-muttprint): Replace gnus-read-string with
	read-string.

2004-01-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* netrc.el: autoload password-read
	(netrc): new configuration group
	(netrc-encoding-method, netrc-openssl-path): configuration
	variables for encoding and decoding of files with symmetric
	ciphers
	(netrc-encode): assistant function to encode a file with
	netrc-encoding-method
	(netrc-parse): added interactive parameter, added optional
	decoding if netrc-encoding-method is non-nil but otherwise
	behavior is standard
	(netrc-encrypting-method, netrc-encrypt, netrc-parse):
	s/encode/encrypt/ everywhere

	* spam.el: remove executable-find autoload

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* gnus-registry.el: Remove Emacs 20 hash table compatibility code.

	* gnus-uu.el (gnus-uu-post-encoded): bury-buffer is always fbound.

2004-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences,
	article-treat-ansi-sequences): New variable and function.
	Suggested by Dan Jacobson <jidanni@jidanni.org>.

	* gnus-sum.el (gnus-summary-wash-map, gnus-summary-make-menu-bar):
	Use it.

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* mm-util.el (mm-quote-arg): Remove.

	* mm-decode.el (mm-mailcap-command): Replace mm-quote-arg with
	shell-quote-argument.

	* gnus-uu.el (gnus-uu-command): do.

	* gnus-sum.el (gnus-summary-insert-pseudos): do.

	* ietf-drums.el (ietf-drums-token-to-list): Replace mm-make-char
	with make-char.

	* mm-util.el (mm-make-char): Remove.

	* mml.el (mml-mode): Replace gnus-add-minor-mode with
	add-minor-mode.

	* gnus-undo.el (gnus-undo-mode): do.

	* gnus-topic.el (gnus-topic-mode): do.

	* gnus-sum.el (gnus-dead-summary-mode): do.

	* gnus-start.el (gnus-slave-mode): do.

	* gnus-salt.el (gnus-binary-mode, gnus-pick-mode): do.

	* gnus-ml.el (gnus-mailing-list-mode): do.

	* gnus-gl.el (gnus-grouplens-mode): do.

	* gnus-draft.el (gnus-draft-mode): do.

	* gnus-dired.el (gnus-dired-mode): do.

	* gnus-ems.el (gnus-add-minor-mode): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* spam-stat.el (with-syntax-table): Remove with-syntax-table
	definition.
	Remove Emacs 20 hash table compatibility code.

	* rfc2047.el (with-syntax-table): Remove with-syntax-table Emacs
	20 compatibility code.

	* spam.el (spam-point-at-eol): Replace with point-at-eol.

	* smime.el (smime-point-at-eol): Replace with point-at-eol.

	* rfc2047.el (rfc2047-point-at-bol, rfc2047-point-at-eol): Replace
	with point-at-{eol,bol}.

	* netrc.el (netrc-point-at-eol): Replace with point-at-eol.

	* imap.el (imap-point-at-eol): Replace with point-at-eol.

	* flow-fill.el (fill-flowed-point-at-bol,
	fill-flowed-point-at-eol): Replace with point-at-{eol,bol}.

	* gnus-util.el (gnus-point-at-bol, gnus-point-at-eol): Remove.
	Replace with point-at-{eol,bol} throughout all files.

2004-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* ntlm.el (ntlm-string-as-unibyte): New macro.
	(ntlm-build-auth-response): Use it.

	Remove Emacs 20 stuff:
	* dgnushack.el (dgnushack-compile): Don't modify max-specpdl-size.
	(butlast, mapc, remove): Remove the compiler macros.
	* gnus-msg.el (gnus-summary-news-other-window): Use remove instead
	of delq and copy-sequence.
	* gnus-art.el (popup-menu): Remove the compiler macro.
	* nnmail.el (nnmail-split-fancy): Don't support customizing with
	Emacs 20.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* ntlm.el: Fix namespace.  Change smb-passwd-hash into
	ntlm-smb-passwd-hash, smb-owf-encrypt into ntlm-smb-owf-encrypt,
	smb-passwd-hash into ntlm-smb-passwd-hash, smbdes-e-p16 into
	ntlm-smb-des-e-p16, smbdes-e-p24 into ntlm-smb-des-e-p24, smbhash
	into ntlm-smb-hash, smb-sp8 into ntlm-smb-sp8, smb-str-to-key into
	ntlm-smb-str-to-key, smb-dohash into ntlm-smb-dohash, smb-perm1
	into ntlm-smb-perm1, smb-perm2 into ntlm-smb-perm2, smb-perm3 into
	ntlm-smb-perm3, smb-perm4 into ntlm-smb-perm4, smb-perm5 into
	ntlm-smb-perm5, smb-perm6 into ntlm-smb-perm6, smb-sc into
	ntlm-smb-sc, smb-sbox into ntlm-smb-sbox, string-permute into
	ntlm-string-permute, string-lshift into ntlm-string-lshift,
	string-xor into ntlm-string-xor.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* ntlm.el: Don't include poem.

	* md4.el (print-int32, print-string-hexa): Remove.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* sasl-ntlm.el, ntlm.el, md4.el: New files.

	* hmac-md5.el (md5-binary): Fix byte compile warning.  (This
	probably breaks emacs with DL patch, but do we care? Is anyone
	still using the DL stuff?)

	* sieve-manage.el: Use the password package.
	(sieve-manage-read-passwd): Remove.
	(sieve-manage-interactive-login): Use password.  Re-add
	condition-case around loop.

	* pgg.el (pgg-passphrase-cache, pgg-run-at-time): Remove.
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache): Use
	the password package.

2003-02-19  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (sieve-sasl-auth): Quote optional initial SASL
	token.

2002-08-07  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (require): Use SASL, not RFC2104/MD5.
	(sieve-manage-authenticators):
	(sieve-manage-authenticator-alist): Add some SASL mechs.
	(sieve-sasl-auth): New function.
	(sieve-manage-cram-md5-auth):
	(sieve-manage-plain-auth): Rewrite using SASL library.
	(sieve-manage-digest-md5-p, sieve-manage-digest-md5-auth)
	(sieve-manage-scram-md5-p, sieve-manage-scram-md5-auth)
	(sieve-manage-ntlm-p, sieve-manage-ntlm-auth)
	(sieve-manage-login-p, sieve-manage-login-auth): Add wrappers.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* sasl.el, sasl-cram.el, sasl-digest.el, hmac-md5.el, hmac-def.el:
	New files.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-no-groups-message): Update.

	* gnus-sum.el (gnus-summary-insert-new-articles): Remove .

2003-11-09  Simon Josefsson  <jas@extundo.com>

	* imap.el: Support for ID IMAP extension (RFC 2971).
	(imap-local-variables): Add imap-id.
	(imap-id): New variable.
	(imap-id): New function.
	(imap-parse-response): Parse untagged ID response.
	* nnimap.el (nnimap-id): New variable.
	(nnimap-open-connection): Use it.

2003-12-28  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): New.
	* gnus-group.el (gnus-group-score-map): Bind it to W e.

2004-01-04  Simon Josefsson  <jas@extundo.com>

	* password.el: Add.

2004-01-04  Mario Lang  <lang@zid.tugraz.at>

	* dns.el: Add support for AAAA records (see RFC 3596)

	* Fix typo PRT -> PTR

	* Parse MX, PTR and SOA replies (see RFC 1035)

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-logo-color-style): Changed colors to `no'.

	* Moved to Changelog.2.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2004-01-04 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.1 is released.

2004-01-04 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.0 is released.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.
	(gnus-version): No.

See ChangeLog.2 for earlier changes.

    Copyright (C) 2004, 2005, 2006 Free Software Foundation, Inc.
  Copying and distribution of this file, with or without modification,
  are permitted provided the copyright notice and this notice are preserved.

;; Local Variables:
;; coding: iso-2022-7bit
;; End:

;;; arch-tag: 3f33a3e7-090d-492b-bedd-02a1417d32b4
